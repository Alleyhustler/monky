(()=>{var As=Object.defineProperty;var Ot=Object.getOwnPropertySymbols;var Ms=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable;var At=(t,y,e)=>y in t?As(t,y,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[y]=e,ce=(t,y)=>{for(var e in y||(y={}))Ms.call(y,e)&&At(t,e,y[e]);if(Ot)for(var e of Ot(y))Fs.call(y,e)&&At(t,e,y[e]);return t};var I=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(y,e)=>(typeof require!="undefined"?require:y)[e]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var S=(t,y)=>()=>(y||t((y={exports:{}}).exports,y),y.exports);var q=S((hf,Mt)=>{var Ls=Array.isArray;Mt.exports=Ls});var Ge=S((yf,Ft)=>{var Cs=typeof window=="object"&&window&&window.Object===Object&&window;Ft.exports=Cs});var H=S((mf,Lt)=>{var Ts=Ge(),Is=typeof self=="object"&&self&&self.Object===Object&&self,Ps=Ts||Is||Function("return this")();Lt.exports=Ps});var ge=S((vf,Ct)=>{var Ds=H(),Rs=Ds.Symbol;Ct.exports=Rs});var Dt=S((_f,Pt)=>{var Tt=ge(),It=Object.prototype,Us=It.hasOwnProperty,xs=It.toString,pe=Tt?Tt.toStringTag:void 0;function Ns(t){var y=Us.call(t,pe),e=t[pe];try{t[pe]=void 0;var u=!0}catch(c){}var g=xs.call(t);return u&&(y?t[pe]=e:delete t[pe]),g}Pt.exports=Ns});var Ut=S((wf,Rt)=>{var ks=Object.prototype,js=ks.toString;function Gs(t){return js.call(t)}Rt.exports=Gs});var J=S((bf,kt)=>{var xt=ge(),Ws=Dt(),Vs=Ut(),qs="[object Null]",Hs="[object Undefined]",Nt=xt?xt.toStringTag:void 0;function $s(t){return t==null?t===void 0?Hs:qs:Nt&&Nt in Object(t)?Ws(t):Vs(t)}kt.exports=$s});var K=S((Ef,jt)=>{function Bs(t){return t!=null&&typeof t=="object"}jt.exports=Bs});var Ae=S((Sf,Gt)=>{var zs=J(),Js=K(),Ks="[object Symbol]";function Ys(t){return typeof t=="symbol"||Js(t)&&zs(t)==Ks}Gt.exports=Ys});var Me=S((Of,Wt)=>{var Qs=q(),Zs=Ae(),Xs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ea=/^\w*$/;function ta(t,y){if(Qs(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||Zs(t)?!0:ea.test(t)||!Xs.test(t)||y!=null&&t in Object(y)}Wt.exports=ta});var Fe=S((Af,Vt)=>{function oa(t){var y=typeof t;return t!=null&&(y=="object"||y=="function")}Vt.exports=oa});var We=S((Mf,qt)=>{var na=J(),ra=Fe(),ia="[object AsyncFunction]",sa="[object Function]",aa="[object GeneratorFunction]",la="[object Proxy]";function ua(t){if(!ra(t))return!1;var y=na(t);return y==sa||y==aa||y==ia||y==la}qt.exports=ua});var $t=S((Ff,Ht)=>{var da=H(),ca=da["__core-js_shared__"];Ht.exports=ca});var Jt=S((Lf,zt)=>{var Ve=$t(),Bt=function(){var t=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ga(t){return!!Bt&&Bt in t}zt.exports=ga});var qe=S((Cf,Kt)=>{var pa=Function.prototype,fa=pa.toString;function ha(t){if(t!=null){try{return fa.call(t)}catch(y){}try{return t+""}catch(y){}}return""}Kt.exports=ha});var Qt=S((Tf,Yt)=>{var ya=We(),ma=Jt(),va=Fe(),_a=qe(),wa=/[\\^$.*+?()[\]{}|]/g,ba=/^\[object .+?Constructor\]$/,Ea=Function.prototype,Sa=Object.prototype,Oa=Ea.toString,Aa=Sa.hasOwnProperty,Ma=RegExp("^"+Oa.call(Aa).replace(wa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fa(t){if(!va(t)||ma(t))return!1;var y=ya(t)?Ma:ba;return y.test(_a(t))}Yt.exports=Fa});var Xt=S((If,Zt)=>{function La(t,y){return t==null?void 0:t[y]}Zt.exports=La});var ee=S((Pf,eo)=>{var Ca=Qt(),Ta=Xt();function Ia(t,y){var e=Ta(t,y);return Ca(e)?e:void 0}eo.exports=Ia});var fe=S((Df,to)=>{var Pa=ee(),Da=Pa(Object,"create");to.exports=Da});var ro=S((Rf,no)=>{var oo=fe();function Ra(){this.__data__=oo?oo(null):{},this.size=0}no.exports=Ra});var so=S((Uf,io)=>{function Ua(t){var y=this.has(t)&&delete this.__data__[t];return this.size-=y?1:0,y}io.exports=Ua});var lo=S((xf,ao)=>{var xa=fe(),Na="__lodash_hash_undefined__",ka=Object.prototype,ja=ka.hasOwnProperty;function Ga(t){var y=this.__data__;if(xa){var e=y[t];return e===Na?void 0:e}return ja.call(y,t)?y[t]:void 0}ao.exports=Ga});var co=S((Nf,uo)=>{var Wa=fe(),Va=Object.prototype,qa=Va.hasOwnProperty;function Ha(t){var y=this.__data__;return Wa?y[t]!==void 0:qa.call(y,t)}uo.exports=Ha});var po=S((kf,go)=>{var $a=fe(),Ba="__lodash_hash_undefined__";function za(t,y){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=$a&&y===void 0?Ba:y,this}go.exports=za});var ho=S((jf,fo)=>{var Ja=ro(),Ka=so(),Ya=lo(),Qa=co(),Za=po();function ne(t){var y=-1,e=t==null?0:t.length;for(this.clear();++y<e;){var u=t[y];this.set(u[0],u[1])}}ne.prototype.clear=Ja;ne.prototype.delete=Ka;ne.prototype.get=Ya;ne.prototype.has=Qa;ne.prototype.set=Za;fo.exports=ne});var mo=S((Gf,yo)=>{function Xa(){this.__data__=[],this.size=0}yo.exports=Xa});var He=S((Wf,vo)=>{function el(t,y){return t===y||t!==t&&y!==y}vo.exports=el});var he=S((Vf,_o)=>{var tl=He();function ol(t,y){for(var e=t.length;e--;)if(tl(t[e][0],y))return e;return-1}_o.exports=ol});var bo=S((qf,wo)=>{var nl=he(),rl=Array.prototype,il=rl.splice;function sl(t){var y=this.__data__,e=nl(y,t);if(e<0)return!1;var u=y.length-1;return e==u?y.pop():il.call(y,e,1),--this.size,!0}wo.exports=sl});var So=S((Hf,Eo)=>{var al=he();function ll(t){var y=this.__data__,e=al(y,t);return e<0?void 0:y[e][1]}Eo.exports=ll});var Ao=S(($f,Oo)=>{var ul=he();function dl(t){return ul(this.__data__,t)>-1}Oo.exports=dl});var Fo=S((Bf,Mo)=>{var cl=he();function gl(t,y){var e=this.__data__,u=cl(e,t);return u<0?(++this.size,e.push([t,y])):e[u][1]=y,this}Mo.exports=gl});var ye=S((zf,Lo)=>{var pl=mo(),fl=bo(),hl=So(),yl=Ao(),ml=Fo();function re(t){var y=-1,e=t==null?0:t.length;for(this.clear();++y<e;){var u=t[y];this.set(u[0],u[1])}}re.prototype.clear=pl;re.prototype.delete=fl;re.prototype.get=hl;re.prototype.has=yl;re.prototype.set=ml;Lo.exports=re});var Le=S((Jf,Co)=>{var vl=ee(),_l=H(),wl=vl(_l,"Map");Co.exports=wl});var Po=S((Kf,Io)=>{var To=ho(),bl=ye(),El=Le();function Sl(){this.size=0,this.__data__={hash:new To,map:new(El||bl),string:new To}}Io.exports=Sl});var Ro=S((Yf,Do)=>{function Ol(t){var y=typeof t;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?t!=="__proto__":t===null}Do.exports=Ol});var me=S((Qf,Uo)=>{var Al=Ro();function Ml(t,y){var e=t.__data__;return Al(y)?e[typeof y=="string"?"string":"hash"]:e.map}Uo.exports=Ml});var No=S((Zf,xo)=>{var Fl=me();function Ll(t){var y=Fl(this,t).delete(t);return this.size-=y?1:0,y}xo.exports=Ll});var jo=S((Xf,ko)=>{var Cl=me();function Tl(t){return Cl(this,t).get(t)}ko.exports=Tl});var Wo=S((eh,Go)=>{var Il=me();function Pl(t){return Il(this,t).has(t)}Go.exports=Pl});var qo=S((th,Vo)=>{var Dl=me();function Rl(t,y){var e=Dl(this,t),u=e.size;return e.set(t,y),this.size+=e.size==u?0:1,this}Vo.exports=Rl});var Ce=S((oh,Ho)=>{var Ul=Po(),xl=No(),Nl=jo(),kl=Wo(),jl=qo();function ie(t){var y=-1,e=t==null?0:t.length;for(this.clear();++y<e;){var u=t[y];this.set(u[0],u[1])}}ie.prototype.clear=Ul;ie.prototype.delete=xl;ie.prototype.get=Nl;ie.prototype.has=kl;ie.prototype.set=jl;Ho.exports=ie});var zo=S((nh,Bo)=>{var $o=Ce(),Gl="Expected a function";function $e(t,y){if(typeof t!="function"||y!=null&&typeof y!="function")throw new TypeError(Gl);var e=function(){var u=arguments,g=y?y.apply(this,u):u[0],c=e.cache;if(c.has(g))return c.get(g);var l=t.apply(this,u);return e.cache=c.set(g,l)||c,l};return e.cache=new($e.Cache||$o),e}$e.Cache=$o;Bo.exports=$e});var Ko=S((rh,Jo)=>{var Wl=zo(),Vl=500;function ql(t){var y=Wl(t,function(u){return e.size===Vl&&e.clear(),u}),e=y.cache;return y}Jo.exports=ql});var Qo=S((ih,Yo)=>{var Hl=Ko(),$l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bl=/\\(\\)?/g,zl=Hl(function(t){var y=[];return t.charCodeAt(0)===46&&y.push(""),t.replace($l,function(e,u,g,c){y.push(g?c.replace(Bl,"$1"):u||e)}),y});Yo.exports=zl});var Xo=S((sh,Zo)=>{function Jl(t,y){for(var e=-1,u=t==null?0:t.length,g=Array(u);++e<u;)g[e]=y(t[e],e,t);return g}Zo.exports=Jl});var sn=S((ah,rn)=>{var en=ge(),Kl=Xo(),Yl=q(),Ql=Ae(),Zl=1/0,tn=en?en.prototype:void 0,on=tn?tn.toString:void 0;function nn(t){if(typeof t=="string")return t;if(Yl(t))return Kl(t,nn)+"";if(Ql(t))return on?on.call(t):"";var y=t+"";return y=="0"&&1/t==-Zl?"-0":y}rn.exports=nn});var ln=S((lh,an)=>{var Xl=sn();function eu(t){return t==null?"":Xl(t)}an.exports=eu});var Be=S((uh,un)=>{var tu=q(),ou=Me(),nu=Qo(),ru=ln();function iu(t,y){return tu(t)?t:ou(t,y)?[t]:nu(ru(t))}un.exports=iu});var ve=S((dh,dn)=>{var su=Ae(),au=1/0;function lu(t){if(typeof t=="string"||su(t))return t;var y=t+"";return y=="0"&&1/t==-au?"-0":y}dn.exports=lu});var ze=S((ch,cn)=>{var uu=Be(),du=ve();function cu(t,y){y=uu(y,t);for(var e=0,u=y.length;t!=null&&e<u;)t=t[du(y[e++])];return e&&e==u?t:void 0}cn.exports=cu});var Je=S((gh,gn)=>{var gu=ze();function pu(t,y,e){var u=t==null?void 0:gu(t,y);return u===void 0?e:u}gn.exports=pu});var Ke=S((ph,pn)=>{function fu(t,y){return function(e){return t(y(e))}}pn.exports=fu});var hn=S((fh,fn)=>{var hu=Ke(),yu=hu(Object.getPrototypeOf,Object);fn.exports=yu});var vn=S((hh,mn)=>{var mu=J(),vu=hn(),_u=K(),wu="[object Object]",bu=Function.prototype,Eu=Object.prototype,yn=bu.toString,Su=Eu.hasOwnProperty,Ou=yn.call(Object);function Au(t){if(!_u(t)||mu(t)!=wu)return!1;var y=vu(t);if(y===null)return!0;var e=Su.call(y,"constructor")&&y.constructor;return typeof e=="function"&&e instanceof e&&yn.call(e)==Ou}mn.exports=Au});var wn=S((yh,_n)=>{var Mu=J(),Fu=q(),Lu=K(),Cu="[object String]";function Tu(t){return typeof t=="string"||!Fu(t)&&Lu(t)&&Mu(t)==Cu}_n.exports=Tu});var En=S((mh,bn)=>{function Iu(t,y,e,u){var g=-1,c=t==null?0:t.length;for(u&&c&&(e=t[++g]);++g<c;)e=y(e,t[g],g,t);return e}bn.exports=Iu});var On=S((vh,Sn)=>{function Pu(t){return function(y,e,u){for(var g=-1,c=Object(y),l=u(y),o=l.length;o--;){var s=l[t?o:++g];if(e(c[s],s,c)===!1)break}return y}}Sn.exports=Pu});var Mn=S((_h,An)=>{var Du=On(),Ru=Du();An.exports=Ru});var Ln=S((wh,Fn)=>{function Uu(t,y){for(var e=-1,u=Array(t);++e<t;)u[e]=y(e);return u}Fn.exports=Uu});var Tn=S((bh,Cn)=>{var xu=J(),Nu=K(),ku="[object Arguments]";function ju(t){return Nu(t)&&xu(t)==ku}Cn.exports=ju});var Ye=S((Eh,Dn)=>{var In=Tn(),Gu=K(),Pn=Object.prototype,Wu=Pn.hasOwnProperty,Vu=Pn.propertyIsEnumerable,qu=In(function(){return arguments}())?In:function(t){return Gu(t)&&Wu.call(t,"callee")&&!Vu.call(t,"callee")};Dn.exports=qu});var Un=S((Sh,Rn)=>{function Hu(){return!1}Rn.exports=Hu});var Qe=S((_e,se)=>{var $u=H(),Bu=Un(),xn=typeof _e=="object"&&_e&&!_e.nodeType&&_e,Nn=xn&&typeof se=="object"&&se&&!se.nodeType&&se,zu=Nn&&Nn.exports===xn,kn=zu?$u.Buffer:void 0,Ju=kn?kn.isBuffer:void 0,Ku=Ju||Bu;se.exports=Ku});var Ze=S((Oh,jn)=>{var Yu=9007199254740991,Qu=/^(?:0|[1-9]\d*)$/;function Zu(t,y){var e=typeof t;return y=y==null?Yu:y,!!y&&(e=="number"||e!="symbol"&&Qu.test(t))&&t>-1&&t%1==0&&t<y}jn.exports=Zu});var Te=S((Ah,Gn)=>{var Xu=9007199254740991;function ed(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Xu}Gn.exports=ed});var Vn=S((Mh,Wn)=>{var td=J(),od=Te(),nd=K(),rd="[object Arguments]",id="[object Array]",sd="[object Boolean]",ad="[object Date]",ld="[object Error]",ud="[object Function]",dd="[object Map]",cd="[object Number]",gd="[object Object]",pd="[object RegExp]",fd="[object Set]",hd="[object String]",yd="[object WeakMap]",md="[object ArrayBuffer]",vd="[object DataView]",_d="[object Float32Array]",wd="[object Float64Array]",bd="[object Int8Array]",Ed="[object Int16Array]",Sd="[object Int32Array]",Od="[object Uint8Array]",Ad="[object Uint8ClampedArray]",Md="[object Uint16Array]",Fd="[object Uint32Array]",P={};P[_d]=P[wd]=P[bd]=P[Ed]=P[Sd]=P[Od]=P[Ad]=P[Md]=P[Fd]=!0;P[rd]=P[id]=P[md]=P[sd]=P[vd]=P[ad]=P[ld]=P[ud]=P[dd]=P[cd]=P[gd]=P[pd]=P[fd]=P[hd]=P[yd]=!1;function Ld(t){return nd(t)&&od(t.length)&&!!P[td(t)]}Wn.exports=Ld});var Hn=S((Fh,qn)=>{function Cd(t){return function(y){return t(y)}}qn.exports=Cd});var Bn=S((be,ae)=>{var Td=Ge(),$n=typeof be=="object"&&be&&!be.nodeType&&be,we=$n&&typeof ae=="object"&&ae&&!ae.nodeType&&ae,Id=we&&we.exports===$n,Xe=Id&&Td.process,Pd=function(){try{var t=we&&we.require&&we.require("util").types;return t||Xe&&Xe.binding&&Xe.binding("util")}catch(y){}}();ae.exports=Pd});var et=S((Lh,Kn)=>{var Dd=Vn(),Rd=Hn(),zn=Bn(),Jn=zn&&zn.isTypedArray,Ud=Jn?Rd(Jn):Dd;Kn.exports=Ud});var Qn=S((Ch,Yn)=>{var xd=Ln(),Nd=Ye(),kd=q(),jd=Qe(),Gd=Ze(),Wd=et(),Vd=Object.prototype,qd=Vd.hasOwnProperty;function Hd(t,y){var e=kd(t),u=!e&&Nd(t),g=!e&&!u&&jd(t),c=!e&&!u&&!g&&Wd(t),l=e||u||g||c,o=l?xd(t.length,String):[],s=o.length;for(var a in t)(y||qd.call(t,a))&&!(l&&(a=="length"||g&&(a=="offset"||a=="parent")||c&&(a=="buffer"||a=="byteLength"||a=="byteOffset")||Gd(a,s)))&&o.push(a);return o}Yn.exports=Hd});var Xn=S((Th,Zn)=>{var $d=Object.prototype;function Bd(t){var y=t&&t.constructor,e=typeof y=="function"&&y.prototype||$d;return t===e}Zn.exports=Bd});var tr=S((Ih,er)=>{var zd=Ke(),Jd=zd(Object.keys,Object);er.exports=Jd});var nr=S((Ph,or)=>{var Kd=Xn(),Yd=tr(),Qd=Object.prototype,Zd=Qd.hasOwnProperty;function Xd(t){if(!Kd(t))return Yd(t);var y=[];for(var e in Object(t))Zd.call(t,e)&&e!="constructor"&&y.push(e);return y}or.exports=Xd});var tt=S((Dh,rr)=>{var ec=We(),tc=Te();function oc(t){return t!=null&&tc(t.length)&&!ec(t)}rr.exports=oc});var Ie=S((Rh,ir)=>{var nc=Qn(),rc=nr(),ic=tt();function sc(t){return ic(t)?nc(t):rc(t)}ir.exports=sc});var ar=S((Uh,sr)=>{var ac=Mn(),lc=Ie();function uc(t,y){return t&&ac(t,y,lc)}sr.exports=uc});var ur=S((xh,lr)=>{var dc=tt();function cc(t,y){return function(e,u){if(e==null)return e;if(!dc(e))return t(e,u);for(var g=e.length,c=y?g:-1,l=Object(e);(y?c--:++c<g)&&u(l[c],c,l)!==!1;);return e}}lr.exports=cc});var cr=S((Nh,dr)=>{var gc=ar(),pc=ur(),fc=pc(gc);dr.exports=fc});var pr=S((kh,gr)=>{var hc=ye();function yc(){this.__data__=new hc,this.size=0}gr.exports=yc});var hr=S((jh,fr)=>{function mc(t){var y=this.__data__,e=y.delete(t);return this.size=y.size,e}fr.exports=mc});var mr=S((Gh,yr)=>{function vc(t){return this.__data__.get(t)}yr.exports=vc});var _r=S((Wh,vr)=>{function _c(t){return this.__data__.has(t)}vr.exports=_c});var br=S((Vh,wr)=>{var wc=ye(),bc=Le(),Ec=Ce(),Sc=200;function Oc(t,y){var e=this.__data__;if(e instanceof wc){var u=e.__data__;if(!bc||u.length<Sc-1)return u.push([t,y]),this.size=++e.size,this;e=this.__data__=new Ec(u)}return e.set(t,y),this.size=e.size,this}wr.exports=Oc});var ot=S((qh,Er)=>{var Ac=ye(),Mc=pr(),Fc=hr(),Lc=mr(),Cc=_r(),Tc=br();function le(t){var y=this.__data__=new Ac(t);this.size=y.size}le.prototype.clear=Mc;le.prototype.delete=Fc;le.prototype.get=Lc;le.prototype.has=Cc;le.prototype.set=Tc;Er.exports=le});var Or=S((Hh,Sr)=>{var Ic="__lodash_hash_undefined__";function Pc(t){return this.__data__.set(t,Ic),this}Sr.exports=Pc});var Mr=S(($h,Ar)=>{function Dc(t){return this.__data__.has(t)}Ar.exports=Dc});var Lr=S((Bh,Fr)=>{var Rc=Ce(),Uc=Or(),xc=Mr();function Pe(t){var y=-1,e=t==null?0:t.length;for(this.__data__=new Rc;++y<e;)this.add(t[y])}Pe.prototype.add=Pe.prototype.push=Uc;Pe.prototype.has=xc;Fr.exports=Pe});var Tr=S((zh,Cr)=>{function Nc(t,y){for(var e=-1,u=t==null?0:t.length;++e<u;)if(y(t[e],e,t))return!0;return!1}Cr.exports=Nc});var Pr=S((Jh,Ir)=>{function kc(t,y){return t.has(y)}Ir.exports=kc});var nt=S((Kh,Dr)=>{var jc=Lr(),Gc=Tr(),Wc=Pr(),Vc=1,qc=2;function Hc(t,y,e,u,g,c){var l=e&Vc,o=t.length,s=y.length;if(o!=s&&!(l&&s>o))return!1;var a=c.get(t),d=c.get(y);if(a&&d)return a==y&&d==t;var r=-1,n=!0,f=e&qc?new jc:void 0;for(c.set(t,y),c.set(y,t);++r<o;){var h=t[r],m=y[r];if(u)var i=l?u(m,h,r,y,t,c):u(h,m,r,t,y,c);if(i!==void 0){if(i)continue;n=!1;break}if(f){if(!Gc(y,function(v,_){if(!Wc(f,_)&&(h===v||g(h,v,e,u,c)))return f.push(_)})){n=!1;break}}else if(!(h===m||g(h,m,e,u,c))){n=!1;break}}return c.delete(t),c.delete(y),n}Dr.exports=Hc});var Ur=S((Yh,Rr)=>{var $c=H(),Bc=$c.Uint8Array;Rr.exports=Bc});var Nr=S((Qh,xr)=>{function zc(t){var y=-1,e=Array(t.size);return t.forEach(function(u,g){e[++y]=[g,u]}),e}xr.exports=zc});var jr=S((Zh,kr)=>{function Jc(t){var y=-1,e=Array(t.size);return t.forEach(function(u){e[++y]=u}),e}kr.exports=Jc});var Hr=S((Xh,qr)=>{var Gr=ge(),Wr=Ur(),Kc=He(),Yc=nt(),Qc=Nr(),Zc=jr(),Xc=1,eg=2,tg="[object Boolean]",og="[object Date]",ng="[object Error]",rg="[object Map]",ig="[object Number]",sg="[object RegExp]",ag="[object Set]",lg="[object String]",ug="[object Symbol]",dg="[object ArrayBuffer]",cg="[object DataView]",Vr=Gr?Gr.prototype:void 0,rt=Vr?Vr.valueOf:void 0;function gg(t,y,e,u,g,c,l){switch(e){case cg:if(t.byteLength!=y.byteLength||t.byteOffset!=y.byteOffset)return!1;t=t.buffer,y=y.buffer;case dg:return!(t.byteLength!=y.byteLength||!c(new Wr(t),new Wr(y)));case tg:case og:case ig:return Kc(+t,+y);case ng:return t.name==y.name&&t.message==y.message;case sg:case lg:return t==y+"";case rg:var o=Qc;case ag:var s=u&Xc;if(o||(o=Zc),t.size!=y.size&&!s)return!1;var a=l.get(t);if(a)return a==y;u|=eg,l.set(t,y);var d=Yc(o(t),o(y),u,g,c,l);return l.delete(t),d;case ug:if(rt)return rt.call(t)==rt.call(y)}return!1}qr.exports=gg});var Br=S((ey,$r)=>{function pg(t,y){for(var e=-1,u=y.length,g=t.length;++e<u;)t[g+e]=y[e];return t}$r.exports=pg});var Jr=S((ty,zr)=>{var fg=Br(),hg=q();function yg(t,y,e){var u=y(t);return hg(t)?u:fg(u,e(t))}zr.exports=yg});var Yr=S((oy,Kr)=>{function mg(t,y){for(var e=-1,u=t==null?0:t.length,g=0,c=[];++e<u;){var l=t[e];y(l,e,t)&&(c[g++]=l)}return c}Kr.exports=mg});var Zr=S((ny,Qr)=>{function vg(){return[]}Qr.exports=vg});var ti=S((ry,ei)=>{var _g=Yr(),wg=Zr(),bg=Object.prototype,Eg=bg.propertyIsEnumerable,Xr=Object.getOwnPropertySymbols,Sg=Xr?function(t){return t==null?[]:(t=Object(t),_g(Xr(t),function(y){return Eg.call(t,y)}))}:wg;ei.exports=Sg});var ni=S((iy,oi)=>{var Og=Jr(),Ag=ti(),Mg=Ie();function Fg(t){return Og(t,Mg,Ag)}oi.exports=Fg});var si=S((sy,ii)=>{var ri=ni(),Lg=1,Cg=Object.prototype,Tg=Cg.hasOwnProperty;function Ig(t,y,e,u,g,c){var l=e&Lg,o=ri(t),s=o.length,a=ri(y),d=a.length;if(s!=d&&!l)return!1;for(var r=s;r--;){var n=o[r];if(!(l?n in y:Tg.call(y,n)))return!1}var f=c.get(t),h=c.get(y);if(f&&h)return f==y&&h==t;var m=!0;c.set(t,y),c.set(y,t);for(var i=l;++r<s;){n=o[r];var v=t[n],_=y[n];if(u)var p=l?u(_,v,n,y,t,c):u(v,_,n,t,y,c);if(!(p===void 0?v===_||g(v,_,e,u,c):p)){m=!1;break}i||(i=n=="constructor")}if(m&&!i){var b=t.constructor,E=y.constructor;b!=E&&"constructor"in t&&"constructor"in y&&!(typeof b=="function"&&b instanceof b&&typeof E=="function"&&E instanceof E)&&(m=!1)}return c.delete(t),c.delete(y),m}ii.exports=Ig});var li=S((ay,ai)=>{var Pg=ee(),Dg=H(),Rg=Pg(Dg,"DataView");ai.exports=Rg});var di=S((ly,ui)=>{var Ug=ee(),xg=H(),Ng=Ug(xg,"Promise");ui.exports=Ng});var gi=S((uy,ci)=>{var kg=ee(),jg=H(),Gg=kg(jg,"Set");ci.exports=Gg});var fi=S((dy,pi)=>{var Wg=ee(),Vg=H(),qg=Wg(Vg,"WeakMap");pi.exports=qg});var Ei=S((cy,bi)=>{var it=li(),st=Le(),at=di(),lt=gi(),ut=fi(),hi=J(),ue=qe(),yi="[object Map]",Hg="[object Object]",mi="[object Promise]",vi="[object Set]",_i="[object WeakMap]",wi="[object DataView]",$g=ue(it),Bg=ue(st),zg=ue(at),Jg=ue(lt),Kg=ue(ut),te=hi;(it&&te(new it(new ArrayBuffer(1)))!=wi||st&&te(new st)!=yi||at&&te(at.resolve())!=mi||lt&&te(new lt)!=vi||ut&&te(new ut)!=_i)&&(te=function(t){var y=hi(t),e=y==Hg?t.constructor:void 0,u=e?ue(e):"";if(u)switch(u){case $g:return wi;case Bg:return yi;case zg:return mi;case Jg:return vi;case Kg:return _i}return y});bi.exports=te});var Ti=S((gy,Ci)=>{var dt=ot(),Yg=nt(),Qg=Hr(),Zg=si(),Si=Ei(),Oi=q(),Ai=Qe(),Xg=et(),ep=1,Mi="[object Arguments]",Fi="[object Array]",De="[object Object]",tp=Object.prototype,Li=tp.hasOwnProperty;function op(t,y,e,u,g,c){var l=Oi(t),o=Oi(y),s=l?Fi:Si(t),a=o?Fi:Si(y);s=s==Mi?De:s,a=a==Mi?De:a;var d=s==De,r=a==De,n=s==a;if(n&&Ai(t)){if(!Ai(y))return!1;l=!0,d=!1}if(n&&!d)return c||(c=new dt),l||Xg(t)?Yg(t,y,e,u,g,c):Qg(t,y,s,e,u,g,c);if(!(e&ep)){var f=d&&Li.call(t,"__wrapped__"),h=r&&Li.call(y,"__wrapped__");if(f||h){var m=f?t.value():t,i=h?y.value():y;return c||(c=new dt),g(m,i,e,u,c)}}return n?(c||(c=new dt),Zg(t,y,e,u,g,c)):!1}Ci.exports=op});var ct=S((py,Di)=>{var np=Ti(),Ii=K();function Pi(t,y,e,u,g){return t===y?!0:t==null||y==null||!Ii(t)&&!Ii(y)?t!==t&&y!==y:np(t,y,e,u,Pi,g)}Di.exports=Pi});var Ui=S((fy,Ri)=>{var rp=ot(),ip=ct(),sp=1,ap=2;function lp(t,y,e,u){var g=e.length,c=g,l=!u;if(t==null)return!c;for(t=Object(t);g--;){var o=e[g];if(l&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++g<c;){o=e[g];var s=o[0],a=t[s],d=o[1];if(l&&o[2]){if(a===void 0&&!(s in t))return!1}else{var r=new rp;if(u)var n=u(a,d,s,t,y,r);if(!(n===void 0?ip(d,a,sp|ap,u,r):n))return!1}}return!0}Ri.exports=lp});var gt=S((hy,xi)=>{var up=Fe();function dp(t){return t===t&&!up(t)}xi.exports=dp});var ki=S((yy,Ni)=>{var cp=gt(),gp=Ie();function pp(t){for(var y=gp(t),e=y.length;e--;){var u=y[e],g=t[u];y[e]=[u,g,cp(g)]}return y}Ni.exports=pp});var pt=S((my,ji)=>{function fp(t,y){return function(e){return e==null?!1:e[t]===y&&(y!==void 0||t in Object(e))}}ji.exports=fp});var Wi=S((vy,Gi)=>{var hp=Ui(),yp=ki(),mp=pt();function vp(t){var y=yp(t);return y.length==1&&y[0][2]?mp(y[0][0],y[0][1]):function(e){return e===t||hp(e,t,y)}}Gi.exports=vp});var qi=S((_y,Vi)=>{function _p(t,y){return t!=null&&y in Object(t)}Vi.exports=_p});var $i=S((wy,Hi)=>{var wp=Be(),bp=Ye(),Ep=q(),Sp=Ze(),Op=Te(),Ap=ve();function Mp(t,y,e){y=wp(y,t);for(var u=-1,g=y.length,c=!1;++u<g;){var l=Ap(y[u]);if(!(c=t!=null&&e(t,l)))break;t=t[l]}return c||++u!=g?c:(g=t==null?0:t.length,!!g&&Op(g)&&Sp(l,g)&&(Ep(t)||bp(t)))}Hi.exports=Mp});var zi=S((by,Bi)=>{var Fp=qi(),Lp=$i();function Cp(t,y){return t!=null&&Lp(t,y,Fp)}Bi.exports=Cp});var Ki=S((Ey,Ji)=>{var Tp=ct(),Ip=Je(),Pp=zi(),Dp=Me(),Rp=gt(),Up=pt(),xp=ve(),Np=1,kp=2;function jp(t,y){return Dp(t)&&Rp(y)?Up(xp(t),y):function(e){var u=Ip(e,t);return u===void 0&&u===y?Pp(e,t):Tp(y,u,Np|kp)}}Ji.exports=jp});var Qi=S((Sy,Yi)=>{function Gp(t){return t}Yi.exports=Gp});var Xi=S((Oy,Zi)=>{function Wp(t){return function(y){return y==null?void 0:y[t]}}Zi.exports=Wp});var ts=S((Ay,es)=>{var Vp=ze();function qp(t){return function(y){return Vp(y,t)}}es.exports=qp});var ns=S((My,os)=>{var Hp=Xi(),$p=ts(),Bp=Me(),zp=ve();function Jp(t){return Bp(t)?Hp(zp(t)):$p(t)}os.exports=Jp});var is=S((Fy,rs)=>{var Kp=Wi(),Yp=Ki(),Qp=Qi(),Zp=q(),Xp=ns();function ef(t){return typeof t=="function"?t:t==null?Qp:typeof t=="object"?Zp(t)?Yp(t[0],t[1]):Kp(t):Xp(t)}rs.exports=ef});var as=S((Ly,ss)=>{function tf(t,y,e,u,g){return g(t,function(c,l,o){e=u?(u=!1,c):y(e,c,l,o)}),e}ss.exports=tf});var us=S((Cy,ls)=>{var of=En(),nf=cr(),rf=is(),sf=as(),af=q();function lf(t,y,e){var u=af(t)?of:sf,g=arguments.length<3;return u(t,rf(y,4),e,g,nf)}ls.exports=lf});var ps=S((Ty,Ee)=>{var uf=Je(),df=vn(),ds=wn(),cs=us(),ft=typeof window!="undefined";function cf(t,y="ERROR"){console.log(`[service/dotenv][${y}] ${t}`)}function gf(t){return t==="True"||t==="true"?!0:t==="False"||t==="false"?!1:t}function oe(t){return Array.isArray(t)?cs(t,(y,e,u)=>(y[u]=oe(e),y),[]):df(t)?cs(t,(y,e,u)=>(y[u]=oe(e),y),{}):ds(t)&&t.split(",").length>1?t.split(","):ds(t)?gf(t):t}function Re(t,y){if(t){let e=uf(t,y,t[y]);return e!==void 0?oe(e):void 0}}var gs=class{constructor(){this.allowedOnClient=[],this.allowedOnEditClient=[],this.getAllForWindow=this.getAllForWindow.bind(this)}getForClient(y,e=void 0){let u=Re(window.env,y),g=Re(window.env,y);return u!==void 0?u:g!==void 0?g:oe(e)}getForServer(y,e=void 0){let u=Re(window.env,y),g=Re(process.env,y);return u!==void 0?u:g!==void 0?g:oe(e)}getAllForClient(){return oe(ce(ce({},window.env),window.env))}getAllForWindow(y){["allowedOnClient","allowedOnEditClient"].forEach(u=>{this[u]&&!Array.isArray(this[u])&&cf(`EnvVars.${u} must be an array of environment variable key strings`)});let e=this.allowedOnClient;return y&&(e=e.concat(this.allowedOnEditClient)),e&&e.reduce((u,g)=>{let c=this.getForServer(g);return u[g]=c,u},{})}getAllForServer(){return oe(ce(ce({},process.env),window.env))}},Y=new gs;function pf(t={}){Y.allowedOnClient=t.allowedOnClient||[],Y.allowedOnEditClient=t.allowedOnEditClient||[]}Ee.exports.configure=pf;Ee.exports.get=ft?Y.getForClient:Y.getForServer;Ee.exports.getAll=ft?Y.getAllForClient:Y.getAllForServer;Ee.exports.getAllForWindow=ft?Y.getForClient:Y.getAllForWindow});var hs=S((fs,ht)=>{(function(t){typeof fs=="object"&&typeof ht!="undefined"?ht.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).Cep=t()})(function(){return function t(y,e,u){function g(o,s){if(!e[o]){if(!y[o]){var a=typeof I=="function"&&I;if(!s&&a)return a(o,!0);if(c)return c(o,!0);throw(s=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",s}a=e[o]={exports:{}},y[o][0].call(a.exports,function(d){return g(y[o][1][d]||d)},a,a.exports,t,y,e,u)}return e[o].exports}for(var c=typeof I=="function"&&I,l=0;l<u.length;l++)g(u[l]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var u,g=t("./Logger"),c=t("./promiseWithTimeout"),l=t("./localization"),t=((t=u=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",t[t.DisableForCanada=32]="DisableForCanada",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(s,a,d,r,n,f,h,m){f===void 0&&(f=u.EnableForDomestic|u.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var i=this;this.config=s,this.MODULE_NAME=a,this.MODULE_VERSION=d,this.MODULE_LOG_TAG=r,this.logStyle=n,this.moduleFlags=f,this.consentTags=h,this.MODULE_VIDEO_API_KEY=m,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((s=window.WM)==null?void 0:s.UserConsent)||((a=window.WBD)==null?void 0:a.UserConsent),this.environmentMatchesFlags=function(){return(0,l.isIntl)()?(!(0,l.isCanada)()||(i.moduleFlags&u.DisableForCanada)!==u.DisableForCanada)&&(i.moduleFlags&u.EnableForForeign)===u.EnableForForeign:(i.moduleFlags&u.EnableForDomestic)===u.EnableForDomestic},this.callInit=function(){i.logger.log("Waiting for UserConsent..."),i.waitForUserConsent().then(function(){var v;i.logger.log("Checking Module Flags...",i.moduleFlags),(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent||(v=i.userConsentLib)!=null&&v.inUserConsentState(i.consentTags,{id:i.MODULE_NAME})?(i.moduleFlags&&u.RunWithoutAdFuel)==u.RunWithoutAdFuel?((v=window.AdFuel)!=null&&v.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var _;i.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var _;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)}))})):(i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)}))):(i.logger.log("Waiting for AdFuel..."),i.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Registering with AdFuel..."),(p=window.AdFuel)!=null&&p.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var p;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;i.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(i.MODULE_LOG_TAG)}))})):i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags)}).catch(function(_){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for AdFuel."),_)})):(i.logger.info("User consent is not granted.",(v=i.userConsentLib)==null?void 0:v.inUserConsentState(i.consentTags)),(v=window.AdFuel)!=null&&v.setModuleLoaded(i.MODULE_LOG_TAG))}).catch(function(v){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for consent."),v)})},this.waitForAdFuel=function(){return(i.moduleFlags&u.RunWithoutAdFuel)===u.RunWithoutAdFuel?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){window.AdFuel?v():document.addEventListener("AdFuelCreated",function(){v()})}))},this.waitForUserConsent=function(){return!i.userConsentLib||(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){var _;i._logger.log("Consent Promise with Timeout..."),(_=i.userConsentLib)!=null&&_.isReady()?(i._logger.log("Consent Is Ready..."),(_=i.userConsentLib)!=null&&_.isInRegion("gdpr")?(i._logger.log("Region is GDPR..."),(_=((_=i.userConsentLib)==null?void 0:_.isOneTrustLoaded())&&!((_=i.userConsentLib)!=null&&_.isOneTrustFailing()))!=null&&_?(i._logger.log("Optanon is Loaded..."),v()):(i._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){i._logger.log("OneTrust is Loaded..."),v()}),document.addEventListener("oneTrustFailed",function(){i._logger.error("OneTrust Failed To Load..."),v()}),document.addEventListener("oneTrustBlocked",function(){i._logger.error("OneTrust Loading Was Blocked..."),v()}))):(i._logger.log("Region is not GDPR..."),v())):i.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),v()})):(console.log("No User Consent..."),v())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(t,y,e){"use strict";function u(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,u.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},u.setCookie=function(g){var c=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(l){c+=" "+l.key+"="+l.value+";"}),g.secure&&(c+=" Secure"),document.cookie=c},u.readCookie=function(g){var c,l,o=!1,s=null;return(o=typeof localStorage!="undefined"?!0:o)&&(s=localStorage.getItem(g)),o&&s!==null||(l=(c=g).length+1,s=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,l)==="".concat(c,"=")}).map(function(a){return decodeURIComponent(a.substring(l))})[0]||null),s},e.CookieHelper=u},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=u=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(c.prototype,"isDebugging",{get:function(){var l;return this._debug===void 0&&(l=this.getUrlParam("debug").split(","),this._debug=l[0]==="true"||0<=l.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),c.prototype.info=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.warn=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.error=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.log=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.groupStart=function(l){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(l," - START -----"),this._normalStyle))},c.prototype.groupEnd=function(l){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},c.prototype.timeStart=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupStart(l),console.time(o)},c.prototype.timeEnd=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupEnd(l),console.timeEnd(o)},c.prototype.getUrlParam=function(l){return typeof document!="undefined"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""};var u,g=c;function c(l,o,s,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=l||"",this._moduleVersion=o||"",this._logKey=s||(l==null?void 0:l.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),u.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function u(g,c,l,o){var s=this;this.setMajorTo=g,this.setMinorTo=c,this.setRevisionTo=l,this.setFamilyTo=o,this.setfamily=function(a){return s.setFamilyTo=a,s},this.toString=function(){return"".concat(s.major,".").concat(s.minor.toString().padStart(2,"0"),".").concat(s.revision.toString().padStart(3,"0")," ").concat(s.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(u.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=u},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(u){return typeof document!="undefined"&&(u=u.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),u=new RegExp("[\\?&]"+u+"=([^&#]*)"),document)&&document.location&&document.location.search&&(u=u.exec(document.location.search))?u[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var u=t("./setHostAndPathNames"),g=t("./getUrlParam"),c=t("./Logger"),l=t("./variables"),o=new c.Logger(l.MODULE_NAME,l.MODULE_VERSION.toString(),l.MODULE_LOG_TAG,"color: coral; padding: 2px"),s=!1,a=!1,d=new Set(["US","CA"]),r=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var n;return(n=(n=(n=window.WM)==null?void 0:n.UserConsent)==null?void 0:n.getGeoCountry())!=null?n:l.countryCode},e.isIntl=function(){var n=!1,f=(0,u.setHostAndPathNames)(),h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoCountry&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry():l.countryCode,m=(m=(m=window.WM)==null?void 0:m.UserConsent)!=null&&m.getGeoState&&typeof((m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState)=="function"?(m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState():"",i=0<=f.search(/^(.*\.)?cnn\.com$/);return i&&d.delete("CA"),o.log("Is CNN:",i),o.log("Domestic Country Codes: ",Array.from(d)),o.log("UserConsent Location: ",{state:m,country:h}),(0,g.getUrlParam)("isIntl")==="true"?(s||(s=!0,o.log("Faking international site. Using International PubIds.")),n=!0):0<=f.search(r)?(s||(s=!0,o.log("Full international site. Using International PubIds.")),n=!0):h===""||h===null?(s||(s=!0,o.log("No country code. Using Domestic PubIds.")),n=!1):d.has(h)?s||(s=!0,o.log("Domestic site or country code. Using Domestic PubIds."),n=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(s||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),s||(s=!0,o.log("International country code. Using International PubIds.")),n=!0):0<=f.search(/^.*us\.cnn\.com/)?(s||(s=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=n=!0):(s||(s=!0,o.log("International country code but domestic site. Using International PubIds if available.")),n=!0),n},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(u,g,c){c===void 0&&(c="The promise timed out.");var l=new Promise(function(o,s){var a=setTimeout(function(){clearTimeout(a),s(c)},u)});return Promise.race([g,l])}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var u=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return u.href=typeof document!="undefined"?document.location.href:"",u.hostname}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var u=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new u.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(u=t.CookieHelper.readCookie("CG"))==null?void 0:u.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(u=t.CookieHelper.readCookie("SelectedEdition"))!=null?u:"www",e.hasUserConsent=typeof window!="undefined"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],10:[function(t,y,e){"use strict";var u,g,c=this&&this.__extends||(u=function(d,r){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(n,f){n.__proto__=f}:function(n,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(n[h]=f[h])}))(d,r)},function(d,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=d}u(d,r),d.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.Cep=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/Version"),s=t("./version.json"),t=(g=l.AAdFuelModule,c(a,g),a.prototype.init=function(){var d=this;return new Promise(function(r){d.logger.log("Initializing the module...",d.site),window.AdFuel?window.AdFuel.setModuleReady(d.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(d.MODULE_LOG_TAG)}),r()})},a.prototype.preQueue=function(d){var r=this;return new Promise(function(n){r.cepTags=window[r.site]&&window[r.site].cep_topics?window[r.site].cep_topics:r.cepTags,n({name:"CEP",tags:r.cepTags})})},a.prototype.preDispatch=function(d){var r=this;return new Promise(function(n){var f;r.targetingSet?n({name:"CEP",tags:r.cepTags}):(f=!(r.targetingSet=!0),Object.keys(r.cepTags).forEach(function(h){0<r.cepTags[h].length&&(r.logger.log("Adding CEP "+h+" Targeting: ",r.cepTags[h]),window.AdFuel?window.AdFuel.addPageLevelTarget(h,r.cepTags[h]):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting(h,r.cepTags[h])}),f=!0,n({name:"CEP",tags:r.cepTags}))}),f||(n({name:"CEP",tags:r.cepTags}),r.logger.log("No CEP targeting... adding CEP=0..."),window.AdFuel?window.AdFuel.addPageLevelTarget("cep","0"):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting("cep","0")})))})},a);function a(d){return d=g.call(this,d,"CEP",new o.Version(s.major,s.minor,s.revision,s.family),"cep","color: #d2b000; padding: 2px",l.ModuleFlags.EnableForDomestic|l.ModuleFlags.EnableForForeign|l.ModuleFlags.RunWithoutConsent)||this,d.cepTags={cep_brsf:[],cep_iabt:[],cep_sent:[],cep_tags:[]},d.site=window.AdFuelOptions.ADFUEL?window.AdFuelOptions.ADFUEL.SITE_OBJECT:"",d.targetingSet=!1,d}new(e.Cep=t)({debug:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:11}},{}]},{},[10])(10)})});var ms=S((ys,yt)=>{(function(t){typeof ys=="object"&&typeof yt!="undefined"?yt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).InViewRefresh=t()})(function(){return function t(y,e,u){function g(o,s){if(!e[o]){if(!y[o]){var a=typeof I=="function"&&I;if(!s&&a)return a(o,!0);if(c)return c(o,!0);throw(s=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",s}a=e[o]={exports:{}},y[o][0].call(a.exports,function(d){return g(y[o][1][d]||d)},a,a.exports,t,y,e,u)}return e[o].exports}for(var c=typeof I=="function"&&I,l=0;l<u.length;l++)g(u[l]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var u,g=t("./Logger"),c=t("./promiseWithTimeout"),l=t("./localization"),t=((t=u=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",t[t.DisableForCanada=32]="DisableForCanada",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(s,a,d,r,n,f,h,m){f===void 0&&(f=u.EnableForDomestic|u.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var i=this;this.config=s,this.MODULE_NAME=a,this.MODULE_VERSION=d,this.MODULE_LOG_TAG=r,this.logStyle=n,this.moduleFlags=f,this.consentTags=h,this.MODULE_VIDEO_API_KEY=m,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((s=window.WM)==null?void 0:s.UserConsent)||((a=window.WBD)==null?void 0:a.UserConsent),this.environmentMatchesFlags=function(){return(0,l.isIntl)()?(!(0,l.isCanada)()||(i.moduleFlags&u.DisableForCanada)!==u.DisableForCanada)&&(i.moduleFlags&u.EnableForForeign)===u.EnableForForeign:(i.moduleFlags&u.EnableForDomestic)===u.EnableForDomestic},this.callInit=function(){i.logger.log("Waiting for UserConsent..."),i.waitForUserConsent().then(function(){var v;i.logger.log("Checking Module Flags...",i.moduleFlags),(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent||(v=i.userConsentLib)!=null&&v.inUserConsentState(i.consentTags,{id:i.MODULE_NAME})?(i.moduleFlags&&u.RunWithoutAdFuel)==u.RunWithoutAdFuel?((v=window.AdFuel)!=null&&v.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var _;i.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var _;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)}))})):(i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)}))):(i.logger.log("Waiting for AdFuel..."),i.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Registering with AdFuel..."),(p=window.AdFuel)!=null&&p.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var p;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;i.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(i.MODULE_LOG_TAG)}))})):i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags)}).catch(function(_){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for AdFuel."),_)})):(i.logger.info("User consent is not granted.",(v=i.userConsentLib)==null?void 0:v.inUserConsentState(i.consentTags)),(v=window.AdFuel)!=null&&v.setModuleLoaded(i.MODULE_LOG_TAG))}).catch(function(v){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for consent."),v)})},this.waitForAdFuel=function(){return(i.moduleFlags&u.RunWithoutAdFuel)===u.RunWithoutAdFuel?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){window.AdFuel?v():document.addEventListener("AdFuelCreated",function(){v()})}))},this.waitForUserConsent=function(){return!i.userConsentLib||(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){var _;i._logger.log("Consent Promise with Timeout..."),(_=i.userConsentLib)!=null&&_.isReady()?(i._logger.log("Consent Is Ready..."),(_=i.userConsentLib)!=null&&_.isInRegion("gdpr")?(i._logger.log("Region is GDPR..."),(_=((_=i.userConsentLib)==null?void 0:_.isOneTrustLoaded())&&!((_=i.userConsentLib)!=null&&_.isOneTrustFailing()))!=null&&_?(i._logger.log("Optanon is Loaded..."),v()):(i._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){i._logger.log("OneTrust is Loaded..."),v()}),document.addEventListener("oneTrustFailed",function(){i._logger.error("OneTrust Failed To Load..."),v()}),document.addEventListener("oneTrustBlocked",function(){i._logger.error("OneTrust Loading Was Blocked..."),v()}))):(i._logger.log("Region is not GDPR..."),v())):i.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),v()})):(console.log("No User Consent..."),v())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(t,y,e){"use strict";function u(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,u.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},u.setCookie=function(g){var c=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(l){c+=" "+l.key+"="+l.value+";"}),g.secure&&(c+=" Secure"),document.cookie=c},u.readCookie=function(g){var c,l,o=!1,s=null;return(o=typeof localStorage!="undefined"?!0:o)&&(s=localStorage.getItem(g)),o&&s!==null||(l=(c=g).length+1,s=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,l)==="".concat(c,"=")}).map(function(a){return decodeURIComponent(a.substring(l))})[0]||null),s},e.CookieHelper=u},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=u=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(c.prototype,"isDebugging",{get:function(){var l;return this._debug===void 0&&(l=this.getUrlParam("debug").split(","),this._debug=l[0]==="true"||0<=l.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),c.prototype.info=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.warn=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.error=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.log=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.groupStart=function(l){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(l," - START -----"),this._normalStyle))},c.prototype.groupEnd=function(l){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},c.prototype.timeStart=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupStart(l),console.time(o)},c.prototype.timeEnd=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupEnd(l),console.timeEnd(o)},c.prototype.getUrlParam=function(l){return typeof document!="undefined"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""};var u,g=c;function c(l,o,s,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=l||"",this._moduleVersion=o||"",this._logKey=s||(l==null?void 0:l.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),u.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function u(g,c,l,o){var s=this;this.setMajorTo=g,this.setMinorTo=c,this.setRevisionTo=l,this.setFamilyTo=o,this.setfamily=function(a){return s.setFamilyTo=a,s},this.toString=function(){return"".concat(s.major,".").concat(s.minor.toString().padStart(2,"0"),".").concat(s.revision.toString().padStart(3,"0")," ").concat(s.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(u.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=u},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(u){return typeof document!="undefined"&&(u=u.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),u=new RegExp("[\\?&]"+u+"=([^&#]*)"),document)&&document.location&&document.location.search&&(u=u.exec(document.location.search))?u[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var u=t("./setHostAndPathNames"),g=t("./getUrlParam"),c=t("./Logger"),l=t("./variables"),o=new c.Logger(l.MODULE_NAME,l.MODULE_VERSION.toString(),l.MODULE_LOG_TAG,"color: coral; padding: 2px"),s=!1,a=!1,d=new Set(["US","CA"]),r=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var n;return(n=(n=(n=window.WM)==null?void 0:n.UserConsent)==null?void 0:n.getGeoCountry())!=null?n:l.countryCode},e.isIntl=function(){var n=!1,f=(0,u.setHostAndPathNames)(),h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoCountry&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry():l.countryCode,m=(m=(m=window.WM)==null?void 0:m.UserConsent)!=null&&m.getGeoState&&typeof((m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState)=="function"?(m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState():"",i=0<=f.search(/^(.*\.)?cnn\.com$/);return i&&d.delete("CA"),o.log("Is CNN:",i),o.log("Domestic Country Codes: ",Array.from(d)),o.log("UserConsent Location: ",{state:m,country:h}),(0,g.getUrlParam)("isIntl")==="true"?(s||(s=!0,o.log("Faking international site. Using International PubIds.")),n=!0):0<=f.search(r)?(s||(s=!0,o.log("Full international site. Using International PubIds.")),n=!0):h===""||h===null?(s||(s=!0,o.log("No country code. Using Domestic PubIds.")),n=!1):d.has(h)?s||(s=!0,o.log("Domestic site or country code. Using Domestic PubIds."),n=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(s||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),s||(s=!0,o.log("International country code. Using International PubIds.")),n=!0):0<=f.search(/^.*us\.cnn\.com/)?(s||(s=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=n=!0):(s||(s=!0,o.log("International country code but domestic site. Using International PubIds if available.")),n=!0),n},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(u,g,c){c===void 0&&(c="The promise timed out.");var l=new Promise(function(o,s){var a=setTimeout(function(){clearTimeout(a),s(c)},u)});return Promise.race([g,l])}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var u=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return u.href=typeof document!="undefined"?document.location.href:"",u.hostname}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var u=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new u.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(u=t.CookieHelper.readCookie("CG"))==null?void 0:u.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(u=t.CookieHelper.readCookie("SelectedEdition"))!=null?u:"www",e.hasUserConsent=typeof window!="undefined"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],10:[function(t,y,e){"use strict";var u,g,c=this&&this.__extends||(u=function(d,r){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(n,f){n.__proto__=f}:function(n,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(n[h]=f[h])}))(d,r)},function(d,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=d}u(d,r),d.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.InViewRefresh=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/Version"),s=t("./version.json"),t=(g=l.AAdFuelModule,c(a,g),a);function a(d){var r=g.call(this,d,"In-View Refresh Module",new o.Version(s.major,s.minor,s.revision,s.family),"ivr","color: #00e1e1; padding: 2px",l.ModuleFlags.EnableForDomestic|l.ModuleFlags.EnableForForeign|l.ModuleFlags.RunWithoutConsent)||this;return r.DISALLOWED_RENDERED_SIZES=["970x66","970x90","970x250"],r.TARGET_DISPLAY_MILLISECONDS=r.config.DEFAULT_DISPLAY_MILLISECONDS,r.TARGET_DISPLAY_PERCENT=r.config.DEFAULT_DISPLAY_PERCENT,r._focused=!0,r._registeredSlots=[],r._renderedCreativeIds={},r._renderedLineItemIds={},r._invalidSlotIds=[],r._viewabilityListenersStarted=!1,r._refreshableInViewSlots={},r.init=function(){return new Promise(function(n,f){r.logger.log("Initializing IVR..."),window.AdFuel?window.AdFuel.setModuleReady(r.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(r.MODULE_LOG_TAG)}),n()})},r.start=function(){return new Promise(function(){r.startViewabilityListeners()})},r.startViewabilityListeners=function(){r._viewabilityListenersStarted||(window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("impressionViewable",function(n){r.logger.log("impressionViewable changed"),r.logger.log("impressionViewable changed");var f=n,n=(n=n.slot)==null?void 0:n.getSlotElementId();r.logger.log("Refreshable In View Slots: ",r._refreshableInViewSlots),r._refreshableInViewSlots[n]!==void 0&&r._refreshableInViewSlots[n].listenersSet?r.logger.log("Refreshable In View Slot listeners have already been set for: ",n,{object:r._refreshableInViewSlots[n]}):(r.logger.log("Refreshable In View Slot listeners have not been set: ",n,{object:r._refreshableInViewSlots[n]}),r.createInViewRefreshObject(f))}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(n){r.logger.log("slotVisibilityChanged"),r.logger.log("slotVisibilityChanged"),r.visibilityChanged(n)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(n){r.logger.log("slotRenderEnded"),r.logger.log("slotRenderEnded");var f=n,h=f.slot.getSlotElementId(),f=(f.size?Array.isArray(f.size)&&(f.size=f.size.join("x")):f.size="0x0",f.size),m=(m=n.creativeId||n.sourceAgnosticCreativeId)!=null?m:0,i=(i=n.lineItemId||n.sourceAgnosticLineItemId)!=null?i:0,v=r._renderedCreativeIds[h]||[],_=r._renderedLineItemIds[h]||[];r.logger.log("----------Slot: ["+h+"]----------"),r.logger.log("Rendered Size: ",f),r.logger.log("Creative Ids: ",{selected:m,native:n.creativeId,agnostic:n.sourceAgnosticCreativeId}),0<=v.indexOf(m)?(delete r._refreshableInViewSlots[h],r._registeredSlots.splice(r._registeredSlots.indexOf(h),1),r._invalidSlotIds.push(h),r.logger.log("Duplicate Creative ["+m+"] returned for slot ["+h+"].  Stopping refresh.",r._registeredSlots)):0<=r.DISALLOWED_RENDERED_SIZES.indexOf(f)?(delete r._refreshableInViewSlots[h],r._registeredSlots.splice(r._registeredSlots.indexOf(h),1),r._invalidSlotIds.push(h),r.logger.log("Rendered size ["+f+"] for slot ["+h+"] is invalid for IVR.  Stopping refresh.",r._registeredSlots)):(m&&v.indexOf(m)<0&&v.push(m),i&&_.indexOf(i)<0&&_.push(i),r._renderedCreativeIds[h]=v,r._renderedLineItemIds[h]=_,r.logger.log("Rendered Creatives: ",r._renderedCreativeIds[h]),r.logger.log("Rendered LineItems: ",r._renderedLineItemIds[h]))})}),document.addEventListener("visibilitychange",r.visibilityChangeEvent),r._viewabilityListenersStarted=!0,r.logger.log("Listeners Started!"))},r.visibilityChangeEvent=function(n){r.logger.log("Visibility Change Event: ",n),r.logger.log("Relaying to _focusChanged..."),r._focused=!document.hidden,r.focusChanged(n)},r.focusChanged=function(n){r.logger.log("Focus Change Event: ",n),document.hidden?(r.logger.log("Page is hidden.  Destroying all intervals..."),r.destroyInterval()):(r.logger.log("Page is not hidden. Checking Intervals..."),Object.keys(r._refreshableInViewSlots).forEach(function(f){r.logger.log("",{index:f,slot:r._refreshableInViewSlots[f]}),r.getInterval(f)?r.logger.log("Interval exists...",f):(r.logger.log("Creating Interval...",f),r.detectInView())}))},r.visibilityChanged=function(n){var f=n.inViewPercentage||0,n=n.slot.getSlotElementId(),h=r.getInterval(n);f>=r.TARGET_DISPLAY_PERCENT?(r.logger.log("Element ["+n+"] Meets In-View Percentage Requirements",f),r._focused?(r.logger.log("... and page has focus"),h||(r.logger.log("... interval does not exist. Creating Interval..."),r.createInterval(n))):r.logger.log("... but page does not have focus.  Not creating interval.")):(r.logger.log("Element ["+n+"] Does NOT Meet In-View Percentage Requirements",f),h&&(r.logger.log("Found Interval for Element ["+n+"]... Destroying Interval."),r.destroyInterval(n)))},r.getInterval=function(n){return r.logger.log("Getting Interval for: ",n),!(r._refreshableInViewSlots[n]&&r._refreshableInViewSlots[n].timer===null||!r._refreshableInViewSlots[n])&&r._refreshableInViewSlots[n].timer},r.createInterval=function(n){var f,h;r.logger.log("Refreshable In-View Slots: ",r._refreshableInViewSlots),r._refreshableInViewSlots[n]&&(h=typeof(f=r._refreshableInViewSlots[n]).inViewRefreshInterval=="string"?1e3*parseInt(f.inViewRefreshInterval,10):typeof f.inViewRefreshInterval=="number"?1e3*f.inViewRefreshInterval:r.TARGET_DISPLAY_MILLISECONDS,r.logger.log("Slot ".concat(n," interval: ").concat(h)),f.inViewRefreshCounter=r._refreshableInViewSlots[n].inViewRefreshCounter||0,r.logger.log("Creating Interval for: ",n),f.timer=window.setInterval(function(){var m,i,v;r.logger.log("Slot: ",f),f!=null?(typeof f.inViewRefreshCount=="string"&&(f.inViewRefreshCount=parseInt(f.inViewRefreshCount)),0<f.inViewRefreshCount?(f.el=f.el||document.getElementById(n),m=(i=(i=f.el)==null?void 0:i.id)!=null?i:"",f.inViewRefreshCount--,f.inViewRefreshCounter++,0<=f.inViewRefreshCount&&(i=window.googletag.pubads().getSlots().filter(function(_){return _.getSlotElementId()===m})[0],r.logger.log("GoogleSlot: ",i),r.logger.log("Slot ["+m+"] is in view and is being refreshed."),r.logger.log("Starting Targeting Keys: ",i.getTargetingKeys()),r.logger.log("Clearing targeting on slot ["+m+"]...",f),v=i.getTargeting("pos"),i.clearTargeting(),v&&i.setTargeting("pos",v),r.logger.log("Cleared Targeting Keys: ",i.getTargetingKeys()),r.logger.log("Setting rfv count targeting on slot ["+m+"]: ",f.inViewRefreshCounter),i.setTargeting("rfv",f.inViewRefreshCounter.toString()),r._invalidSlotIds.indexOf(m)<0?(r.logger.log("Calling refresh On slot["+m+"]...",f),(v=window.AdFuel)!=null&&v.refresh([m]),r.logger.log("Slot ["+f.el.id+"] is in view, was just refreshed, and still has "+f.inViewRefreshCount+" refreshes remaining.")):r.logger.log("Slot ["+f.el.id+"] is invalid for refresh."))):r.logger.log("Slot ["+n+"] is in view but has no refreshes remaining.",f,f.inViewRefreshCount)):r.logger.log("Slot refresh prevented due to rendered size.")},h),r.logger.log("Done."))},r.destroyInterval=function(n){var f;n?(r.logger.log("Destroying interval for: ",n),f=r._refreshableInViewSlots[n],window.clearInterval((n=f.timer)!=null?n:0),f.timer=null,f.inView=!1):(r.logger.log("Destroying All Intervals"),Object.keys(r._refreshableInViewSlots).forEach(function(h){r.logger.log("Destroying interval for: ",h),f=r._refreshableInViewSlots[h],window.clearInterval((h=f.timer)!=null?h:0),f.timer=null,f.inView=!1}))},r.createInViewRefreshObject=function(n){r.logger.log("Checking Element: ",{event:n});var n=(n=n.slot)==null?void 0:n.getSlotElementId(),f=document.getElementById(n);r._registeredSlots.indexOf(n)!==-1&&r._refreshableInViewSlots[n]?(r.logger.log("Slot is registered with InView Refresh"),r._refreshableInViewSlots[n].inView=!1,r._refreshableInViewSlots[n].el=f,r._refreshableInViewSlots[n].refreshCount=0,r._refreshableInViewSlots[n].listenersSet=!0):r.logger.log("registered with InView Refresh")},r.isInsideBounds=function(n,f,h,m,i,v,_,p){var b=Math.max(h,_),E=Math.min(m,p),A=Math.max(n,i),L=Math.min(f,v),C=0,h=(h<=b&&b<=m&&h<=E&&E<=m&&n<=A&&A<=f&&n<=L&&L<=f&&(C=(E-b)*(L-A)),(v-i)*(p-_));return 0<h?C/h:0},r.getPercentInView=function(n){var f=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,m=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,i=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,v=n.getBoundingClientRect(),_=v.left+document.body.scrollLeft,v=v.top+document.body.scrollTop,p=_+n.clientWidth,n=v+n.clientHeight;return 100*r.isInsideBounds(m,m+f,i,i+h,_,p,v,n)},r.detectInView=function(){r.logger.log("Detecting In View Slots."),Object.keys(r._refreshableInViewSlots).length<1&&r.logger.log("No registered slots have been rendered yet."),Object.keys(r._refreshableInViewSlots).forEach(function(n){var f=r._refreshableInViewSlots[n].el||document.getElementById(n),h=!1,f=(f&&(h=f&&r._focused&&r.getPercentInView(f)>=r.TARGET_DISPLAY_PERCENT&&0<r._refreshableInViewSlots[n].inViewRefreshCount),r.getInterval(n));h&&!f&&r.createInterval(n)})},r.preQueue=function(n){return new Promise(function(f){for(var h=!1,m=0;m<n.length;m++){var i=n[m].unWrappedSlot;i.hasInViewRefresh===!0&&(r.logger.log("Slot has In-View Refresh..."),h=!(i.inViewRefreshCounter=0),r._registeredSlots.push(i.rktr_slot_id))}h&&(r.logger.log("Starting IVR Listeners..."),r.startViewabilityListeners()),f({name:"IVR"})})},r.preDispatch=function(n){return new Promise(function(f){for(var h=0;h<n.length;h++){var m=n[h].unWrappedSlot;m.hasInViewRefresh?(r.logger.log("Slot is configured for in view refresh.  Creating refresh object for slot ["+m.rktr_slot_id+"]"),r._refreshableInViewSlots[m.rktr_slot_id]=m):r.logger.log("Slot is not configured for in view refresh. ["+m.rktr_slot_id+"]")}f({name:"IVR"})})},r.logger.log("InViewRefresh created..."),r}new(e.InViewRefresh=t)(window.IVR||((c=window.AdFuelOptions)==null?void 0:c.IVR)||{DEFAULT_DISPLAY_MILLISECONDS:3e3,DEFAULT_DISPLAY_PERCENT:50,DEBUG:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:12}},{}]},{},[10])(10)})});var _s=S((vs,mt)=>{(function(t){typeof vs=="object"&&typeof mt!="undefined"?mt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).MalvertisingDetection=t()})(function(){return function t(y,e,u){function g(o,s){if(!e[o]){if(!y[o]){var a=typeof I=="function"&&I;if(!s&&a)return a(o,!0);if(c)return c(o,!0);throw(s=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",s}a=e[o]={exports:{}},y[o][0].call(a.exports,function(d){return g(y[o][1][d]||d)},a,a.exports,t,y,e,u)}return e[o].exports}for(var c=typeof I=="function"&&I,l=0;l<u.length;l++)g(u[l]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var u,g=t("./Logger"),c=t("./promiseWithTimeout"),l=t("./localization"),t=((t=u=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",t[t.DisableForCanada=32]="DisableForCanada",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(s,a,d,r,n,f,h,m){f===void 0&&(f=u.EnableForDomestic|u.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var i=this;this.config=s,this.MODULE_NAME=a,this.MODULE_VERSION=d,this.MODULE_LOG_TAG=r,this.logStyle=n,this.moduleFlags=f,this.consentTags=h,this.MODULE_VIDEO_API_KEY=m,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((s=window.WM)==null?void 0:s.UserConsent)||((a=window.WBD)==null?void 0:a.UserConsent),this.environmentMatchesFlags=function(){return(0,l.isIntl)()?(!(0,l.isCanada)()||(i.moduleFlags&u.DisableForCanada)!==u.DisableForCanada)&&(i.moduleFlags&u.EnableForForeign)===u.EnableForForeign:(i.moduleFlags&u.EnableForDomestic)===u.EnableForDomestic},this.callInit=function(){i.logger.log("Waiting for UserConsent..."),i.waitForUserConsent().then(function(){var v;i.logger.log("Checking Module Flags...",i.moduleFlags),(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent||(v=i.userConsentLib)!=null&&v.inUserConsentState(i.consentTags,{id:i.MODULE_NAME})?(i.moduleFlags&&u.RunWithoutAdFuel)==u.RunWithoutAdFuel?((v=window.AdFuel)!=null&&v.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var _;i.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var _;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)}))})):(i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)}))):(i.logger.log("Waiting for AdFuel..."),i.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Registering with AdFuel..."),(p=window.AdFuel)!=null&&p.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var p;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;i.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(i.MODULE_LOG_TAG)}))})):i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags)}).catch(function(_){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for AdFuel."),_)})):(i.logger.info("User consent is not granted.",(v=i.userConsentLib)==null?void 0:v.inUserConsentState(i.consentTags)),(v=window.AdFuel)!=null&&v.setModuleLoaded(i.MODULE_LOG_TAG))}).catch(function(v){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for consent."),v)})},this.waitForAdFuel=function(){return(i.moduleFlags&u.RunWithoutAdFuel)===u.RunWithoutAdFuel?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){window.AdFuel?v():document.addEventListener("AdFuelCreated",function(){v()})}))},this.waitForUserConsent=function(){return!i.userConsentLib||(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){var _;i._logger.log("Consent Promise with Timeout..."),(_=i.userConsentLib)!=null&&_.isReady()?(i._logger.log("Consent Is Ready..."),(_=i.userConsentLib)!=null&&_.isInRegion("gdpr")?(i._logger.log("Region is GDPR..."),(_=((_=i.userConsentLib)==null?void 0:_.isOneTrustLoaded())&&!((_=i.userConsentLib)!=null&&_.isOneTrustFailing()))!=null&&_?(i._logger.log("Optanon is Loaded..."),v()):(i._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){i._logger.log("OneTrust is Loaded..."),v()}),document.addEventListener("oneTrustFailed",function(){i._logger.error("OneTrust Failed To Load..."),v()}),document.addEventListener("oneTrustBlocked",function(){i._logger.error("OneTrust Loading Was Blocked..."),v()}))):(i._logger.log("Region is not GDPR..."),v())):i.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),v()})):(console.log("No User Consent..."),v())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(t,y,e){"use strict";function u(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,u.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},u.setCookie=function(g){var c=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(l){c+=" "+l.key+"="+l.value+";"}),g.secure&&(c+=" Secure"),document.cookie=c},u.readCookie=function(g){var c,l,o=!1,s=null;return(o=typeof localStorage!="undefined"?!0:o)&&(s=localStorage.getItem(g)),o&&s!==null||(l=(c=g).length+1,s=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,l)==="".concat(c,"=")}).map(function(a){return decodeURIComponent(a.substring(l))})[0]||null),s},e.CookieHelper=u},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=u=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(c.prototype,"isDebugging",{get:function(){var l;return this._debug===void 0&&(l=this.getUrlParam("debug").split(","),this._debug=l[0]==="true"||0<=l.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),c.prototype.info=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.warn=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.error=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.log=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.groupStart=function(l){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(l," - START -----"),this._normalStyle))},c.prototype.groupEnd=function(l){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},c.prototype.timeStart=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupStart(l),console.time(o)},c.prototype.timeEnd=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupEnd(l),console.timeEnd(o)},c.prototype.getUrlParam=function(l){return typeof document!="undefined"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""};var u,g=c;function c(l,o,s,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=l||"",this._moduleVersion=o||"",this._logKey=s||(l==null?void 0:l.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),u.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function u(g,c,l,o){var s=this;this.setMajorTo=g,this.setMinorTo=c,this.setRevisionTo=l,this.setFamilyTo=o,this.setfamily=function(a){return s.setFamilyTo=a,s},this.toString=function(){return"".concat(s.major,".").concat(s.minor.toString().padStart(2,"0"),".").concat(s.revision.toString().padStart(3,"0")," ").concat(s.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(u.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=u},{}],5:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(u){return typeof document!="undefined"&&(u=u.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),u=new RegExp("[\\?&]"+u+"=([^&#]*)"),document)&&document.location&&document.location.search&&(u=u.exec(document.location.search))?u[1]:""}},{}],6:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var u=t("./promiseWithTimeout");e.loadScriptFromUrl=function(g,c,l,o){return l===void 0&&(l=document),o===void 0&&(o=!0),(0,u.promiseWithTimeout)(5e3,new Promise(function(s,a){var d,r,n=l.createElement("script");if(n.setAttribute("data-nscript","beforeInteractive"),document.getElementById(c))a("Element name ".concat(c," already exists in the document."));else try{var f="",h=(f=1<g.split("//").length?g:((r=((d=l.location)==null?void 0:d.protocol)==="https:")!==null&&r?"https://":"http://").concat(g),l.getElementsByTagName("script")[0]);if(n.id=c,n.type="text/javascript",n.src=f,n.async=o,n.addEventListener("load",function(){s(n)}),h==null||!h.parentNode)throw new Error("Could not insert script.");h.parentNode.insertBefore(n,h)}catch(m){console.log("Error in loading script from ".concat(n.src),m),a(m)}}))}},{"./promiseWithTimeout":8}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var u=t("./setHostAndPathNames"),g=t("./getUrlParam"),c=t("./Logger"),l=t("./variables"),o=new c.Logger(l.MODULE_NAME,l.MODULE_VERSION.toString(),l.MODULE_LOG_TAG,"color: coral; padding: 2px"),s=!1,a=!1,d=new Set(["US","CA"]),r=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var n;return(n=(n=(n=window.WM)==null?void 0:n.UserConsent)==null?void 0:n.getGeoCountry())!=null?n:l.countryCode},e.isIntl=function(){var n=!1,f=(0,u.setHostAndPathNames)(),h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoCountry&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry():l.countryCode,m=(m=(m=window.WM)==null?void 0:m.UserConsent)!=null&&m.getGeoState&&typeof((m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState)=="function"?(m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState():"",i=0<=f.search(/^(.*\.)?cnn\.com$/);return i&&d.delete("CA"),o.log("Is CNN:",i),o.log("Domestic Country Codes: ",Array.from(d)),o.log("UserConsent Location: ",{state:m,country:h}),(0,g.getUrlParam)("isIntl")==="true"?(s||(s=!0,o.log("Faking international site. Using International PubIds.")),n=!0):0<=f.search(r)?(s||(s=!0,o.log("Full international site. Using International PubIds.")),n=!0):h===""||h===null?(s||(s=!0,o.log("No country code. Using Domestic PubIds.")),n=!1):d.has(h)?s||(s=!0,o.log("Domestic site or country code. Using Domestic PubIds."),n=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(s||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),s||(s=!0,o.log("International country code. Using International PubIds.")),n=!0):0<=f.search(/^.*us\.cnn\.com/)?(s||(s=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=n=!0):(s||(s=!0,o.log("International country code but domestic site. Using International PubIds if available.")),n=!0),n},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(u,g,c){c===void 0&&(c="The promise timed out.");var l=new Promise(function(o,s){var a=setTimeout(function(){clearTimeout(a),s(c)},u)});return Promise.race([g,l])}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var u=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return u.href=typeof document!="undefined"?document.location.href:"",u.hostname}},{}],10:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var u=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new u.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(u=t.CookieHelper.readCookie("CG"))==null?void 0:u.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(u=t.CookieHelper.readCookie("SelectedEdition"))!=null?u:"www",e.hasUserConsent=typeof window!="undefined"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],11:[function(t,y,e){"use strict";var u,g,c=this&&this.__extends||(u=function(r,n){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(f,h){f.__proto__=h}:function(f,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(f[m]=h[m])}))(r,n)},function(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function f(){this.constructor=r}u(r,n),r.prototype=n===null?Object.create(n):(f.prototype=n.prototype,new f)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.MalvertisingDetection=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),s=t("@turnercode/digital-ads-utilities/dist/Version"),a=t("./version.json"),t=(g=l.AAdFuelModule,c(d,g),d.prototype.init=function(){var r=this;return new Promise(function(n,f){r.config.SCRIPT_SRC==""?f("SCRIPT_SRC is not set."):((0,o.loadScriptFromUrl)("".concat(r.config.SCRIPT_SRC),"maldetect").finally(function(){r.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(r.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(r.MODULE_LOG_TAG)})}).catch(function(h){r.logger.error("There was an error loading MalvertisingDetection:",h)}),n())})},d);function d(r){return r=g.call(this,r,"Malvertising Detection",new s.Version(a.major,a.minor,a.revision,a.family),"maldetect","color: #58f53f; padding: 2px",l.ModuleFlags.RunWithoutAdFuel|l.ModuleFlags.EnableForDomestic|l.ModuleFlags.EnableForForeign)||this,r.logger.log("Malvertising Detection constructed..."),r}new(e.MalvertisingDetection=t)(((c=window.AdFuelOptions)==null?void 0:c.MALVERTISING)||{SCRIPT_SRC:""})},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:11}},{}]},{},[11])(11)})});var bs=S((ws,vt)=>{(function(t){typeof ws=="object"&&typeof vt!="undefined"?vt.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).Blockthrough=t()})(function(){return function t(y,e,u){function g(o,s){if(!e[o]){if(!y[o]){var a=typeof I=="function"&&I;if(!s&&a)return a(o,!0);if(c)return c(o,!0);throw(s=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",s}a=e[o]={exports:{}},y[o][0].call(a.exports,function(d){return g(y[o][1][d]||d)},a,a.exports,t,y,e,u)}return e[o].exports}for(var c=typeof I=="function"&&I,l=0;l<u.length;l++)g(u[l]);return g}({1:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var u,g=t("./Logger"),c=t("./promiseWithTimeout"),l=t("./localization"),t=((t=u=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",t[t.DisableForCanada=32]="DisableForCanada",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(s,a,d,r,n,f,h,m){f===void 0&&(f=u.EnableForDomestic|u.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var i=this;this.config=s,this.MODULE_NAME=a,this.MODULE_VERSION=d,this.MODULE_LOG_TAG=r,this.logStyle=n,this.moduleFlags=f,this.consentTags=h,this.MODULE_VIDEO_API_KEY=m,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((s=window.WM)==null?void 0:s.UserConsent)||((a=window.WBD)==null?void 0:a.UserConsent),this.environmentMatchesFlags=function(){return(0,l.isIntl)()?(!(0,l.isCanada)()||(i.moduleFlags&u.DisableForCanada)!==u.DisableForCanada)&&(i.moduleFlags&u.EnableForForeign)===u.EnableForForeign:(i.moduleFlags&u.EnableForDomestic)===u.EnableForDomestic},this.callInit=function(){i.logger.log("Waiting for UserConsent..."),i.waitForUserConsent().then(function(){var v;i.logger.log("Checking Module Flags...",i.moduleFlags),(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent||(v=i.userConsentLib)!=null&&v.inUserConsentState(i.consentTags,{id:i.MODULE_NAME})?(i.moduleFlags&&u.RunWithoutAdFuel)==u.RunWithoutAdFuel?((v=window.AdFuel)!=null&&v.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var _;i.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var _;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)}))})):(i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(i.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(i.MODULE_LOG_TAG)}))):(i.logger.log("Waiting for AdFuel..."),i.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Registering with AdFuel..."),(p=window.AdFuel)!=null&&p.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var p;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;i.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(i.MODULE_LOG_TAG)}))})):i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags)}).catch(function(_){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for AdFuel."),_)})):(i.logger.info("User consent is not granted.",(v=i.userConsentLib)==null?void 0:v.inUserConsentState(i.consentTags)),(v=window.AdFuel)!=null&&v.setModuleLoaded(i.MODULE_LOG_TAG))}).catch(function(v){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for consent."),v)})},this.waitForAdFuel=function(){return(i.moduleFlags&u.RunWithoutAdFuel)===u.RunWithoutAdFuel?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){window.AdFuel?v():document.addEventListener("AdFuelCreated",function(){v()})}))},this.waitForUserConsent=function(){return!i.userConsentLib||(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){var _;i._logger.log("Consent Promise with Timeout..."),(_=i.userConsentLib)!=null&&_.isReady()?(i._logger.log("Consent Is Ready..."),(_=i.userConsentLib)!=null&&_.isInRegion("gdpr")?(i._logger.log("Region is GDPR..."),(_=((_=i.userConsentLib)==null?void 0:_.isOneTrustLoaded())&&!((_=i.userConsentLib)!=null&&_.isOneTrustFailing()))!=null&&_?(i._logger.log("Optanon is Loaded..."),v()):(i._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){i._logger.log("OneTrust is Loaded..."),v()}),document.addEventListener("oneTrustFailed",function(){i._logger.error("OneTrust Failed To Load..."),v()}),document.addEventListener("oneTrustBlocked",function(){i._logger.error("OneTrust Loading Was Blocked..."),v()}))):(i._logger.log("Region is not GDPR..."),v())):i.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),v()})):(console.log("No User Consent..."),v())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(t,y,e){function u(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,u.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},u.setCookie=function(g){var c=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(l){c+=" "+l.key+"="+l.value+";"}),g.secure&&(c+=" Secure"),document.cookie=c},u.readCookie=function(g){var c,l,o=!1,s=null;return(o=typeof localStorage!="undefined"?!0:o)&&(s=localStorage.getItem(g)),o&&s!==null||(l=(c=g).length+1,s=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,l)==="".concat(c,"=")}).map(function(a){return decodeURIComponent(a.substring(l))})[0]||null),s},e.CookieHelper=u},{}],3:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=u=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(c.prototype,"isDebugging",{get:function(){var l;return this._debug===void 0&&(l=this.getUrlParam("debug").split(","),this._debug=l[0]==="true"||0<=l.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),c.prototype.info=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.warn=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.error=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.log=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.groupStart=function(l){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(l," - START -----"),this._normalStyle))},c.prototype.groupEnd=function(l){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},c.prototype.timeStart=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupStart(l),console.time(o)},c.prototype.timeEnd=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupEnd(l),console.timeEnd(o)},c.prototype.getUrlParam=function(l){return typeof document!="undefined"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""};var u,g=c;function c(l,o,s,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=l||"",this._moduleVersion=o||"",this._logKey=s||(l==null?void 0:l.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),u.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){function u(g,c,l,o){var s=this;this.setMajorTo=g,this.setMinorTo=c,this.setRevisionTo=l,this.setFamilyTo=o,this.setfamily=function(a){return s.setFamilyTo=a,s},this.toString=function(){return"".concat(s.major,".").concat(s.minor.toString().padStart(2,"0"),".").concat(s.revision.toString().padStart(3,"0")," ").concat(s.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(u.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=u},{}],5:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(u){return typeof document!="undefined"&&(u=u.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),u=new RegExp("[\\?&]"+u+"=([^&#]*)"),document)&&document.location&&document.location.search&&(u=u.exec(document.location.search))?u[1]:""}},{}],6:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var u=t("./promiseWithTimeout");e.loadScriptFromUrl=function(g,c,l,o){return l===void 0&&(l=document),o===void 0&&(o=!0),(0,u.promiseWithTimeout)(5e3,new Promise(function(s,a){var d,r,n=l.createElement("script");if(n.setAttribute("data-nscript","beforeInteractive"),document.getElementById(c))a("Element name ".concat(c," already exists in the document."));else try{var f="",h=(f=1<g.split("//").length?g:((r=((d=l.location)==null?void 0:d.protocol)==="https:")!==null&&r?"https://":"http://").concat(g),l.getElementsByTagName("script")[0]);if(n.id=c,n.type="text/javascript",n.src=f,n.async=o,n.addEventListener("load",function(){s(n)}),h==null||!h.parentNode)throw new Error("Could not insert script.");h.parentNode.insertBefore(n,h)}catch(m){console.log("Error in loading script from ".concat(n.src),m),a(m)}}))}},{"./promiseWithTimeout":8}],7:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var u=t("./setHostAndPathNames"),g=t("./getUrlParam"),c=t("./Logger"),l=t("./variables"),o=new c.Logger(l.MODULE_NAME,l.MODULE_VERSION.toString(),l.MODULE_LOG_TAG,"color: coral; padding: 2px"),s=!1,a=!1,d=new Set(["US","CA"]),r=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var n;return(n=(n=(n=window.WM)==null?void 0:n.UserConsent)==null?void 0:n.getGeoCountry())!=null?n:l.countryCode},e.isIntl=function(){var n=!1,f=(0,u.setHostAndPathNames)(),h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoCountry&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoCountry():l.countryCode,m=(m=(m=window.WM)==null?void 0:m.UserConsent)!=null&&m.getGeoState&&typeof((m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState)=="function"?(m=(m=window.WM)==null?void 0:m.UserConsent)==null?void 0:m.getGeoState():"",i=0<=f.search(/^(.*\.)?cnn\.com$/);return i&&d.delete("CA"),o.log("Is CNN:",i),o.log("Domestic Country Codes: ",Array.from(d)),o.log("UserConsent Location: ",{state:m,country:h}),(0,g.getUrlParam)("isIntl")==="true"?(s||(s=!0,o.log("Faking international site. Using International PubIds.")),n=!0):0<=f.search(r)?(s||(s=!0,o.log("Full international site. Using International PubIds.")),n=!0):h===""||h===null?(s||(s=!0,o.log("No country code. Using Domestic PubIds.")),n=!1):d.has(h)?s||(s=!0,o.log("Domestic site or country code. Using Domestic PubIds."),n=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(s||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),s||(s=!0,o.log("International country code. Using International PubIds.")),n=!0):0<=f.search(/^.*us\.cnn\.com/)?(s||(s=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=n=!0):(s||(s=!0,o.log("International country code but domestic site. Using International PubIds if available.")),n=!0),n},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(u,g,c){c===void 0&&(c="The promise timed out.");var l=new Promise(function(o,s){var a=setTimeout(function(){clearTimeout(a),s(c)},u)});return Promise.race([g,l])}},{}],9:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var u=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return u.href=typeof document!="undefined"?document.location.href:"",u.hostname}},{}],10:[function(t,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var u=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new u.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(u=t.CookieHelper.readCookie("CG"))==null?void 0:u.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(u=t.CookieHelper.readCookie("SelectedEdition"))!=null?u:"www",e.hasUserConsent=typeof window!="undefined"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],11:[function(t,y,e){var u,g,c=this&&this.__extends||(u=function(n,f){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(h,m){h.__proto__=m}:function(h,m){for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&(h[i]=m[i])}))(n,f)},function(n,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function h(){this.constructor=n}u(n,f),n.prototype=f===null?Object.create(f):(h.prototype=f.prototype,new h)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.Blockthrough=void 0,t("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=t("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),s=t("@turnercode/digital-ads-utilities/dist/Version"),a=t("./version.json"),d=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"],t=(g=l.AAdFuelModule,c(r,g),r.prototype.init=function(){var n=this;return new Promise(function(f,h){(0,o.loadScriptFromUrl)("warnermediagroup-com.videoplayerhub.com/galleryloader.js","btScript").finally(function(){n.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(n.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(n.MODULE_LOG_TAG)})}).catch(function(m){n.logger.error("There was an error loading the Blockthrough script.",m)}),f()})},r);function r(n){n===void 0&&(n=l.ModuleFlags.EnableForDomestic|l.ModuleFlags.EnableForForeign|l.ModuleFlags.RunWithoutAdFuel);var f=g.call(this,null,"Blockthrough",new s.Version(a.major,a.minor,a.revision,a.family),"bt","color: #d2b000; padding: 2px",n,d)||this;return f.preDispatch=function(h){return new Promise(function(m,i){var v;f.logger.info("BLOCKTHROUGH: preDispatch was fired."),window.AdFuelUtils||(window.AdFuelUtils={isBlockerEnabled:!1,isReinsertionAllowed:!1,getPermissionToReinsert:function(_){}}),window.AdFuelUtils.isBlockerEnabled=(v=(v=window.BT)==null?void 0:v.BLOCKER_ENABLED)!=null&&v,window.AdFuelUtils.isReinsertionAllowed=(v=(v=window.BT)==null?void 0:v.REINSERTION_ALLOWED)!=null&&v,window.AdFuelUtils.getPermissionToReinsert=function(_){window.BT&&window.BT.getPermissionToReinsert(function(p){p&&_()})},m()})},console.log("ModuleFlags: ",{DOM:l.ModuleFlags.EnableForDomestic,INTL:l.ModuleFlags.EnableForForeign,ADF:l.ModuleFlags.RunWithoutAdFuel}),f.logger.info("Created Blockthrough Module"),f}new(e.Blockthrough=t)(l.ModuleFlags.EnableForDomestic|l.ModuleFlags.EnableForForeign|l.ModuleFlags.RunWithoutAdFuel)},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(t,y,e){y.exports={family:"TS",major:5,minor:0,revision:13}},{}]},{},[11])(11)})});var Ss=S((Es,_t)=>{(function(t){typeof Es=="object"&&typeof _t!="undefined"?_t.exports=t():typeof define=="function"&&define.amd?define([],t):(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:this).AdFuel=t()})(function(){return function t(y,e,u){function g(o,s){if(!e[o]){if(!y[o]){var a=typeof I=="function"&&I;if(!s&&a)return a(o,!0);if(c)return c(o,!0);throw(s=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",s}a=e[o]={exports:{}},y[o][0].call(a.exports,function(d){return g(y[o][1][d]||d)},a,a.exports,t,y,e,u)}return e[o].exports}for(var c=typeof I=="function"&&I,l=0;l<u.length;l++)g(u[l]);return g}({1:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var u,g=t("./Logger"),c=t("./promiseWithTimeout"),l=t("./localization"),t=((t=u=e.ModuleFlags||(e.ModuleFlags={}))[t.None=0]="None",t[t.EnableForDomestic=1]="EnableForDomestic",t[t.EnableForForeign=2]="EnableForForeign",t[t.RunWithoutAdFuel=4]="RunWithoutAdFuel",t[t.RunWithoutConsent=8]="RunWithoutConsent",t[t.HasVideoAPI=16]="HasVideoAPI",Object.defineProperty(o.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),o);function o(s,a,d,r,n,f,h,m){f===void 0&&(f=u.EnableForDomestic|u.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var i=this;this.config=s,this.MODULE_NAME=a,this.MODULE_VERSION=d,this.MODULE_LOG_TAG=r,this.logStyle=n,this.moduleFlags=f,this.consentTags=h,this.MODULE_VIDEO_API_KEY=m,this.adFuelExists=!!window.AdFuel,this.environmentMatchesFlags=function(){var v=u.None;return(0,l.isIntl)()&&(v|=u.EnableForForeign),(0,l.isIntl)()||(v|=u.EnableForDomestic),(i.moduleFlags&u.EnableForDomestic)===u.EnableForDomestic&&(i.moduleFlags&u.EnableForForeign)===u.EnableForForeign?v===(v&u.EnableForDomestic)||v===(v&u.EnableForForeign):(i.moduleFlags&u.EnableForDomestic)===u.EnableForDomestic?v===(v&u.EnableForDomestic):v===(v&u.EnableForForeign)},this.callInit=function(){i.logger.log("Waiting for UserConsent..."),i.waitForUserConsent().then(function(){var v;i.logger.log("Checking Module Flags...",i.moduleFlags),(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent||(v=(v=window.WM)==null?void 0:v.UserConsent)!=null&&v.inUserConsentState(i.consentTags)?(i.moduleFlags&&u.RunWithoutAdFuel)==u.RunWithoutAdFuel?((v=window.AdFuel)!=null&&v.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var _;i.logger.log("Registering with AdFuel..."),(_=window.AdFuel)!=null&&_.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var _;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(_=window.AdFuel)!=null&&_.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)}))})):i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags)):(i.logger.log("Waiting for AdFuel..."),i.waitForAdFuel().then(function(){var _;(_=window.AdFuel)!=null&&_.registerModule(i)||document.addEventListener("AdFuelCreated",function(){var p;i.logger.log("Registering with AdFuel..."),(p=window.AdFuel)!=null&&p.registerModule(i)}),i.logger.log("Checking Environment..."),i.environmentMatchesFlags()?(i.logger.log("Calling Init..."),i.init().then(function(){var p;window.AdFuel?(i.logger.log("Setting Module Loaded..."),(p=window.AdFuel)!=null&&p.setModuleLoaded(i.MODULE_LOG_TAG)):(i.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var b;i.logger.log("Setting Module Loaded..."),(b=window.AdFuel)!=null&&b.setModuleLoaded(i.MODULE_LOG_TAG)}))})):i.logger.warn("Not initializing ".concat(i.MODULE_NAME," for environmental reasons."),i.moduleFlags)}).catch(function(_){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for AdFuel."),_)})):i.logger.info("User consent is not granted.",(v=(v=window.WM)==null?void 0:v.UserConsent)==null?void 0:v.inUserConsentState(i.consentTags))}).catch(function(v){i.logger.warn("".concat(i.MODULE_NAME," errored waiting for consent."),v)})},this.waitForAdFuel=function(){return(i.moduleFlags&u.RunWithoutAdFuel)===u.RunWithoutAdFuel?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(v){window.AdFuel?v():document.addEventListener("AdFuelCreated",function(){v()})}))},this.waitForUserConsent=function(){var v;return(v=window.WM)==null||!v.UserConsent||(i.moduleFlags&u.RunWithoutConsent)==u.RunWithoutConsent?Promise.resolve():(0,c.promiseWithTimeout)(5e3,new Promise(function(_){var p;i._logger.log("Consent Promise with Timeout..."),(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.isReady()?(i._logger.log("Consent Is Ready..."),(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.isInRegion("gdpr")?(i._logger.log("Region is GDPR..."),(p=(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.isOptanonLoaded())!=null&&p?(i._logger.log("Optanon is Loaded..."),_()):(i._logger.log("Waiting for Optanon..."),document.addEventListener("optanonLoaded",function(){i._logger.log("Optanon is Loaded..."),_()}))):(i._logger.log("Region is not GDPR..."),_())):(p=window.WM)!=null&&p.UserConsent?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),_()})):(console.log("No User Consent..."),_())}))},this._logger=new g.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=t},{"./Logger":3,"./localization":13,"./promiseWithTimeout":15}],2:[function(t,y,e){"use strict";function u(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,u.hasCookie=function(g){return typeof window!="undefined"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+g+"=")||document.cookie.indexOf(g+"=")===0)},u.setCookie=function(g){var c=g.cookieName+"="+g.cookieValue+";";g.attributes.forEach(function(l){c+=" "+l.key+"="+l.value+";"}),g.secure&&(c+=" Secure"),document.cookie=c},u.readCookie=function(g){var c,l,o=!1,s=null;return(o=typeof localStorage!="undefined"?!0:o)&&(s=localStorage.getItem(g)),o&&s!==null||(l=(c=g).length+1,s=typeof document!="undefined"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,l)==="".concat(c,"=")}).map(function(a){return decodeURIComponent(a.substring(l))})[0]||null),s},e.CookieHelper=u},{}],3:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(g=u=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",g.Warning="background: orange;color: black",g.Error="background: red;color:white",Object.defineProperty(c.prototype,"isDebugging",{get:function(){var l;return this._debug===void 0&&(l=this.getUrlParam("debug").split(","),this._debug=l[0]==="true"||0<=l.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),c.prototype.info=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.warn=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.error=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.log=function(l){for(var o=1;o<arguments.length;o++)o-1},c.prototype.groupStart=function(l){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(l," - START -----"),this._normalStyle))},c.prototype.groupEnd=function(l){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},c.prototype.timeStart=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupStart(l),console.time(o)},c.prototype.timeEnd=function(l){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(l);this.groupEnd(l),console.timeEnd(o)},c.prototype.getUrlParam=function(l){return typeof document!="undefined"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""};var u,g=c;function c(l,o,s,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=l||"",this._moduleVersion=o||"",this._logKey=s||(l==null?void 0:l.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),u.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),u.Info,this._normalStyle))}e.Logger=g},{}],4:[function(t,y,e){"use strict";function u(g){this._tag="ADFUEL",this._tag=g,this.addMark("AdFuel Load START")}Object.defineProperty(e,"__esModule",{value:!0}),e.Performance=void 0,u.prototype.addMark=function(g){typeof window!="undefined"&&window.performance.mark("[".concat(this._tag,"] ").concat(g))},u.prototype.addMeasure=function(g){typeof window!="undefined"&&window.performance.measure("[".concat(this._tag,"] ").concat(g),"[".concat(this._tag,"] ").concat(g," START"),"[".concat(this._tag,"] ").concat(g," END"))},u.prototype.getMarks=function(){var g,c=this;return(g=window==null?void 0:window.performance.getEntriesByType("mark").filter(function(l){return l.name.indexOf("[".concat(c._tag,"] "))}))!=null?g:[]},u.prototype.getMeasures=function(){var g,c=this;return(g=window==null?void 0:window.performance.getEntriesByType("measure").filter(function(l){return l.name.indexOf("[".concat(c._tag,"] "))}))!=null?g:[]},e.Performance=u},{}],5:[function(t,y,e){"use strict";function u(g){var c=this;this.logger=g,this.re=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()\[\]\.,;:\s@\"]+\.)+[^<>()\[\]\.,;:\s@\"]{2,})/i,this.present=function(){return c.presentInQueryString()||c.presentInHash()||c.presentInReferrer()}}Object.defineProperty(e,"__esModule",{value:!0}),e.PiiFilter=void 0,u.prototype.presentInQueryString=function(){if(document.location.search){var g=document.location.search.search(this.re)+1,c=void 0;try{c=decodeURIComponent(document.location.search).search(this.re)+1}catch(l){c=g}return g===1||c===1}return!1},u.prototype.presentInHash=function(){if(document.location.hash){var g=document.location.hash.search(this.re)+1,c=void 0;try{c=decodeURIComponent(document.location.hash).search(this.re)+1}catch(l){c=g}return g||c}return!1},u.prototype.presentInReferrer=function(){if(document.referrer){var g=document.referrer.search(this.re)+1,c=void 0;try{c=decodeURIComponent(document.location.referrer).search(this.re)+1}catch(l){c=g}return g||c}return!1},u.prototype.filterDFPRequest=function(){if(this.presentInQueryString()||this.presentInHash()||this.presentInReferrer()){if(typeof window!="undefined"&&window.AdFuel){this.logger.log("Filtering DFP Request due to PII in query string.");for(var g=Object.getOwnPropertyNames(window.AdFuel),c=0;c<g.length;c++);window.googletag=null}return!0}return!1},Object.defineProperty(u.prototype,"qs",{get:function(){return this.presentInQueryString},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"hash",{get:function(){return this.presentInHash},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"ref",{get:function(){return this.presentInReferrer},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isPIIPresent",{get:function(){return this.present},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"filter",{get:function(){return this.filterDFPRequest},enumerable:!1,configurable:!0}),e.PiiFilter=u},{}],6:[function(t,y,e){"use strict";function u(g,c,l,o){var s=this;this.setMajorTo=g,this.setMinorTo=c,this.setRevisionTo=l,this.setFamilyTo=o,this.setfamily=function(a){return s.setFamilyTo=a,s},this.toString=function(){return"".concat(s.major,".").concat(s.minor.toString().padStart(2,"0"),".").concat(s.revision.toString().padStart(3,"0")," ").concat(s.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(u.prototype,"major",{get:function(){var g;return(g=this.setMajorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"minor",{get:function(){var g;return(g=this.setMinorTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"revision",{get:function(){var g;return(g=this.setRevisionTo)!=null?g:0},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"family",{get:function(){var g;return(g=this.setFamilyTo)!=null?g:""},enumerable:!1,configurable:!0}),e.Version=u},{}],7:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateCacheBuster=void 0,e.generateCacheBuster=function(){for(var u="",g=0;g<10;g++)u+=Math.floor(9*Math.random()).toString();return u}},{}],8:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(u){return typeof document!="undefined"&&(u=u.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),u=new RegExp("[\\?&]"+u+"=([^&#]*)"),document)&&document.location&&document.location.search&&(u=u.exec(document.location.search))?u[1]:""}},{}],9:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getViewport=void 0,e.getViewport=function(){var u=0,g=0,g=typeof window!="undefined"&&window&&window.innerWidth!==void 0?(u=window.innerWidth,window.innerHeight):(typeof document!="undefined"&&document&&document.documentElement!==void 0&&document.documentElement.clientWidth!==void 0&&document.documentElement.clientWidth!==0?(u=document.documentElement.clientWidth,document.documentElement):(u=document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0])).clientHeight;return{width:u,height:g,toGpt:[""+u,""+g]}}},{}],10:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasVideo=void 0,e.hasVideo=function(){var u=document.getElementsByTagName("video"),g=document.getElementsByClassName("fave-wrapper"),c=document.getElementsByClassName("top-container");return!!u.length||!!g.length||!!c.length}},{}],11:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=e.Version=e.PiiFilter=e.Performance=e.toString=e.setHostAndPathNames=e.selectedEdition=e.promiseWithTimeout=e.normalizeUrl=e.noop=e.ModuleFlags=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=e.Logger=e.locationServiceURL=e.loadScriptFromUrl=e.isUSCNN=e.isIntl=e.hasVideo=e.hasUserConsent=e.getUrlParam=e.generateCacheBuster=e.countryCode=e.CookieHelper=e.AAdFuelModule=void 0;var u=t("./AAdFuelModule"),g=(Object.defineProperty(e,"AAdFuelModule",{enumerable:!0,get:function(){return u.AAdFuelModule}}),Object.defineProperty(e,"ModuleFlags",{enumerable:!0,get:function(){return u.ModuleFlags}}),t("./CookieHelper")),c=(Object.defineProperty(e,"CookieHelper",{enumerable:!0,get:function(){return g.CookieHelper}}),t("./getUrlParam")),l=(Object.defineProperty(e,"getUrlParam",{enumerable:!0,get:function(){return c.getUrlParam}}),t("./hasVideo")),o=(Object.defineProperty(e,"hasVideo",{enumerable:!0,get:function(){return l.hasVideo}}),t("./localization")),s=(Object.defineProperty(e,"isIntl",{enumerable:!0,get:function(){return o.isIntl}}),Object.defineProperty(e,"isUSCNN",{enumerable:!0,get:function(){return o.isUSCNN}}),t("./loadScriptFromUrl")),a=(Object.defineProperty(e,"loadScriptFromUrl",{enumerable:!0,get:function(){return s.loadScriptFromUrl}}),t("./Logger")),d=(Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return a.Logger}}),t("./normalizeUrl")),r=(Object.defineProperty(e,"normalizeUrl",{enumerable:!0,get:function(){return d.normalizeUrl}}),t("./promiseWithTimeout")),n=(Object.defineProperty(e,"promiseWithTimeout",{enumerable:!0,get:function(){return r.promiseWithTimeout}}),t("./Performance")),f=(Object.defineProperty(e,"Performance",{enumerable:!0,get:function(){return n.Performance}}),t("./PiiFilter")),h=(Object.defineProperty(e,"PiiFilter",{enumerable:!0,get:function(){return f.PiiFilter}}),t("./setHostAndPathNames")),m=(Object.defineProperty(e,"setHostAndPathNames",{enumerable:!0,get:function(){return h.setHostAndPathNames}}),t("./generateCacheBuster")),i=(Object.defineProperty(e,"generateCacheBuster",{enumerable:!0,get:function(){return m.generateCacheBuster}}),t("./variables")),v=(Object.defineProperty(e,"MODULE_VERSION",{enumerable:!0,get:function(){return i.MODULE_VERSION}}),Object.defineProperty(e,"MODULE_NAME",{enumerable:!0,get:function(){return i.MODULE_NAME}}),Object.defineProperty(e,"MODULE_LOG_TAG",{enumerable:!0,get:function(){return i.MODULE_LOG_TAG}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return i.toString}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return i.noop}}),Object.defineProperty(e,"countryCode",{enumerable:!0,get:function(){return i.countryCode}}),Object.defineProperty(e,"locationServiceURL",{enumerable:!0,get:function(){return i.locationServiceURL}}),Object.defineProperty(e,"selectedEdition",{enumerable:!0,get:function(){return i.selectedEdition}}),Object.defineProperty(e,"hasUserConsent",{enumerable:!0,get:function(){return i.hasUserConsent}}),t("./Version")),_=(Object.defineProperty(e,"Version",{enumerable:!0,get:function(){return v.Version}}),t("./waitForVideo"));Object.defineProperty(e,"waitForVideo",{enumerable:!0,get:function(){return _.waitForVideo}})},{"./AAdFuelModule":1,"./CookieHelper":2,"./Logger":3,"./Performance":4,"./PiiFilter":5,"./Version":6,"./generateCacheBuster":7,"./getUrlParam":8,"./hasVideo":10,"./loadScriptFromUrl":12,"./localization":13,"./normalizeUrl":14,"./promiseWithTimeout":15,"./setHostAndPathNames":16,"./variables":17,"./waitForVideo":18}],12:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var u=t("./promiseWithTimeout");e.loadScriptFromUrl=function(g,c,l,o){return l===void 0&&(l=document),o===void 0&&(o=!0),(0,u.promiseWithTimeout)(5e3,new Promise(function(s,a){var d,r,n=l.createElement("script");if(document.getElementById(c))a("Element name ".concat(c," already exists in the document."));else try{var f="",h=(f=1<g.split("//").length?g:((r=((d=l.location)==null?void 0:d.protocol)==="https:")!==null&&r?"https://":"http://").concat(g),l.getElementsByTagName("script")[0]);if(n.id=c,n.type="text/javascript",n.src=f,n.async=o,n.addEventListener("load",function(){s(n)}),h==null||!h.parentNode)throw new Error("Could not insert script.");h.parentNode.insertBefore(n,h)}catch(m){console.log("Error in loading script from ".concat(n.src),m),a(m)}}))}},{"./promiseWithTimeout":15}],13:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=void 0;var u=t("./setHostAndPathNames"),g=t("./getUrlParam"),c=t("./Logger"),l=t("./variables"),o=new c.Logger(l.MODULE_NAME,l.MODULE_VERSION.toString(),l.MODULE_LOG_TAG,"color: coral; padding: 2px"),s=!1,a=!1;e.isIntl=function(){var d=!1,r=(0,u.setHostAndPathNames)();return(0,g.getUrlParam)("isIntl")==="true"?(s||(s=!0,o.log("Faking international site. Using International PubIds.")),d=!0):0<=r.search(/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\./)?(s||(s=!0,o.log("Full international site. Using International PubIds.")),d=!0):l.countryCode===""||l.countryCode===null?(s||(s=!0,o.log("No country code.")),d=!1):l.countryCode!=="US"&&l.countryCode!=="CA"?0<=r.search(/^.*(money|\.cnn)\./)?(0<=r.search(/^.*us\.cnn\.com/)&&(s||o.log("International user but domestic page.  Using alternate international PubIds if available."),a=!0),s||(s=!0,o.log("International country code.")),d=!0):0<=r.search(/^.*us\.cnn\.com/)?(s||(s=!0,o.log("International user but domestic page. Using alternate international PubIds if available.")),a=d=!0):(s||(s=!0,o.log("International country code but domestic site.")),d=!0):s||(s=!0,o.log("Domestic site or country code."),d=!1),d},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":8,"./setHostAndPathNames":16,"./variables":17}],14:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeUrl=void 0,e.normalizeUrl=function(u){var g=Object.assign({normalizeProtocol:!0,normalizeHttps:!1,normalizeHttp:!0,stripFragment:!0,stripWWW:!0,removeQueryParameters:!0,removeTrailingSlash:!1,removeDirectoryIndex:!1},{}),c=u.trim(),l=u[0]==="/"&&u[1]==="/",o=(!l&&/^\.*\//.test(u)||(c=u.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,"http://")),document.createElement("a"));if(o.href=c,g.normalizeHttps&&g.normalizeHttp)throw new Error("The `normalizeHttp` and `normalizeHttps` options cannot be used together");return g.normalizeHttp&&(o.protocol==="http:"||l)&&(o.protocol="https:"),g.normalizeHttps&&(o.protocol==="https:"||l)&&(o.protocol="http:"),g.stripFragment&&(o.hash=""),o.pathname&&(o.pathname=o.pathname.replace(/((?![https?:]).)\/{2,}/g,function(s,a){return/^(?!\/)/g.test(a)?a+"/":"/"})),o.pathname&&(o.pathname=decodeURI(o.pathname)),o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),g.stripWWW)&&(o.hostname=o.hostname.replace(/^www\./,"")),g.removeQueryParameters&&(o.search=""),c=o.href,!g.removeTrailingSlash&&o.pathname!=="/"||(c=u.replace(/\/$/,"")),c=l&&!g.normalizeProtocol?u.replace(/^http:\/\//,"//"):c}},{}],15:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(u,g,c){c===void 0&&(c="The promise timed out.");var l=new Promise(function(o,s){var a=setTimeout(function(){clearTimeout(a),s(c)},u)});return Promise.race([g,l])}},{}],16:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var u=typeof document!="undefined"?document.createElement("a"):{href:"",hostname:"",pathname:""};return u.href=typeof document!="undefined"?document.location.href:"",u.hostname}},{}],17:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var u=t("./Version"),t=t("./CookieHelper"),g=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new u.Version(1,0,0,"TS"),e.MODULE_LOG_TAG="utils",e.toString=g.toString,e.noop=function(){},e.countryCode=t.CookieHelper.readCookie("countryCode")||((g=(u=t.CookieHelper.readCookie("CG"))==null?void 0:u.substr(0,2))!=null?g:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(u=t.CookieHelper.readCookie("SelectedEdition"))!=null?u:"www",e.hasUserConsent=typeof window!="undefined"&&window.WM&&window.WM.UserConsent||!1},{"./CookieHelper":2,"./Version":6}],18:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=void 0,e.waitForVideo=function(u){var g=!1,c=new MutationObserver(function(a){var d=document.getElementsByTagName("video"),r=document.getElementsByClassName("fave-wrapper"),n=document.getElementsByClassName("top-container");(d.length||r.length||n.length)&&(g||u(),g=!0,c.disconnect())}),l=(c.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),document.getElementsByTagName("video")),o=document.getElementsByClassName("fave-wrapper"),s=document.getElementsByClassName("top-container");(l.length||o.length||s.length)&&(u(),g=!0,c.disconnect())}},{}],19:[function(t,y,e){"use strict";var u,g=this&&this.__extends||(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(p,b){p.__proto__=b}:function(p,b){for(var E in b)b.hasOwnProperty(E)&&(p[E]=b[E])}),function(p,b){function E(){this.constructor=p}u(p,b),p.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}),c=(Object.defineProperty(e,"__esModule",{value:!0}),t("./Enumerables")),l=t("./Comparers"),t=(o.prototype.toList=function(){return new n(this.toArray())},o.prototype.toDictionary=function(p,b){return v.fromArray(this.toArray(),p,b)},o.prototype.reverse=function(){return new c.ReverseEnumerable(this.asEnumerable())},o.prototype.concat=function(p){for(var b,E=[],A=1;A<arguments.length;A++)E[A-1]=arguments[A];return(b=this.asEnumerable()).concat.apply(b,[p].concat(E))},o.prototype.contains=function(p){return this.any(function(b){return b===p})},o.prototype.where=function(p){return new c.ConditionalEnumerable(this.asEnumerable(),p)},o.prototype.select=function(p){return new c.TransformEnumerable(this.asEnumerable(),p)},o.prototype.selectMany=function(p){return this.select(function(b){return b=p(b),b instanceof Array?new c.ArrayEnumerable(b):b.asEnumerable()}).toArray().reduce(function(b,E){return new c.ConcatEnumerable(b,E)},c.Enumerable.empty())},o.prototype.elementAt=function(p){if(p=this.elementAtOrDefault(p),p===void 0)throw new Error("Out of bounds");return p},o.prototype.except=function(p){return this.asEnumerable().except(p)},o.prototype.first=function(p){if(p=p!==void 0?this.firstOrDefault(p):this.firstOrDefault(),p===void 0)throw new Error("Sequence contains no elements");return p},o.prototype.groupBy=function(p,b){for(var E=this.toArray(),A=new v,L=0;L<E.length;++L){var C=p(E[L]),M=b!==void 0?b(E[L]):E[L];A.containsKey(C)||A.set(C,new n),A.get(C).push(M)}return A.asEnumerable()},o.prototype.last=function(p){if(p=p!==void 0?this.lastOrDefault(p):this.lastOrDefault(),p===void 0)throw new Error("Sequence contains no elements");return p},o.prototype.single=function(p){if(p=p!==void 0?this.singleOrDefault(p):this.singleOrDefault(),p===void 0)throw new Error("Sequence contains no elements");return p},o.prototype.singleOrDefault=function(p){return p!==void 0?this.asEnumerable().singleOrDefault(p):this.asEnumerable().singleOrDefault()},o.prototype.skipWhile=function(p){return this.asEnumerable().skipWhile(p)},o.prototype.takeWhile=function(p){return this.asEnumerable().takeWhile(p)},o.prototype.sequenceEqual=function(p,b){return b!==void 0?this.asEnumerable().sequenceEqual(p,b):this.asEnumerable().sequenceEqual(p)},o.prototype.distinct=function(p){return new c.UniqueEnumerable(this.asEnumerable(),p)},o.prototype.min=function(p){return p!==void 0?new c.TransformEnumerable(this.asEnumerable(),p).min():this.aggregate(function(b,E){return b!==void 0&&b<E?b:E})},o.prototype.orderBy=function(p,b){return new c.OrderedEnumerable(this.asEnumerable(),l.createComparer(p,!0,b))},o.prototype.orderByDescending=function(p){return new c.OrderedEnumerable(this.asEnumerable(),l.createComparer(p,!1,void 0))},o.prototype.max=function(p){return p!==void 0?new c.TransformEnumerable(this.asEnumerable(),p).max():this.aggregate(function(b,E){return b!==void 0&&E<b?b:E})},o.prototype.sum=function(p){return this.aggregate(function(b,E){return b+p(E)},0)},o.prototype.skip=function(p){return new c.RangeEnumerable(this.asEnumerable(),p,void 0)},o.prototype.take=function(p){return new c.RangeEnumerable(this.asEnumerable(),void 0,p)},o.prototype.union=function(p){return new c.UniqueEnumerable(this.concat(p))},o.prototype.aggregate=function(p,b){return b!==void 0?this.asEnumerable().aggregate(p,b):this.asEnumerable().aggregate(p)},o.prototype.any=function(p){return p!==void 0?this.asEnumerable().any(p):this.asEnumerable().any()},o.prototype.all=function(p){return this.asEnumerable().all(p)},o.prototype.average=function(p){return this.asEnumerable().average(p)},o.prototype.count=function(p){return p!==void 0?this.asEnumerable().count(p):this.asEnumerable().count()},o.prototype.elementAtOrDefault=function(p){return this.asEnumerable().elementAtOrDefault(p)},o.prototype.firstOrDefault=function(p){return p!==void 0?this.asEnumerable().firstOrDefault(p):this.asEnumerable().firstOrDefault()},o.prototype.lastOrDefault=function(p){return p!==void 0?this.asEnumerable().lastOrDefault(p):this.asEnumerable().lastOrDefault()},o.prototype.forEach=function(p){return this.asEnumerable().forEach(p)},o.prototype.defaultIfEmpty=function(p){return p!==void 0?this.asEnumerable().defaultIfEmpty(p):this.asEnumerable().defaultIfEmpty()},o.prototype.zip=function(p,b){return this.asEnumerable().zip(p,b)},o);function o(){}e.EnumerableCollection=t,g(d,s=t),d.prototype.asArray=function(){return this.source},d.prototype.toArray=function(){return[].concat(this.source)},d.prototype.toList=function(){return new n(this.toArray())},d.prototype.asEnumerable=function(){return new c.ArrayEnumerable(this.source)},d.prototype.aggregate=function(p,b){return b!==void 0?this.source.reduce(p,b):this.source.reduce(p)},d.prototype.any=function(p){return p!==void 0?this.source.some(p):0<this.source.length},d.prototype.all=function(p){return this.source.every(p)},d.prototype.average=function(p){if(this.count()===0)throw new Error("Sequence contains no elements");for(var b=0,E=0,A=this.source.length;E<A;++E)b+=p(this.source[E]);return b/this.source.length},d.prototype.count=function(p){return(p!==void 0?this.source.filter(p):this.source).length},d.prototype.elementAtOrDefault=function(p){if(p<0)throw new Error("Negative index is forbiden");return this.source[p]},d.prototype.firstOrDefault=function(p){return(p!==void 0?this.source.filter(p):this.source)[0]},d.prototype.groupBy=function(p,b){for(var E=this.asArray(),A=new v,L=0;L<E.length;++L){var C=p(E[L]),M=b!==void 0?b(E[L]):E[L];A.containsKey(C)||A.set(C,new n),A.get(C).push(M)}return A.asEnumerable()},d.prototype.lastOrDefault=function(p){return p!==void 0?(p=this.source.filter(p))[p.length-1]:this.source[this.source.length-1]},d.prototype.forEach=function(p){for(var b=0,E=this.source.length;b<E;++b)p(this.source[b],b)},d.prototype.sequenceEqual=function(p,b){if(b===void 0&&(b=l.strictEqualityComparer()),p instanceof d||p instanceof Array){var E=this.asArray(),A=p instanceof d?p.asArray():p;if(E.length!=A.length)return!1;for(var L=0;L<E.length;++L)if(!b(E[L],A[L]))return!1;return!0}return this.asEnumerable().sequenceEqual(p,b)};var s,a=d;function d(p){p===void 0&&(p=[]);var b=s.call(this)||this;return b.source=p,b}e.ArrayQueryable=a,g(f,r=a),f.prototype.copy=function(){return new f(this.toArray())},f.prototype.asReadOnly=function(){return this},f.prototype.clear=function(){this.source=[]},f.prototype.remove=function(p){for(var b=[],E=0,A=this.source.length;E<A;++E)this.source[E]!==p&&b.push(this.source[E]);this.source=b},f.prototype.removeAt=function(p){if(p<0||this.source[p]===void 0)throw new Error("Out of bounds");return this.source.splice(p,1)[0]},f.prototype.get=function(p){return this.source[p]},f.prototype.push=function(p){return this.source.push(p)},f.prototype.pushRange=function(p){return p instanceof Array||(p=p.toArray()),this.source.push.apply(this.source,p)},f.prototype.pushFront=function(p){return this.source.unshift(p)},f.prototype.pop=function(){return this.source.pop()},f.prototype.popFront=function(){return this.source.shift()},f.prototype.set=function(p,b){if(p<0)throw new Error("Out of bounds");this.source[p]=b},f.prototype.insert=function(p,b){if(p<0||p>this.source.length)throw new Error("Out of bounds");this.source.splice(p,0,b)},f.prototype.indexOf=function(p){return this.source.indexOf(p)};var r,n=f;function f(){return r!==null&&r.apply(this,arguments)||this}e.List=n,g(m,h=a),m.prototype.copy=function(){return new m(this.toArray())},m.prototype.clear=function(){this.source=[]},m.prototype.peek=function(){return this.source[this.source.length-1]},m.prototype.pop=function(){return this.source.pop()},m.prototype.push=function(p){return this.source.push(p)};var h,a=m;function m(){return h!==null&&h.apply(this,arguments)||this}e.Stack=a,g(_,i=t),_.fromArray=function(p,b,E){return new _(p.map(function(A){return{key:b(A),value:E(A)}}))},_.fromJsObject=function(p){return new _(new n(Object.getOwnPropertyNames(p)).select(function(b){return{key:b,value:p[b]}}).toArray())},_.prototype.copy=function(){return new _(this.toArray())},_.prototype.asReadOnly=function(){return this},_.prototype.asEnumerable=function(){return new c.ArrayEnumerable(this.toArray())},_.prototype.toArray=function(){var p=this;return this.getKeys().select(function(b){return{key:b,value:p.dictionary[b]}}).toArray()},_.prototype.clear=function(){this.dictionary={}},_.prototype.containsKey=function(p){return this.dictionary.hasOwnProperty(p)},_.prototype.containsValue=function(p){for(var b=this.getKeysFast(),E=0;E<b.length;++E)if(this.dictionary[b[E]]===p)return!0;return!1},_.prototype.getKeys=function(){var p=this,b=this.getKeysFast();return new n(b.map(function(E){return p.keyType==="number"?parseFloat(E):E}))},_.prototype.getKeysFast=function(){return Object.getOwnPropertyNames(this.dictionary)},_.prototype.getValues=function(){for(var p=this.getKeysFast(),b=new Array(p.length),E=0;E<p.length;++E)b[E]=this.dictionary[p[E]];return new n(b)},_.prototype.remove=function(p){this.containsKey(p)&&delete this.dictionary[p]},_.prototype.get=function(p){if(this.containsKey(p))return this.dictionary[p];throw new Error("Key doesn't exist: "+p)},_.prototype.set=function(p,b){if(this.containsKey(p))throw new Error("Key already exists: "+p);this.setOrUpdate(p,b)},_.prototype.setOrUpdate=function(p,b){this.keyType===void 0&&(this.keyType=typeof p),this.dictionary[p]=b};var i,v=_;function _(p){var b=i.call(this)||this;if(b.clear(),p!==void 0)for(var E=0;E<p.length;++E){var A=p[E];b.set(A.key,A.value)}return b}e.Dictionary=v},{"./Comparers":20,"./Enumerables":21}],20:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.strictEqualityComparer=function(){return function(u,g){return u===g}},e.combineComparers=function(u,g){return function(c,l){return u(c,l)||g(c,l)}},e.createComparer=function(u,g,c){return c!==void 0?function(l,o){return c(u(l),u(o))}:g?function(l,o){return l=u(l),o=u(o),l<o?-1:o<l?1:0}:function(l,o){return l=u(l),o=u(o),l<o?1:o<l?-1:0}}},{}],21:[function(t,y,e){"use strict";var u,g=this&&this.__extends||(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(w,O){w.__proto__=O}:function(w,O){for(var F in O)O.hasOwnProperty(F)&&(w[F]=O[F])}),function(w,O){function F(){this.constructor=w}u(w,O),w.prototype=O===null?Object.create(O):(F.prototype=O.prototype,new F)}),c=(Object.defineProperty(e,"__esModule",{value:!0}),t("./Iterators")),l=t("./Comparers"),o=t("./Collections"),s=t("./Utils"),t=(a.prototype.reset=function(){this.source.reset()},a.prototype.next=function(){return this.source.next()},a.prototype.asEnumerable=function(){return this},a.prototype.toArray=function(){var w=[];for(this.reset();this.next();)w.push(this.value());return w},a.prototype.toList=function(){return new o.List(this.toArray())},a.prototype.toDictionary=function(w,O){return o.Dictionary.fromArray(this.toArray(),w,O)},a.prototype.count=function(w){if(w!==void 0)return new h(this,w).count();var O=0;for(this.reset();this.next();)++O;return O>>>0},a.prototype.any=function(w){return w!==void 0?new h(this,w).any():(this.reset(),this.next())},a.prototype.all=function(w){for(this.reset();this.next();)if(!w(this.value()))return!1;return!0},a.prototype.reverse=function(){return new xe(this.copy())},a.prototype.contains=function(w){return this.any(function(O){return O===w})},a.prototype.sequenceEqual=function(w,O){O===void 0&&(O=l.strictEqualityComparer());var F=w instanceof Array?new z(w):w.asEnumerable();for(this.reset(),F.reset();this.next();)if(!F.next()||!O(this.value(),F.value()))return!1;return!F.next()},a.prototype.where=function(w){return new h(this.copy(),w)},a.prototype.select=function(w){return new B(this.copy(),w)},a.prototype.selectMany=function(w){return this.select(function(O){return O=w(O),Array.isArray(O)?new z(O):O.asEnumerable()}).toArray().reduce(function(O,F){return new L(O,F)},r.empty())},a.prototype.skipWhile=function(w){return new v(this.copy(),w)},a.prototype.concat=function(w){for(var O=[],F=1;F<arguments.length;F++)O[F-1]=arguments[F];for(var R=function(je){return je instanceof Array?new z(je):je.asEnumerable()},N=new L(this.copy(),R(w).copy()),X=0,ke=O.length;X<ke;++X)N=new L(N,R(O[X]).copy());return N},a.prototype.defaultIfEmpty=function(w){return new Et(this,w)},a.prototype.elementAt=function(w){if(w=this.elementAtOrDefault(w),w===void 0)throw new Error("Out of bounds");return w},a.prototype.elementAtOrDefault=function(w){if(w<0)throw new Error("Negative index is forbiden");this.reset();for(var O=-1;this.next()&&++O!==w;);if(O===w)return this.value()},a.prototype.except=function(w){return this.where(function(O){return!w.contains(O)})},a.prototype.first=function(w){if(w=w!==void 0?this.firstOrDefault(w):this.firstOrDefault(),w===void 0)throw new Error("Sequence contains no elements");return w},a.prototype.firstOrDefault=function(w){return w!==void 0?new h(this,w).firstOrDefault():(this.reset(),this.next()?this.value():void 0)},a.prototype.forEach=function(w){this.reset();for(var O=0;this.next();++O)w(this.value(),O)},a.prototype.groupBy=function(w,O){for(var F=this.toArray(),R=new o.Dictionary,N=0;N<F.length;++N){var X=w(F[N]),ke=O!==void 0?O(F[N]):F[N];R.containsKey(X)||R.set(X,new o.List),R.get(X).push(ke)}return R.asEnumerable()},a.prototype.last=function(w){if(w=w!==void 0?this.lastOrDefault(w):this.lastOrDefault(),w===void 0)throw new Error("Sequence contains no elements");return w},a.prototype.lastOrDefault=function(w){return w!==void 0?new h(this,w).lastOrDefault():((w=new xe(this)).reset(),w.next()?w.value():void 0)},a.prototype.single=function(w){if(w=w!==void 0?this.singleOrDefault(w):this.singleOrDefault(),w===void 0)throw new Error("Sequence contains no elements");return w},a.prototype.singleOrDefault=function(w){if(w!==void 0)return new h(this,w).singleOrDefault();if(this.reset(),this.next()){if(w=this.value(),this.next())throw new Error("Sequence contains more than 1 element");return w}},a.prototype.distinct=function(w){return new T(this.copy(),w)},a.prototype.aggregate=function(w,O){var F=O;if(this.reset(),O===void 0){if(!this.next())throw new Error("Sequence contains no elements");F=w(F,this.value())}for(;this.next();)F=w(F,this.value());return F},a.prototype.min=function(w){return w!==void 0?new B(this,w).min():this.aggregate(function(O,F){return O!==void 0&&O<F?O:F})},a.prototype.orderBy=function(w,O){return new Ne(this.copy(),l.createComparer(w,!0,O))},a.prototype.orderByDescending=function(w){return new Ne(this.copy(),l.createComparer(w,!1,void 0))},a.prototype.max=function(w){return w!==void 0?new B(this,w).max():this.aggregate(function(O,F){return O!==void 0&&F<O?O:F})},a.prototype.sum=function(w){return this.aggregate(function(O,F){return O+w(F)},0)},a.prototype.average=function(w){if(this.reset(),!this.next())throw new Error("Sequence contains no elements");for(var O=0,F=0;O+=w(this.value()),++F,this.next(););return O/F},a.prototype.skip=function(w){return new W(this.copy(),w,void 0)},a.prototype.take=function(w){return new W(this.copy(),void 0,w)},a.prototype.takeWhile=function(w){return new b(this.copy(),w)},a.prototype.union=function(w){return new T(this.concat(w))},a.prototype.zip=function(w,O){return w=w instanceof Array?new z(w):w.asEnumerable(),new St(this,w,O)},a);function a(w){this.source=w}e.EnumerableBase=t,g(n,d=t),n.fromSource=function(w){return new(w instanceof Array?z:n)(w)},n.empty=function(){return n.fromSource([])},n.range=function(w,O,F){if(F===void 0&&(F=!0),O<0)throw new Error("Count must be >= 0");var R=new Array(O);if(F)for(var N=0;N<O;R[N]=w+N++);else for(N=0;N<O;R[N]=w-N++);return new z(R)},n.repeat=function(w,O){if(O<0)throw new Error("Count must me >= 0");for(var F=new Array(O),R=0;R<O;++R)F[R]=w;return new z(F)},n.prototype.copy=function(){return new n(this.source.copy())},n.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=this.source.value()),this.currentValue.value},n.prototype.reset=function(){d.prototype.reset.call(this),this.currentValue.invalidate()},n.prototype.next=function(){return this.currentValue.invalidate(),d.prototype.next.call(this)};var d,r=n;function n(w){return w=d.call(this,w)||this,w.currentValue=new s.Cached,w}e.Enumerable=r,g(m,f=r),m.prototype.copy=function(){return new m(this.source.copy(),this._predicate)},m.prototype.next=function(){for(var w;(w=f.prototype.next.call(this))&&!this._predicate(this.value()););return w};var f,h=m;function m(w,O){return w=f.call(this,w)||this,w._predicate=O,w}e.ConditionalEnumerable=h,g(_,i=r),_.prototype.reset=function(){i.prototype.reset.call(this),this._shouldContinueChecking=!0},_.prototype.copy=function(){return new _(this.source.copy(),this._predicate)},_.prototype.next=function(){if(!this._shouldContinueChecking)return i.prototype.next.call(this);for(var w;(w=i.prototype.next.call(this))&&this._predicate(this.value()););return this._shouldContinueChecking=!1,w};var i,v=_;function _(w,O){return w=i.call(this,w)||this,w._predicate=O,w._shouldContinueChecking=!0,w}e.SkipWhileEnumerable=v,g(E,p=r),E.prototype.reset=function(){p.prototype.reset.call(this),this._shouldContinueTaking=!0},E.prototype.copy=function(){return new E(this.source.copy(),this._predicate)},E.prototype.next=function(){return!!(p.prototype.next.call(this)&&this._shouldContinueTaking&&this._predicate(this.value()))||(this._shouldContinueTaking=!1)};var p,b=E;function E(w,O){return w=p.call(this,w)||this,w._predicate=O,w._shouldContinueTaking=!0,w}e.TakeWhileEnumerable=b,g(C,A=r),C.prototype.copy=function(){return new C(this.source.copy(),this._otherSource.copy())},C.prototype.reset=function(){this.source.reset(),this._otherSource.reset(),this._isFirstSourceFinished=!1,this.currentValue.invalidate()},C.prototype.next=function(){this.currentValue.invalidate();var w=(this._isFirstSourceFinished?this._otherSource:this.source).next();return w||this._isFirstSourceFinished?w:(this._isFirstSourceFinished=!0,this.next())},C.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=(this._isFirstSourceFinished?this._otherSource:this.source).value()),this.currentValue.value};var A,L=C;function C(w,O){return w=A.call(this,w)||this,w._otherSource=O,w._isFirstSourceFinished=!1,w}e.ConcatEnumerable=L,g(U,M=r),U.prototype.copy=function(){return new U(this.source.copy(),this._keySelector)},U.prototype.reset=function(){M.prototype.reset.call(this),this._seen={primitive:{number:{},string:{},boolean:{}},complex:[]}},U.prototype.isUnique=function(w){var w=this._keySelector!==void 0?this._keySelector(w):w,O=typeof w;return O in this._seen.primitive?!this._seen.primitive[O].hasOwnProperty(w)&&(this._seen.primitive[O][w]=!0):this._seen.complex.indexOf(w)===-1&&-1<this._seen.complex.push(w)},U.prototype.next=function(){for(var w;(w=M.prototype.next.call(this))&&!this.isUnique(this.value()););return w};var M,T=U;function U(w,O){return w=M.call(this,w)||this,w._keySelector=O,w._seen={primitive:{number:{},string:{},boolean:{}},complex:[]},w}e.UniqueEnumerable=T,g(D,j=r),D.prototype.copy=function(){return new D(this.source.copy(),this._start,this._count)},D.prototype.reset=function(){j.prototype.reset.call(this),this._currentIndex=-1},D.prototype.isValidIndex=function(){var w=this._start!==void 0?this._start:0,O=this._count!==void 0?w+this._count:void 0;return this._currentIndex>=w&&(O===void 0||this._currentIndex<O)},D.prototype.performSkip=function(){for(var w=this._start!==void 0?this._start:0,O=!0;O&&this._currentIndex+1<w;)O=j.prototype.next.call(this),++this._currentIndex;return O},D.prototype.next=function(){return!(this._currentIndex<0&&!this.performSkip())&&(++this._currentIndex,j.prototype.next.call(this))&&this.isValidIndex()},D.prototype.value=function(){if(this.isValidIndex())return j.prototype.value.call(this);throw new Error("Out of bounds")};var j,W=D;function D(w,O,F){var R=this;if(O!==void 0&&O<0||F!==void 0&&F<0)throw new Error("Incorrect parameters");return(R=j.call(this,w)||this)._start=O,R._count=F,R._currentIndex=-1,R}e.RangeEnumerable=W,g(V,$=t),V.prototype.copy=function(){return new V(this.source.copy(),this._transform)},V.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._transform(this.source.value())),this._currentValue.value},V.prototype.reset=function(){$.prototype.reset.call(this),this._currentValue.invalidate()},V.prototype.next=function(){return this._currentValue.invalidate(),$.prototype.next.call(this)};var $,B=V;function V(w,O){return w=$.call(this,w)||this,w._transform=O,w._currentValue=new s.Cached,w}e.TransformEnumerable=B,g(k,de=r),k.prototype.copy=function(){return new k(this.source.copy())},k.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},k.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},k.prototype.all=function(w){return this.source.all(w)},k.prototype.any=function(w){return w!==void 0?this.source.any(w):this.source.any()},k.prototype.average=function(w){return this.source.average(w)},k.prototype.count=function(w){return w!==void 0?this.source.count(w):this.source.count()},k.prototype.max=function(w){return w!==void 0?this.source.max(w):this.source.max()},k.prototype.min=function(w){return w!==void 0?this.source.min(w):this.source.min()},k.prototype.reverse=function(){return this.source.copy()},k.prototype.sum=function(w){return this.source.sum(w)},k.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.source.toArray()),++this._currentIndex,this.isValidIndex()},k.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._elements.value.length-1-this._currentIndex];throw new Error("Out of bounds")};var de,xe=k;function k(w){return w=de.call(this,w)||this,w._elements=new s.Cached,w._currentIndex=-1,w}e.ReverseEnumerable=xe,g(x,wt=t),x.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},x.prototype.orderBy=function(w,O){return new x(this.source.copy(),l.createComparer(w,!0,O))},x.prototype.orderByDescending=function(w){return new x(this.source.copy(),l.createComparer(w,!1,void 0))},x.prototype.thenBy=function(w,O){return new x(this.source.copy(),l.combineComparers(this._comparer,l.createComparer(w,!0,O)))},x.prototype.thenByDescending=function(w){return new x(this.source.copy(),l.combineComparers(this._comparer,l.createComparer(w,!1,void 0)))},x.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},x.prototype.copy=function(){return new x(this.source.copy(),this._comparer)},x.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._currentIndex];throw new Error("Out of bounds")},x.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.toArray()),++this._currentIndex,this.isValidIndex()},x.prototype.toArray=function(){return this.source.toArray().sort(this._comparer)};var wt,Ne=x;function x(w,O){return w=wt.call(this,w)||this,w._comparer=O,w._elements=new s.Cached,w._currentIndex=-1,w}e.OrderedEnumerable=Ne,g(G,bt=r),G.prototype.toArray=function(){return this.list.toArray()},G.prototype.aggregate=function(w,O){return O!==void 0?this.list.aggregate(w,O):this.list.aggregate(w)},G.prototype.any=function(w){return w!==void 0?this.list.any(w):this.list.any()},G.prototype.all=function(w){return this.list.all(w)},G.prototype.average=function(w){return this.list.average(w)},G.prototype.count=function(w){return w!==void 0?this.list.count(w):this.list.count()},G.prototype.copy=function(){return new G(this.list.asArray())},G.prototype.elementAtOrDefault=function(w){return this.list.elementAtOrDefault(w)},G.prototype.firstOrDefault=function(w){return w!==void 0?this.list.firstOrDefault(w):this.list.firstOrDefault()},G.prototype.lastOrDefault=function(w){return w!==void 0?this.list.lastOrDefault(w):this.list.lastOrDefault()};var bt,z=G;function G(w){var O=bt.call(this,new c.ArrayIterator(w))||this;return O.list=new o.List(w),O}e.ArrayEnumerable=z,g(Q,Se=t),Q.prototype.copy=function(){return new Q(this.source.copy(),this._defaultValue)},Q.prototype.value=function(){return this._mustUseDefaultValue?this._defaultValue:this.source.value()},Q.prototype.next=function(){var w=Se.prototype.next.call(this);return this._mustUseDefaultValue=this._mustUseDefaultValue===void 0&&!w,this._mustUseDefaultValue||w},Q.prototype.reset=function(){Se.prototype.reset.call(this),this._mustUseDefaultValue=void 0};var Se,Et=Q;function Q(w,O){return w=Se.call(this,w)||this,w._mustUseDefaultValue=void 0,w._defaultValue=O,w}e.DefaultIfEmptyEnumerable=Et,g(Z,Oe=t),Z.prototype.copy=function(){return new Z(this.source.copy(),this._otherSource.copy(),this._selector)},Z.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._selector(this.source.value(),this._otherSource.value())),this._currentValue.value},Z.prototype.reset=function(){Oe.prototype.reset.call(this),this._otherSource.reset(),this._isOneOfTheSourcesFinished=!1,this._currentValue.invalidate()},Z.prototype.next=function(){return this._currentValue.invalidate(),this._isOneOfTheSourcesFinished||(this._isOneOfTheSourcesFinished=!Oe.prototype.next.call(this)||!this._otherSource.next()),!this._isOneOfTheSourcesFinished};var Oe,St=Z;function Z(w,O,F){return w=Oe.call(this,w)||this,w._otherSource=O,w._isOneOfTheSourcesFinished=!1,w._currentValue=new s.Cached,w._selector=F,w}e.ZippedEnumerable=St},{"./Collections":19,"./Comparers":20,"./Iterators":22,"./Utils":24}],22:[function(t,y,e){"use strict";function u(g){this.source=g,this.reset()}Object.defineProperty(e,"__esModule",{value:!0}),u.prototype.copy=function(){return new u(this.source)},u.prototype.reset=function(){this._index=-1},u.prototype.isValidIndex=function(){return 0<=this._index&&this._index<this.source.length},u.prototype.next=function(){return++this._index,this.isValidIndex()},u.prototype.value=function(){if(this.isValidIndex())return this.source[this._index];throw new Error("Out of bounds")},e.ArrayIterator=u},{}],23:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=t("./Enumerables"),u=(e.Enumerable=u.Enumerable,t("./Iterators")),u=(e.ArrayIterator=u.ArrayIterator,t("./Collections")),u=(e.List=u.List,e.Dictionary=u.Dictionary,e.Stack=u.Stack,t("./Comparers"));e.strictEqualityComparer=u.strictEqualityComparer},{"./Collections":19,"./Comparers":20,"./Enumerables":21,"./Iterators":22}],24:[function(t,y,e){"use strict";function u(){this._isValid=!1}Object.defineProperty(e,"__esModule",{value:!0}),u.prototype.invalidate=function(){this._isValid=!1},u.prototype.isValid=function(){return this._isValid},Object.defineProperty(u.prototype,"value",{get:function(){if(this._isValid)return this._value;throw new Error("Trying to get value of invalid cache")},set:function(g){this._value=g,this._isValid=!0},enumerable:!0,configurable:!0}),e.Cached=u},{}],25:[function(t,y,e){"use strict";var u=this&&this.__spreadArray||function(n,f,h){if(h||arguments.length===2)for(var m,i=0,v=f.length;i<v;i++)!m&&i in f||((m=m||Array.prototype.slice.call(f,0,i))[i]=f[i]);return n.concat(m||Array.prototype.slice.call(f))},g=(Object.defineProperty(e,"__esModule",{value:!0}),e.bf=e.credits=e.getPageAdUnit=e.getCachedRegistries=e.getSlotDetails=e.setModuleLoaded=e.isModuleLoaded=e.setModuleReady=e.isModuleReady=e.moduleStatuses=e.getRocketeerSlots=e.getRegisteredModules=e.getQueuedSlots=e.getPageSlots=e.getExcludedSlotIds=e.getDispatchedSlots=e.getBuiltSlots=e.version=e.registerModule=e.__VERSION__=e.registry=e.setOptions=e.addEvent=e.dispatchQueue=e.enableLazyLoad=e.setBulkTargeting=e.clearSlots=e.removeSlotLevelTarget=e.addSlotLevelTarget=e.removePageLevelTarget=e.addPageLevelTarget=e.queueRegistry=e.refresh=e.destroySlots=e.configure=void 0,t("./presets.js"),t("@turnercode/digital-ads-utilities/dist")),c=t("./processors"),l=t("./system"),o=t("linq-collections"),s=t("./system/MissionControl"),a=t("./version.json"),d=(r.prototype.fireAdFuelCreated=function(){var n=this,f=1500,h=setInterval(function(){if(document.readyState==="interactive"||document.readyState==="complete"){try{n.logger.log("Dispatching AdFuelCreated..."),document.dispatchEvent(new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}}))}catch(m){n.logger.error("Error dispatching AdFuelCreated",m)}clearInterval(h)}else f<1&&clearInterval(h);f--},1)},r.createInstance=function(){this._instance=new r,window.AdFuel=this._instance,(n=this._instance.logger)!=null&&n.warn("New AdFuel instance created.",this._instance.adFuelOptions);var n=Object.assign(l.BaseAdFuelOptions,(n=JSON.parse(JSON.stringify(this._instance.adFuelOptions)))!=null?n:{});this._instance.adFuelOptions=n,this.processLoadedModules()},r.processLoadedModules=function(){if(window.AdFuelModules){for(var n=0,f=window.AdFuelModules;n<f.length;n++){var h=f[n];this._instance.perf.addMark("Registering Module - ".concat(h.MODULE_NAME)),this._instance.registerModule(h)}window.AdFuelModules=void 0}},Object.defineProperty(r,"instance",{get:function(){var n,f=this;return(n=window.WM)!=null&&n.UserConsent&&window.WM.UserConsent.isReady()?window.WM.UserConsent.getRegion()!=="ccpa"&&window.WM.UserConsent.getRegion()==="gdpr"?this._instance||(window.WM.UserConsent.isOneTrustLoaded()?window.WM.UserConsent.getUserConsentAdvertisingState()?this.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions."):(document.addEventListener("oneTrustLoaded",function(){var h;((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getUserConsentAdvertisingState())?f.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions.")}),document.addEventListener("oneTrustFailed",function(){console.warn("Unable to create new instance of AdFuel due to OneTrust load failure.")}),document.addEventListener("oneTrustBlocked",function(){console.warn("Unable to create new instance of AdFuel due to OneTrust load blocking.")}))):this._instance||this.createInstance():(n=window.WM)!=null&&n.UserConsent||this._instance||(console.warn("No User Consent.  Assuming consent is granted.  User Location switching will be unavailble."),this.createInstance()),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"missionControl",{get:function(){return this._missionControl},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"moduleManager",{get:function(){return this._moduleManager},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"adFuelOptions",{get:function(){var n;return(n=(n=window.AdFuelOptions)==null?void 0:n.ADFUEL)!=null?n:l.BaseAdFuelOptions},set:function(n){window.AdFuelOptions?window.AdFuelOptions.ADFUEL=n:window.AdFuelOptions={ADFUEL:n,USER_CONSENT:{ENABLED:!0}}},enumerable:!1,configurable:!0}),r.prototype.configure=function(n){var f=this;return typeof n=="string"?fetch(n).then(function(h){f.ingestOptions(h.json())}):this.ingestOptions(n),this},r.prototype.ingestOptions=function(n){if("ADFUEL"in n)for(var f in window.AdFuelOptions||(window.AdFuelOptions={ADFUEL:{},USER_CONSENT:{ENABLED:!0}}),n)window.AdFuelOptions&&f in window.AdFuelOptions?Object.assign(window.AdFuelOptions[f],n[f]):window.AdFuelOptions[f]=n[f];else this.adFuelOptions=Object.assign(this.adFuelOptions,n)},Object.defineProperty(r.prototype,"registryOptions",{get:function(){return this._registryOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"perf",{get:function(){return this._perf},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ver",{get:function(){return this._version.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fetchedRegistries",{get:function(){return this._registryLoader.fetchedRegistries},enumerable:!1,configurable:!0}),r.prototype.lastProcessed=function(){var n;return 0<this.processedData.count()?(n=this.processedData.max(function(f){return f.value.timestamp}),this.processedData.first(function(f){return f.value.timestamp===n}).value):new l.GptProcessData},r.prototype.undispatched=function(){return 0<this.processedData.count()?this.processedData.select(function(n){return n.value}).where(function(n){return!n.dispatched}).where(function(n){var f=!1;return n.wrappedSlots.forEach(function(h){f=f||!!h.gSlot}),f}).toArray():[]},r.prototype.isModuleReady=function(n){return(n=this.registeredModules.get(n).isReady)!=null&&n},r.prototype.setModuleReady=function(n){this.logger.info("Module ".concat(n," is reporting ready.")),this.perf.addMark("Module ".concat(n," is ready.")),this.registeredModules.containsKey(n)?this.registeredModules.get(n).isReady=!0:this.registeredModules.setOrUpdate(n,{moduleName:n,isLoaded:!0,isReady:!0,unWrappedModule:void 0}),this._moduleManager.areAllModulesReady&&this._moduleManager.areAllExpectedModulesLoaded&&this._missionControl.setReady({readyId:"modules"})},r.prototype.isModuleLoaded=function(n){return(n=this.registeredModules.get(n).isLoaded)!=null&&n},r.prototype.setModuleLoaded=function(n){this.logger.log("Module ".concat(n," is reporting loaded.")),this.perf.addMark("Module ".concat(n," is loaded.")),this.registeredModules.containsKey(n)?this.registeredModules.get(n).isLoaded=!0:this.registeredModules.setOrUpdate(n,{moduleName:n,isLoaded:!1,isReady:!1,unWrappedModule:void 0})},r.prototype.queueRegistry=function(n,f){f===void 0&&(f={dispatch:this.adFuelOptions.AUTO_DISPATCH||!0}),(h=this.logger)!=null&&h.info("[queueRegistry] Queueing registry...",n,f),this.perf.addMark("Queueing Registry START"),this._initialRequestComplete=0<this.processedData.count(),f.slots&&(f.slots=Array.isArray(f.slots)?f.slots:[f.slots]),f.exclude&&(f.exclude=Array.isArray(f.exclude)?f.exclude:[f.exclude]),this._registryOptions=f,h=Array.isArray(n)?{registry:n}:n;var h,f=Object.assign({},this.adFuelOptions,f);return h.registry?this._registryLoader.loadRegistryFromJson(h.registry,f):this._registryLoader.loadRegistryFromUrl(n,f),this},r.prototype.flushCmdQueue=function(){for(this.logger.log("Flushing command",this._cmdQueue.length);0<this._cmdQueue.length;){var n=this._cmdQueue.shift();n&&(n(),this.logger.log("Command flushed."))}},r.prototype.dispatchQueue=function(n){var f=this;return n===void 0&&(n={}),this.undispatched().forEach(function(h){f.logger.log("[dispatchQueue] Dispatching Data: ",h),f._requestProcessor.dispatch(h)}),this},r.prototype.destroySlots=function(n){var f,h,m=this,i=(n?Array.isArray(n)||(n=[n]):n=[],this.logger.log("[ADFUEL] START ---------- destroySlots::slotsToDestroy:",n),new Set),v=[],_=[];if(0<n.length){if(this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::Searching registries for matching candidates..."),this.processedData.getValues().forEach(function(p){v=Array.from(new Set(v.concat(p.wrappedSlots.where(function(b){return n!==void 0&&(n==null?void 0:n.includes(b.slotId))&&b.isBuilt}).toArray())))}),0<v.length)try{this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - RegistrySlotWrappers...",v),_=((h=(f=window.googletag)==null?void 0:f.pubads().getSlots())==null?void 0:h.map(function(p){if(m.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - Googletag Slot:",p.getSlotElementId()),n!=null&&n.includes(p.getSlotElementId()))return p}).filter(function(p){return p!=null}))||[],this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - GoogleTag Candidates",_),_.forEach(function(p){p&&i.add(p)})}catch(p){this.logger.error("There was an error in DestroySlots.",p)}else this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - registrySlotWrappers array was empty.");this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::FINAL CANDIDATES:",i)}else this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Getting all built slots..."),this.processedData.getValues().forEach(function(p){v=v.concat(p.wrappedSlots.where(function(b){return b.isBuilt}).toArray())}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Registry Slot Wrappers:",v),(typeof((f=window.googletag)==null?void 0:f.pubads)=="function"?(h=window.googletag)==null?void 0:h.pubads().getSlots():[]).forEach(function(p){i.add(p)}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::CANDIDATES:",i);return 0<n.length&&v.length!==n.length?this.logger.warn("Slot numbers do not match. Not destroying slots: ",v,n):(this.logger.log("[ADFUEL] ---------- destroySlots::Matching Registry Slot Wrappers: ",v),v.forEach(function(p){m.logger.log("[ADFUEL] ---------- destroySlots::Clearing GSlot from Wrapper: ",p),m.perf.addMark("Destroying Slot ".concat(p.slotId)),p.gSlot=void 0}),this.logger.log("[ADFUEL] ---------- destroySlots::Updated Registry Slot Wrappers: ",{registrySlotWrappers:v}),this.logger.log("[ADFUEL] ---------- destroySlots::handoffToSlotProcessor:",i),this._slotProcessor.destroySlots(Array.from(i)),Array.from(document.getElementsByClassName("adfuel-rendered")).forEach(function(p){(n!=null&&n.includes(p.id)||(n==null?void 0:n.length)===0)&&(m.logger.log("[ADFUEL] ---------- DestroySlots::Removing Class from Element:",p),p.classList.remove("adfuel-rendered"))})),this},r.prototype.addPageLevelTarget=function(n,f){return f=Array.isArray(f)?f:[f],this._targetProcessor.addPageLevelTargets(n,f),this.logger.log("Adding page level target ".concat(n)),this.perf.addMark("Adding Page-Level Target - ".concat(n)),this},r.prototype.removePageLevelTarget=function(n,f){var h=[];return f&&(h=Array.isArray(f)?f:[f]),this._targetProcessor.removePageLevelTargets(n,h),this.perf.addMark("Removing Page-Level Target - ".concat(n)),this},r.prototype.addSlotLevelTarget=function(n,f,h){var m=Array.isArray(h)?h:[h];return this._targetProcessor.addSlotLevelTargets(n,f,m),this.logger.log("Adding slot-level target slotId: ".concat(n,", targetKey: ").concat(f),h),this.perf.addMark("Adding Slot-Level Target - ".concat(f)),this},r.prototype.removeSlotLevelTarget=function(n,f,h){var m=[];return h&&(m=Array.isArray(h)?h:[h]),this._targetProcessor.removeSlotLevelTargets(n,f,m),this.perf.addMark("Removing Slot-Level Target - ".concat(f)),this},r.prototype.registerModule=function(n){return this.logger.info("Registering module: ".concat(n.MODULE_NAME,".")),this.perf.addMark("Registering Module - ".concat(n.MODULE_NAME)),this._moduleManager.registerModule(n),this},r.prototype.moduleStatuses=function(){var n=[];return this.registeredModules.forEach(function(f){n.push({name:f.value.moduleName,isReady:f.value.isReady,isLoaded:f.value.isLoaded})}),n},r.prototype.getSlotsForRefresh=function(n){var f,h=[];if(0<(n=n===void 0?[]:n).length)for(var m=this,i=0,v=n;i<v.length;i++)(function(p){var b=(f=m.processedData.firstOrDefault(function(E){return E.value.wrappedSlots.any(function(A){return p.includes(A.slotId)&&A.isBuilt})}))==null?void 0:f.value.wrappedSlots.firstOrDefault(function(E){return p.includes(E.slotId)&&E.isBuilt});b&&h.push(b)})(v[i]);else{var _=[];this.processedData.where(function(p){return p.value.wrappedSlots.any(function(b){return b.isBuilt})}).forEach(function(p){_.concat(p.value.wrappedSlots.where(function(b){return b.isBuilt}).toArray())}),_&&h.concat(_)}return h},r.prototype.refresh=function(n,f){var h=this,m=(f===void 0&&(f=0),this.moduleManager.callPreRefresh(this.lastProcessed().wrappedSlots),new o.List),m=n&&!["ALL","all","*","All"].includes(n)?(Array.isArray(n)||(n=[n]),new o.List(this.getSlotsForRefresh(n))):new o.List(this.lastProcessed().wrappedSlots.toArray());return this.lastProcessed().wrappedSlots?(n=function(){var i;0<m.count()&&0<f?(i=setInterval(function(){h._requestProcessor.refresh(m),h.moduleManager.callPostRefresh(m)},1e3*f),m.forEach(function(v){h._refreshers.containsKey(v.slotId)&&clearInterval(h._refreshers.get(v.slotId)),h._refreshers.setOrUpdate(v.slotId,i)})):0<m.count()&&f===0?h._requestProcessor.refresh(m):h.logger.warn("There is nothing to refresh.",m)},this._initialRequestComplete?n():this._waitingFunctions.push(n)):(n=this.logger)!=null&&n.warn("There are no slots defined. Has the registry been loaded?"),this},r.prototype.waitFor=function(n){return this.missionControl.register({readyId:n}),this},r.prototype.makeReady=function(n){return this.missionControl.setReady({readyId:n}),this},r.prototype.version=function(){return this._version},r.prototype.getBuiltSlots=function(){var n=[];return this.processedData.forEach(function(f){f.value.wrappedSlots.any(function(h){return h.isBuilt})&&n.push({timeStamp:f.value.timestamp,slots:f.value.wrappedSlots.where(function(h){return h.isBuilt}).toArray()})}),n},r.prototype.getDispatchedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(n){return n.hasBeenDisplayed}).toArray()},r.prototype.getExcludedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(n){return n.isExcluded}).toArray()},r.prototype.getPageSlots=function(){return this.lastProcessed().wrappedSlots.where(function(n){return n.isBuilt}).select(function(n){return n.gSlot}).toArray()},r.prototype.getQueuedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(n){return!n.isBuilt}).toArray()},r.prototype.getRegisteredModules=function(){return this.registeredModules.select(function(n){return n.value.unWrappedModule}).toArray()},r.prototype.getRocketeerSlots=function(){return this._registry.slots},r.prototype.getPageAdUnit=function(){return this._pageAdUnit},Object.defineProperty(r.prototype,"pageAdUnit",{get:function(){return this._pageAdUnit},set:function(n){this._pageAdUnit=n},enumerable:!1,configurable:!0}),r.prototype.clearSlots=function(n){return this._slotProcessor.clearSlots(n),this},r.prototype.setBulkTargeting=function(n){return this._targetProcessor.setBulkTargeting(n),this},r.prototype.enableLazyLoad=function(n){return n.fetch=n.fetch||500,n.render=n.render||200,n.scaling=n.scaling||2,this.perf.addMark("Enabling Lazy Load"),this.logger.log("#################### Enabling Lazy Load"),this._googleApi.enableLazyLoad(n),this},r.prototype.getSlotDetails=function(n){var f,h=this.lastProcessed().wrappedSlots.firstOrDefault(function(m){return m.slotId===n});if(h)return{adUnitPath:(f=(f=h.gSlot)==null?void 0:f.getAdUnitPath())!=null?f:"UNKNOWN",slotTargeting:h.targeting,programmatic:h.programmatic,response:(f=h.gSlot)==null?void 0:f.getResponseInformation()};this.logger.log("Couldn't find details for slot: ".concat(n))},r.prototype.getCachedRegistries=function(){var n=new Map;return this.processedData.forEach(function(f){n.set(f.value.url,u([f.value.registry],f.value.registry.slots,!0))}),n},r);function r(){var n=this;this._version=new g.Version(a.major,a.minor,a.revision,a.family),this._googleApi=new l.GoogleApi(this),this._missionControl=new s.MissionControl(this,this._googleApi),this._requestProcessor=new c.RequestProcessor(this,void 0,this._googleApi),this._moduleManager=new l.ModuleManager(this),this._targetProcessor=new c.TargetProcessor(this,this._googleApi,this._requestProcessor),this._slotProcessor=new c.SlotProcessor(this,this._targetProcessor,this._googleApi),this._queueDispatched=!1,this._pageAdUnit="",this._initialRequestComplete=!1,this._waitingFunctions=[],this._refreshers=new o.Dictionary,this.processedData=new o.Dictionary,this._cmdQueue=[],this.registeredModules=new o.Dictionary,this._logger=new g.Logger("AdFuel TS",this._version.toString(),"adfuel","color: #4f86f7; padding: 2px"),this._perf=new g.Performance("ADFUEL TS"),this._gptScriptLoader=new l.GptScriptLoader(this.missionControl,this._logger),this._registryLoader=new l.RegistryLoader(this),this._overlayLoader=new l.OverlayLoader(this),this._gptScriptLoader.loadScript().then(function(){n._googleApi.flushCmdQueue()}),this._missionControl.firstProcessor=this._slotProcessor,this._perf.addMark("AdFuel Load END"),this._perf.addMeasure("AdFuel Load"),this.fireAdFuelCreated(),this._overlayLoader.startConsoleTool(),document.addEventListener("AdFuelRequestComplete",function(){n._initialRequestComplete=!0,n._waitingFunctions.forEach(function(f){f()}),n._waitingFunctions=[]}),window.addEventListener("load",function(){var f,h;n.logger.log("[window.load] Load fired:  AUTO_DISPATCH: ".concat(n.adFuelOptions.AUTO_DISPATCH," queueDispatched: ").concat(n._queueDispatched)),n.adFuelOptions.AUTO_DISPATCH||n._queueDispatched?n.adFuelOptions.AUTO_DISPATCH&&(n.dispatchQueue(),f=1,h=setInterval(function(){0<n.undispatched().length&&(n.logger.warn("[window.load] AdFuel is configured to automatically dispatch the queue on window.load but ".concat(100*f," milliseconds later and there are slots that still are not dispatched.")),n.logger.warn("[window.load] Undispatched: ",n.undispatched()),n.dispatchQueue()),5e3<100*f&&clearInterval(h),f++},100)):n.logger.error("[window.load] AdFuel is not configured to automatically dispatch the queue and the user's code never called AdFuel.dispatchQueue().")}),this.perf.addMark("AdFuel Created")}window.AdFuel=d.instance,e.configure=function(n){return d.instance.configure(n)},e.destroySlots=function(n){return d.instance.destroySlots(n=n===void 0?[]:n)},e.refresh=function(n,f){return d.instance.refresh(n,f)},e.queueRegistry=function(n,f){return d.instance.queueRegistry(n,f)},e.addPageLevelTarget=function(n,f){return d.instance.addPageLevelTarget(n,f)},e.removePageLevelTarget=function(n,f){return d.instance.removePageLevelTarget(n,f)},e.addSlotLevelTarget=function(n,f,h){return d.instance.addSlotLevelTarget(n,f,h)},e.removeSlotLevelTarget=function(n,f,h){return d.instance.removeSlotLevelTarget(n,f,h)},e.clearSlots=function(n){return d.instance.clearSlots(n=n===void 0?[]:n)},e.setBulkTargeting=function(n){return d.instance.setBulkTargeting(n)},e.enableLazyLoad=function(n){return d.instance.enableLazyLoad(n)},e.dispatchQueue=function(n){return d.instance.dispatchQueue(n)},e.addEvent=function(n,f,h){var m="background: red;color:white;",i="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",m,i),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",m,i),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",m,i),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",m,i),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",m,i),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",m,i),console.error("%c *** use addEventListener() instead.                         *** %c",m,i),console.error("%c *** No event was added                                      *** %c",m,i)},e.setOptions=function(){var n="background: red;color:white;",f="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",n,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",n,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",n,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",n,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",n,f),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",n,f),console.error("%c *** No options were set                                     *** %c",n,f)},e.registry={push:function(n,f){console.warn("%c *** This functionality will be removed in future releases. Instead of 'registry.push()', please use AdFuel.queueRegistry() *** %c","background: orange;color:white;","background: inherit;color:inherit;"),d.instance.queueRegistry(n,f)}},e.__VERSION__=function(){return d.instance.version().toString()},e.registerModule=function(n){return d.instance.registerModule(n)},e.version=function(){return d.instance.version()},e.getBuiltSlots=function(){return d.instance.getBuiltSlots()},e.getDispatchedSlots=function(){return d.instance.getDispatchedSlots()},e.getExcludedSlotIds=function(){return d.instance.getExcludedSlots()},e.getPageSlots=function(){return d.instance.getPageSlots()},e.getQueuedSlots=function(){return d.instance.getQueuedSlots()},e.getRegisteredModules=function(){return d.instance.getRegisteredModules()},e.getRocketeerSlots=function(){return d.instance.getRocketeerSlots()},e.moduleStatuses=function(){return d.instance.moduleStatuses()},e.isModuleReady=function(n){return d.instance.isModuleReady(n)},e.setModuleReady=function(n){d.instance.setModuleReady(n)},e.isModuleLoaded=function(n){return d.instance.isModuleLoaded(n)},e.setModuleLoaded=function(n){d.instance.setModuleLoaded(n)},e.getSlotDetails=function(n){return d.instance.getSlotDetails(n)},e.getCachedRegistries=function(){return d.instance.getCachedRegistries()},e.getPageAdUnit=function(){return d.instance.getPageAdUnit()},e.credits=function(){var n=`

          \u2591\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557
          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2557\u2591
          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2588\u2588\u2557
          \u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D
          \u255A\u2550\u255D\u2591\u2591\u255A\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591
          =====================================================================
          Version: `.concat(d.instance.version().toString(),`
          Developed by: 
            Joe Lazarski
            Steve Trofemuk

          Serve ads or die trying!
  `);console.log(n)},e.bf=function(){console.info(`
  ++++++++++[>+>+++>+++++++>++++++++++<<<<-]>>>>--.+++++++++++++++++++++++.<<++.>+++++++++++++.>-----.---------------.
  +++++++++++++++++.-----------------.<<.>+.>+++++++++++++.---.---------.-.++++++++.++++++++.----------.>++++++++++.
  `)}},{"./presets.js":26,"./processors":30,"./system":45,"./system/MissionControl":36,"./version.json":46,"@turnercode/digital-ads-utilities/dist":11,"linq-collections":23}],26:[function(t,y,e){"use strict";window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]},{}],27:[function(t,y,e){"use strict";var u=this&&this.__awaiter||function(o,s,a,d){return new(a=a||Promise)(function(r,n){function f(i){try{m(d.next(i))}catch(v){n(v)}}function h(i){try{m(d.throw(i))}catch(v){n(v)}}function m(i){var v;i.done?r(i.value):((v=i.value)instanceof a?v:new a(function(_){_(v)})).then(f,h)}m((d=d.apply(o,s||[])).next())})},g=this&&this.__generator||function(o,s){var a,d,r,n={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},f={next:h(0),throw:h(1),return:h(2)};return typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(m){return function(i){var v=[m,i];if(a)throw new TypeError("Generator is already executing.");for(;n=f&&v[f=0]?0:n;)try{if(a=1,d&&(r=2&v[0]?d.return:v[0]?d.throw||((r=d.return)&&r.call(d),0):d.next)&&!(r=r.call(d,v[1])).done)return r;switch(d=0,(v=r?[2&v[0],r.value]:v)[0]){case 0:case 1:r=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,d=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(!(r=0<(r=n.trys).length&&r[r.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!r||v[1]>r[0]&&v[1]<r[3]))n.label=v[1];else if(v[0]===6&&n.label<r[1])n.label=r[1],r=v;else{if(!(r&&n.label<r[2])){r[2]&&n.ops.pop(),n.trys.pop();continue}n.label=r[2],n.ops.push(v)}}v=s.call(o,n)}catch(_){v=[6,_],d=0}finally{a=r=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.RequestProcessor=void 0,t("@turnercode/digital-ads-utilities"));function l(o,s,a){this.adFuel=o,this.nextProcessor=s,this.googleApi=a}l.prototype.process=function(o){var s=this;return new Promise(function(a,d){return u(s,void 0,void 0,function(){var r,n=this;return g(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),(r=this.adFuel.logger)!=null&&r.log(" ### START Request Processor ====",o.wrappedSlots.select(function(h){return h.toLogging()}).toArray(),o.options),(r=this.adFuel.perf)!=null&&r.addMark("Processing Request START"),[4,(r=this.googleApi)==null?void 0:r.configurePubAds().then(function(){return u(n,void 0,void 0,function(){var h,m;return g(this,function(i){switch(i.label){case 0:return(o.options.dispatch!==void 0?o.options.dispatch:o.options.AUTO_DISPATCH)&&((h=this.adFuel.logger)!=null&&h.info("RequestProcessor.process is calling Dispatch",o),o.wrappedSlots.where(function(v){return!v.hasBeenDisplayed&&v.isBuilt&&!v.isExcluded}).toList(),this.dispatch(o)),(h=this.adFuel.perf)!=null&&h.addMark("Processing Request END"),(m=this.adFuel.perf)!=null&&m.addMeasure("Processing Request"),(m=this.adFuel.logger)!=null&&m.log("========== [RequestProcessor/process] CALLING POST DISPATCH =========="),[4,this.adFuel.moduleManager.callPostDispatch(o.wrappedSlots)];case 1:return i.sent(),(m=this.adFuel.logger)!=null&&m.log(" ### STOP Request Processor ====",o.wrappedSlots.select(function(v){return v.toLogging()}).toArray(),o.options),this.nextProcessor?a(this.nextProcessor.process(o)):a(o),[2]}})})})];case 1:return f.sent(),[3,3];case 2:return r=f.sent(),d(r),[3,3];case 3:return[2]}})})})},l.prototype.dispatch=function(o){var s,a;return u(this,void 0,void 0,function(){var d,r,n=this;return g(this,function(f){return 0<(d=o.wrappedSlots.where(function(h){return!h.hasBeenDisplayed&&h.isBuilt&&!h.isExcluded}).toList()).count()?(o.dispatched=!0,(s=this.adFuel.logger)!=null&&s.log("[RequestProcessor - dispatch] Setting dispatched to true",o),this.adFuel.processedData.setOrUpdate(o.timestamp,o),(s=this.adFuel.logger)!=null&&s.log("========== [RequestProcessor/dispatch] CALLING PRE DISPATCH =========="),this.adFuel.moduleManager.callPreDispatch(d).then(function(){var h;try{document.dispatchEvent(new CustomEvent("PreDispatchComplete",{detail:{slots:d.count()}}))}catch(m){(h=n.adFuel.logger)!=null&&h.error("Error dispatching custom event: PreDispatchComplete",{error:m})}n.buildGPTObject(o),d.forEach(function(m){var i;(i=n.adFuel.perf)!=null&&i.addMark("[".concat(m.slotId,"] Slot Displayed With Googletag")),googletag.display(m.gSlot),m.hasBeenDisplayed=!0}),(h=n.googleApi)!=null&&h.refreshSlots(d,{dispatch:!0}),(h=n.adFuel.logger)!=null&&h.log("========== [RequestProcessor/dispatch] CALLING POST DISPATCH =========="),n.adFuel.moduleManager.callPostDispatch(d),document.dispatchEvent(new CustomEvent("AdFuelRequestComplete",{detail:{slots:d.select(function(m){return m.unWrappedSlot}).toArray(),options:n.adFuel.registryOptions}}))})):(s=this.adFuel.logger)!=null&&s.log("No slots to dispatch."),r={slotsBuilt:o.wrappedSlots.where(function(h){return h.hasBeenDisplayed&&!h.isExcluded}).toArray(),registry:o.registry,optionsUsed:o.options},window.AdFuelHistory||((a=this.adFuel.logger)!=null&&a.log("Creating AdFuelHistory"),window.AdFuelHistory=[]),(a=this.adFuel.logger)!=null&&a.log("Adding to AdFuelHistory",r),window.AdFuelHistory.push(r),[2]})})},l.prototype.refresh=function(o,s,a){var d;return s===void 0&&(s=!0),a===void 0&&(a=!0),u(this,void 0,void 0,function(){return g(this,function(r){switch(r.label){case 0:return(d=this.adFuel.perf)!=null&&d.addMark("Refresh Called..."),(d=this.adFuel.logger)!=null&&d.log("Refreshing slots",o.select(function(n){return n.toLogging()}).toArray()),s?[4,this.adFuel.moduleManager.callPreRefresh(o)]:[3,2];case 1:r.sent(),r.label=2;case 2:return(d=this.googleApi)!=null&&d.refreshSlots(o,this.adFuel.registryOptions),a?[4,this.adFuel.moduleManager.callPostRefresh(o)]:[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}})})},l.prototype.buildGPTObject=function(o){var s,a,d,r=c.CookieHelper.readCookie("gptgeo");r?(d=r.split("%2C"),a=parseFloat(d[0]),d=parseFloat(d[1]),(s=this.googleApi)!=null&&s.setLocation(a,d),o.registry.child_directed_treatment&&(s=this.googleApi)!=null&&s.setChildDirectedTreatmentTag(o.registry.child_directed_treatment),o.registry.safeframe_config&&((a=this.adFuel.logger)!=null&&a.log("Setting SafeFrame config tag: ",o.registry.safeframe_config),(d=this.googleApi)!=null)&&d.setSafeFrameConfig(o.registry.safeframe_config)):(s=this.adFuel.logger)!=null&&s.log("Unable to retrieve location cookie",r)},e.RequestProcessor=l},{"@turnercode/digital-ads-utilities":11}],28:[function(t,y,e){"use strict";var u=this&&this.__awaiter||function(s,a,d,r){return new(d=d||Promise)(function(n,f){function h(v){try{i(r.next(v))}catch(_){f(_)}}function m(v){try{i(r.throw(v))}catch(_){f(_)}}function i(v){var _;v.done?n(v.value):((_=v.value)instanceof d?_:new d(function(p){p(_)})).then(h,m)}i((r=r.apply(s,a||[])).next())})},g=this&&this.__generator||function(s,a){var d,r,n,f={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},h={next:m(0),throw:m(1),return:m(2)};return typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(i){return function(v){var _=[i,v];if(d)throw new TypeError("Generator is already executing.");for(;f=h&&_[h=0]?0:f;)try{if(d=1,r&&(n=2&_[0]?r.return:_[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,_[1])).done)return n;switch(r=0,(_=n?[2&_[0],n.value]:_)[0]){case 0:case 1:n=_;break;case 4:return f.label++,{value:_[1],done:!1};case 5:f.label++,r=_[1],_=[0];continue;case 7:_=f.ops.pop(),f.trys.pop();continue;default:if(!(n=0<(n=f.trys).length&&n[n.length-1])&&(_[0]===6||_[0]===2)){f=0;continue}if(_[0]===3&&(!n||_[1]>n[0]&&_[1]<n[3]))f.label=_[1];else if(_[0]===6&&f.label<n[1])f.label=n[1],n=_;else{if(!(n&&f.label<n[2])){n[2]&&f.ops.pop(),f.trys.pop();continue}f.label=n[2],f.ops.push(_)}}_=a.call(s,f)}catch(p){_=[6,p],r=0}finally{d=n=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.SlotProcessor=void 0,t("../system")),l=t("linq-collections");function o(s,a,d){d===void 0&&(d=new c.GoogleApi(s)),this.adFuel=s,this.nextProcessor=a,this.googleApi=d}o.prototype.process=function(s){var a=this;return new Promise(function(d,r){return u(a,void 0,void 0,function(){var n,f,h,m,i=this;return g(this,function(v){switch(v.label){case 0:return v.trys.push([0,3,,4]),(n=this.adFuel.logger)!=null&&n.info("Entering SlotProcessor.Process()"),(n=this.adFuel.perf)!=null&&n.addMark("SlotProcessor.Process() START"),n=s.wrappedSlots.select(function(_){return _.toLogging()}).toArray(),(f=this.adFuel.logger)!=null&&f.log(" ### START Slot Processor ====",n,s.options),s.wrappedSlots.forEach(function(_){var p;(p=i.adFuel.perf)!=null&&p.addMark("[".concat(_.slotId,"] SlotProcessor.Process()"))}),(f=this.adFuel.logger)!=null&&f.log(" #################### Building Slots: ",s),this.buildSlots(s),[4,this.adFuel.moduleManager.callPostQueue(s.wrappedSlots)];case 1:return v.sent(),(f=this.adFuel.logger)!=null&&f.log(" ### STOP Slot Processor ====",n,s.options),(h=this.adFuel.logger)!=null&&h.log("========== [slotProcessor/process] CALLING PRE DISPATCH =========="),[4,this.adFuel.moduleManager.callPreDispatch(s.wrappedSlots)];case 2:return v.sent(),(h=this.adFuel.perf)!=null&&h.addMark("SlotProcessor.Process() END"),(m=this.adFuel.perf)!=null&&m.addMeasure("SlotProcessor.Process()"),this.nextProcessor?d((m=this.nextProcessor)==null?void 0:m.process(s)):d(s),[3,4];case 3:return m=v.sent(),r(m),[3,4];case 4:return[2]}})})})},o.prototype.buildSlots=function(s){var a,d=this,r=((r=this.adFuel.logger)!=null&&r.log("#################### Wrapped Slots: ",s.wrappedSlots.toArray()),s.wrappedSlots.where(function(n){return!n.isBuilt&&!n.hasBeenDisplayed&&n.slotExistsOnPage&&!n.isExcluded}));(a=this.adFuel.logger)!=null&&a.log("#################### Filtered Slots: ",r.toArray()),r.forEach(function(n){var f,h=d.adFuel.processedData.where(function(m){return m.value.url===s.url}).select(function(m){return(m=m.value.wrappedSlots.firstOrDefault(function(i){return i.isBuilt&&i.slotId===n.slotId}))==null?void 0:m.gSlot}).toArray();0<h.length&&h[0]!==void 0&&(f=d.adFuel.logger)!=null&&f.info("#################### Found historic gslot for ".concat(n.slotId),h)}),(a=this.adFuel.logger)!=null&&a.info("Building these slots: ",r.select(function(n){return n.toLogging()}).toArray()),r.where(function(n){return!n.isBuilt}).forEach(function(n){var f;(f=d.adFuel.logger)!=null&&f.info("Building slot for ".concat(n.slotId)),d.buildSlot(n),d.setResponsive(n),n.unWrappedSlot.safeframe_config&&d.googleApi.setSlotSafeFrameConfig(n.gSlot,n.unWrappedSlot.safeframe_config)})},o.prototype.buildSlot=function(s){(a=this.adFuel.logger)!=null&&a.log("Wrapped Slot: ",s);var a="/".concat(this.adFuel.adFuelOptions.NETWORK_ID,"/").concat(s.adUnitMap||s.unWrappedSlot.rktr_ad_id),d=s.slotId,r=((r=this.adFuel.perf)!=null&&r.addMark("Building Slot [".concat(s.slotId,"] adPath ").concat(a," START")),s=this.getSlotIfAlreadyProcessed(s),document.getElementById(s.slotId));if(r!=null&&r.className.includes("adfuel-rendered"))(r=this.adFuel.logger)!=null&&r.warn("".concat(s.slotId," element has already been rendered."));else if(s.isBuilt)(r=this.adFuel.logger)!=null&&r.log("You are trying to build ".concat(s.slotId," but it already exists in processedData."),s);else if(s.isOutOfPage)s.gSlot=this.googleApi.defineOutOfPageSlot(a,d);else{(r=this.adFuel.logger)!=null&&r.log("Defining slot for ".concat(s.slotId),s);try{s.gSlot=this.googleApi.defineSlot(a,s.unWrappedSlot.sizes,d)}catch(n){(r=this.adFuel.logger)!=null&&r.error("Error defining slot: ",n)}(d=this.adFuel.logger)!=null&&d.log("Slot built!",s)}(r=this.adFuel.perf)!=null&&r.addMark("Building Slot [".concat(s.slotId,"] adPath ").concat(a," END")),(d=this.adFuel.perf)!=null&&d.addMeasure("Building Slot [".concat(s.slotId,"] adPath ").concat(a))},o.prototype.getSlotIfAlreadyProcessed=function(s){var a=(a=this.adFuel.processedData.firstOrDefault(function(d){return d.value.wrappedSlots.any(function(r){return r.slotId===s.slotId&&r.isBuilt})}))==null?void 0:a.value.wrappedSlots.firstOrDefault(function(d){return d.slotId===s.slotId&&d.isBuilt});return s=a!=null?a:s},o.prototype.setResponsive=function(s){var a;s.isBuilt&&((a=this.adFuel.perf)!=null&&a.addMark("Setting Responsive Mapping [".concat(s.slotId,"]")),this.googleApi.defineSlotSizeMapping(s.gSlot,s.unWrappedSlot.responsive))},o.prototype.changeSlotId=function(s,a){var d=s.slotId.slice();s.unWrappedSlot.rktr_slot_id=a;try{document.dispatchEvent(new CustomEvent("SlotIdChange",{detail:{asset:s.unWrappedSlot,originalId:d,newId:a}}))}catch(r){(s=this.adFuel.logger)!=null&&s.error("Error dispatching SlotIdChange event.",r)}},o.prototype.destroySlots=function(s){var a;s===void 0&&(s=[]),(a=this.adFuel.logger)!=null&&a.log("[SLOT PROCESSOR] START ---------- destroySlots::slotsToDestroy:",s),(a=this.adFuel.perf)!=null&&a.addMark("Destroying Slots [".concat(JSON.stringify(s.map(function(d){return d.getSlotElementId()})),"]")),(a=this.adFuel.logger)!=null&&a.log("[SLOT PROCESSOR] ---------- destroySlots::handoffToGoogleAPI:",s),this.googleApi.destroySlots(s)},o.prototype.clearSlots=function(s){var a=this;this.googleApi.executeWhenAvailable(function(){var d,r=((r=(r=a.adFuel.lastProcessed())==null?void 0:r.wrappedSlots)!=null?r:new l.List).where(function(n){return s.includes(n.slotId)&&n.isBuilt}).select(function(n){return n.gSlot}).toArray();(d=a.adFuel.perf)!=null&&d.addMark("Clearing Slots [".concat(JSON.stringify(r.map(function(n){return n.getSlotElementId()})),"]")),a.googleApi.clearSlots(r)})},e.SlotProcessor=o},{"../system":45,"linq-collections":23}],29:[function(t,y,e){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(o){for(var s,a=1,d=arguments.length;a<d;a++)for(var r in s=arguments[a])Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r]);return o}).apply(this,arguments)},g=this&&this.__spreadArray||function(o,s,a){if(a||arguments.length===2)for(var d,r=0,n=s.length;r<n;r++)!d&&r in s||((d=d||Array.prototype.slice.call(s,0,r))[r]=s[r]);return o.concat(d||Array.prototype.slice.call(s))},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.TargetProcessor=void 0,t("@turnercode/digital-ads-utilities/dist/getUrlParam"));function l(o,s,a){a===void 0&&(a=void 0),this.adFuel=o,this._googleApi=s,this.nextProcessor=a,this._slotTargets={},this._pageTargets={}}l.prototype.process=function(o){var s=this;return new Promise(function(a,d){var r,n,f,h,m,i,v,_,p,b,E,A;try{(r=s.adFuel.perf)!=null&&r.addMark("TargetProcessor.Process() START"),(n=s.adFuel.logger)!=null&&n.log(" ### START Target Processor ====",o.wrappedSlots.select(function(L){return L.toLogging()}).toArray(),o.options),(f=s.adFuel.logger)!=null&&f.log("slotTargets",s._slotTargets),(h=s.adFuel.logger)!=null&&h.log("pageTargets",s._pageTargets),s._slotTargets=Object.assign({},s._slotTargets,o.slotTargets),s._pageTargets=Object.assign({},s._pageTargets,o.pageTargets),(m=s.adFuel.logger)!=null&&m.log("slotTargets",s._slotTargets),(i=s.adFuel.logger)!=null&&i.log("pageTargets",s._pageTargets),s.getAdsQaTargeting(),(v=s.adFuel.logger)!=null&&v.log(" ### START BUILDING SLOT TARGETING ====",o),s.buildSlotLevelTargeting(o),(_=s.adFuel.logger)!=null&&_.log(" ### START BUILDING PAGE TARGETING ====",o),s.buildPageLevelTargeting(o),(p=s.adFuel.logger)!=null&&p.log(" ### STOP Target Processor ====",o.wrappedSlots.select(function(L){return L.toLogging()}).toArray(),o.options),(b=s.adFuel.perf)!=null&&b.addMark("TargetProcessor.Process() END"),(E=s.adFuel.perf)!=null&&E.addMeasure("TargetProcessor.Process()"),s.nextProcessor?a((A=s.nextProcessor)==null?void 0:A.process(o)):a(o)}catch(L){d(L)}})},l.prototype.windowObjectName=function(o){var s;return((s=(s=o.options)==null?void 0:s.SITE_OBJECT)!=null?s:(o=(s=(s=o.registry)==null?void 0:s.root)!=null?s:(s=o.registry)==null?void 0:s.site)!=null?o:"").toUpperCase()},l.prototype.buildSlotLevelTargeting=function(o){(s=this.adFuel.logger)!=null&&s.log("Building slot level targeting.",{raw:window.CNN,root:this.windowObjectName(o),data:o});for(var s,a,d,r=function(m){(d=n.adFuel.perf)!=null&&d.addMark("Building Slot-Level Targeting [".concat(m.slotId,"]")),(d=n.adFuel.logger)!=null&&d.log("[TargetProcessor] Building Slot-Level Targeting [".concat(m.slotId,"]"),m);var i,v=(((d=window[n.windowObjectName(o)])==null?void 0:d.slotTargets)||{})[m.slotId]||{},_=((d=n.adFuel.logger)!=null&&d.log("[TargetProcessor] Site Slot Targets [".concat(m.slotId,"]"),v),{pos:[m.posMap]}),p=((d=n.adFuel.logger)!=null&&d.log("[TargetProcessor] posTargets::",_),new Map(m.targeting)),b=(p.delete("pos"),u(u(u(u({},n._slotTargets[m.slotId]),Object.fromEntries(p)),_),v));(d=n.adFuel.logger)!=null&&d.log("[TargetProcessor] slotTargets to be built are: ",b,m);for(i in b)(function(E){var A,L;m.gSlot?0<(L=(a=b[E].filter(function(C){var M;return(M=!((M=m.requestedSlotTargets[E])!=null&&M.includes(C)))!==null&&M}))!=null?a:[]).length&&((a=n.adFuel.logger)!=null&&a.log("Setting slot targeting: ",{slot:m.slotId,key:E,value:L}),m.gSlot.setTargeting(E,L),m.requestedSlotTargets[E]?(A=m.requestedSlotTargets[E]).push.apply(A,L):m.requestedSlotTargets[E]=g([],L,!0)):(a=n.adFuel.logger)!=null&&a.warn("Slot ".concat(m.slotId," could not find the gslot and goes home disappointed."))})(i);(d=n.adFuel.logger)!=null&&d.log("Built slot targeting:",b,m)},n=this,f=0,h=o.wrappedSlots.where(function(m){return m.isBuilt&&!m.isExcluded}).toArray();f<h.length;f++)r(h[f])},l.prototype.buildPageLevelTargeting=function(o){var s,a,d=this,r=((r=this.adFuel.logger)!=null&&r.log("Building page level targeting.",{root:this.windowObjectName(o),data:window[this.windowObjectName(o)]}),(r=this.adFuel.perf)!=null&&r.addMark("Building Page-Level Targeting"),((r=window[this.windowObjectName(o)])==null?void 0:r.adTargets)||{}),n=((s=this.adFuel.logger)!=null&&s.log("[TargetProcessor] Site Page Targets",r),new Map),f=(Array.isArray((s=o.registry)==null?void 0:s.targeting)&&(s=o.registry)!=null&&s.targeting.forEach(function(h){(i=d.adFuel.logger)!=null&&i.log("[TargetProcessor] Registry Page Target Item: ",h),(i=d.adFuel.logger)!=null&&i.log("[TargetProcessor] Registry Page Target Item Types: ",{first:typeof h[0],second:typeof h[1]});var m,i=h[0]||"undefined",h=h[1];(m=d.adFuel.logger)!=null&&m.log("[TargetProcessor] Registry Page Target KVP: ",{keyName:i,keyValue:h}),n.set(i,h)}),(o=this.adFuel.logger)!=null&&o.log("[TargetProcessor] Registry Targets: ",Object.fromEntries(n)),u(u(u({},this._pageTargets),Object.fromEntries(n)),r));for(a in(s=this.adFuel.logger)!=null&&s.log("pageTargets to be built are: ",f),f)f[a]!=null&&this._googleApi.setTargeting(a,f[a]);(o=this.adFuel.logger)!=null&&o.log("Built page targeting",f)},l.prototype.getAdsQaTargeting=function(){var o,s,a;try{(a=this.adFuel.perf)!=null&&a.addMark("Getting AdsQA Targeting");var d,r,n,f,h=(0,c.getUrlParam)("adsqa");h&&((o=this.adFuel.logger)!=null&&o.log("ADSQA detected."),d=h.split("%3D"),1<h.length?(r=d[0],n=d[1],f=Array.isArray(n)?n:[n],this._pageTargets[r]=f):(s=this.adFuel.logger)!=null&&s.info("ADSQA parsing problem",d))}catch(m){(a=this.adFuel.logger)!=null&&a.error("checkForAdsQA",m)}},l.prototype.removeTargets=function(o,s,a){var d;o===void 0&&(o={}),(d=this.adFuel.perf)!=null&&d.addMark("Removing Targeting [".concat(s,"] ").concat(JSON.stringify(a))),a&&o[s]?o[s]=o[s].filter(function(r){return!a.includes(r)}):delete o[s]},l.prototype.addTargets=function(o,s,a){var d;o[s]=a,(d=this.adFuel.perf)!=null&&d.addMark("Adding Targeting [".concat(s,"] ").concat(JSON.stringify(a))),o[s]?o[s]=g(g([],(d=o[s])!=null?d:[],!0),a.filter(function(r){return!o[s].includes(r)}),!0):o[s]=g([],a,!0)},l.prototype.addPageLevelTargets=function(o,s){this.addTargets(this._pageTargets,o,s)},l.prototype.removePageLevelTargets=function(o,s){this.removeTargets(this._pageTargets,o,s)},l.prototype.addSlotLevelTargets=function(o,s,a){this._slotTargets[o]||(this._slotTargets[o]={}),this.addTargets(this._slotTargets[o],s,a)},l.prototype.removeSlotLevelTargets=function(o,s,a){this.removeTargets(this._slotTargets[o],s,a)},l.prototype.setBulkTargeting=function(o){var s;if(o.slotTargets||o.adTargets){if((s=this.adFuel.perf)!=null&&s.addMark("Setting Bulk Targeting"),o.slotTargets)for(var a=0,d=o.slotTargets;a<d.length;a++){var r=d[a];this.addSlotLevelTargets(r.slotId,r.targetKey,r.targetValues)}if(o.adTargets)for(var n=0,f=o.adTargets;n<f.length;n++){var h=f[n];this.addPageLevelTargets(h.targetKey,h.targetValues)}}else(s=this.adFuel.logger)!=null&&s.error("setBulkTargeting was passed a bad parameter.",o)},e.TargetProcessor=l},{"@turnercode/digital-ads-utilities/dist/getUrlParam":8}],30:[function(t,y,e){"use strict";var u=this&&this.__createBinding||(Object.create?function(c,l,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(l,o);a&&("get"in a?l.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return l[o]}}),Object.defineProperty(c,s,a)}:function(c,l,o,s){c[s=s===void 0?o:s]=l[o]}),g=this&&this.__exportStar||function(c,l){for(var o in c)o==="default"||Object.prototype.hasOwnProperty.call(l,o)||u(l,c,o)};Object.defineProperty(e,"__esModule",{value:!0}),g(t("../system/OptionsParser"),e),g(t("./RequestProcessor"),e),g(t("./SlotProcessor"),e),g(t("./TargetProcessor"),e)},{"../system/OptionsParser":39,"./RequestProcessor":27,"./SlotProcessor":28,"./TargetProcessor":29}],31:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AController=void 0,e.AController=function(u){(this.missionControl=u).register(this)}},{}],32:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAdFuelOptions=void 0,e.BaseAdFuelOptions={AUTO_DISPATCH:!0,COLLAPSE_EMPTY_DIVS:!0,DEFAULT_TIMEOUT:1200,DEFAULT_DESKTOP_TIMEOUT:1200,DEFAULT_MOBILE_TIMEOUT:800,IFRAME_TITLE:"advertisement",NETWORK_ID:"8663477"}},{}],33:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleApi=void 0;var u=t("@turnercode/digital-ads-utilities/dist/getUrlParam");function g(c){this.adFuel=c,this._pubAdsConfigured=!1,this._commandQueue=[],this._setChildDirectedTreatment=!0}g.prototype.executeWhenAvailable=function(c){var l;this.isAvailable?c():((l=this.adFuel.logger)!=null&&l.warn("It seems googletag is not ready yet. Queuing command...",{apiReady:googletag.apiReady,pubadsReady:googletag.pubadsReady}),(l=window.googletag)!=null&&l.cmd.push(c))},g.prototype.flushCmdQueue=function(){for(;0<this._commandQueue.length;)googletag.cmd.push(this._commandQueue.shift())},Object.defineProperty(g.prototype,"isAvailable",{get:function(){var c;return(c=googletag.apiReady)!=null&&c},enumerable:!1,configurable:!0}),g.prototype.destroySlots=function(c){var l=this;0<c.length?this.executeWhenAvailable(function(){var o;c.forEach(function(s){var a;(a=l.adFuel.logger)!=null&&a.log("[GOOGLEAPI] ---------- destroySlots::Destroying Slot: ".concat(s.getSlotElementId())),(a=l.adFuel.perf)!=null&&a.addMark("Destroying Slot: ".concat(s.getSlotElementId()))}),(o=window.googletag)!=null&&o.destroySlots(c)}):this.executeWhenAvailable(function(){var o;(o=l.adFuel.logger)!=null&&o.log("[GOOGLEAPI] ---------- destroySlots::Destroying All Slots"),(o=l.adFuel.perf)!=null&&o.addMark("Destroying All Slots"),(o=window.googletag)!=null&&o.destroySlots()})},g.prototype.clearSlots=function(c){var l=this;0<(c=c===void 0?[]:c).length?this.executeWhenAvailable(function(){var o;(o=l.adFuel.perf)!=null&&o.addMark("Clearing Slots"),c.forEach(function(s){var a;(a=l.adFuel.perf)!=null&&a.addMark("Clearing Slot: ".concat(s.getSlotElementId()))}),googletag.pubads().clear(c)}):googletag.cmd.push(function(){var o;(o=l.adFuel.perf)!=null&&o.addMark("Clearing All Slots"),googletag.pubads().clear()})},g.prototype.defineOutOfPageSlot=function(c,l){var o,c=googletag.defineOutOfPageSlot(c,l);if(window.googletag&&c)(o=this.adFuel.perf)!=null&&o.addMark("Defined OOP GPT Slot - ".concat(l)),c.addService(window.googletag.pubads());else{if(!window.googletag)throw Error("Googletag not defined.");(o=this.adFuel.logger)!=null&&o.warn("Unable to define slot: ".concat(l))}return c},g.prototype.defineSlot=function(c,l,o){(d=this.adFuel.logger)!=null&&d.info("Building Standard Slot Object adPath:".concat(c," sizes:").concat(l," slotId:").concat(o));for(var s,a,d=void 0,r=[],n=0,f=l;n<f.length;n++){var h=f[n].map(Number);r.push([h[0],h[1]])}try{d=googletag.defineSlot(c,r,o),window.googletag&&d&&((s=this.adFuel.logger)!=null&&s.info("Defined slot: ".concat(o),d),(a=this.adFuel.perf)!=null&&a.addMark("Defined Standard GPT Slot - ".concat(o)),d.addService(window.googletag.pubads()))}catch(m){(l=this.adFuel.logger)!=null&&l.warn("Unable to define slot: ".concat(o),m)}return d},g.prototype.defineSlotSizeMapping=function(c,l){var o,s;c&&(s=c.getSlotElementId(),(o=this.adFuel.logger)!=null&&o.info("Setting Slot size mapping slotId: ".concat(s," responsiveMap: "),l),c.defineSizeMapping(l),(o=this.adFuel.perf)!=null)&&o.addMark("Defined Slot Responsive Mapping - ".concat(c.getSlotElementId()))},g.prototype.setTargeting=function(c,l){var o=this;this.executeWhenAvailable(function(){var s;googletag.pubads().setTargeting(c,l),(s=o.adFuel.perf)!=null&&s.addMark("Defined Page Target - ".concat(c))})},g.prototype.displaySlotById=function(c){var l=this;this.executeWhenAvailable(function(){var o;(o=l.adFuel.perf)!=null&&o.addMark("Displaying Slot - ".concat(c)),googletag.display(c)})},g.prototype.refreshSlots=function(c,l){var o=this,s=l||{maintainCorrelator:!0},a=c.where(function(d){return d.isBuilt}).select(function(d){return d.gSlot}).toArray();0<a.length?this.executeWhenAvailable(function(){var d;(d=o.adFuel.logger)!=null&&d.log("GoogleAPI, Refreshing Slots: ".concat(JSON.stringify(a.map(function(r){return r.getSlotElementId()})))),a.forEach(function(r){var n;(n=o.adFuel.perf)!=null&&n.addMark("Refreshing Slot ".concat(r.getSlotElementId()))}),googletag.pubads().refresh(a,{changeCorrelator:!s.maintainCorrelator})}):this.executeWhenAvailable(function(){var d;(d=o.adFuel.logger)!=null&&d.log("GoogleAPI, Refreshing all slots"),(d=o.adFuel.perf)!=null&&d.addMark("Refreshing All Slots"),googletag.pubads().refresh(void 0,{changeCorrelator:!s.maintainCorrelator})})},g.prototype.configurePubAds=function(){var c=this;return new Promise(function(l){c._pubAdsConfigured?l():(c._pubAdsConfigured=!0,c.executeWhenAvailable(function(){(o=c.adFuel.perf)!=null&&o.addMark("Configuring GPT START"),googletag.pubads().addEventListener("impressionViewable",function(a){var d,r=a.slot.getSlotElementId();(d=c.adFuel.perf)!=null&&d.addMark("[".concat(r,"] Impression Viewable")),(d=c.adFuel.logger)!=null&&d.info("impressionViewable",a),document.dispatchEvent(new CustomEvent("SlotViewable",{detail:a}))}).addEventListener("slotVisibilityChanged",function(a){var d;(d=c.adFuel.logger)!=null&&d.info("slotVisibilityChanged",a),document.dispatchEvent(new CustomEvent("slotVisibilityChanged",{detail:a}))}).addEventListener("slotRenderEnded",function(a){var d,r,n,f,h,m,i,v,_,p,b,E,A,L,C,M=a.slot.getSlotElementId();(d=c.adFuel.perf)!=null&&d.addMark("[".concat(M,"] Slot Render Ended")),(d=c.adFuel.logger)!=null&&d.info("slotRenderEnded",a);try{var T,U=c.adFuel.processedData.getKeys(),j=(n=(r=a.slot)==null?void 0:r.getSlotElementId())!=null?n:"NO ID",W={},D=(U.forEach(function(V){c.adFuel.processedData.get(V).wrappedSlots.forEach(function(de){de.unWrappedSlot.rktr_slot_id===j&&(W=de)})}),(f=c.adFuel.logger)!=null&&f.log("========== Active Slot: ",W),W.responseData={advertiserId:a.advertiserId,campaignId:a.campaignId,creativeId:a.creativeId,isEmpty:a.isEmpty,lineItemId:a.lineItemId,renderedSize:a.size,sourceAgnosticCreativeId:a.sourceAgnosticCreativeId,sourceAgnosticLineItemId:a.sourceAgnosticLineItemId},{asset:a.slot,pos:a.slot?a.slot.getTargeting("pos"):[""],empty:!!a.isEmpty,renderedSize:(h=a.size)!=null?h:"0x0",creativeId:(m=a.sourceAgnosticCreativeId)!=null?m:"0",lineItemId:(i=a.sourceAgnosticLineItemId)!=null?i:"0",serviceName:(v=a.serviceName)!=null?v:"",divId:(p=(_=a.slot)==null?void 0:_.getSlotElementId())!=null?p:"NO ID"}),$=(D.empty&&c.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS&&(document.getElementById(D.divId).style.display="none"),a.slot.getTargeting("creativeId")||[]),B=(a.creativeId&&$.indexOf(""+a.creativeId)<0&&$.push(""+a.creativeId),a.slot.getTargeting("lineItemId")||[]);a.lineItemId&&B.indexOf(""+a.lineItemId)<0&&B.push(""+a.lineItemId),D.divId!="NO ID"&&(T=document.getElementById(D.divId),(b=c.adFuel.logger)!=null&&b.log("Getting element for ".concat(D.divId," to set className."),T),T?T.className.includes("adfuel-rendered")||(T.className="".concat(T.className," adfuel-rendered").trim(),(E=c.adFuel.logger)!=null&&E.log("".concat(D.divId," className ").concat(T.className))):(A=c.adFuel.logger)!=null&&A.warn("Could not find element ".concat(D.divId," to set adfuel-rendered in className."))),c.executeWhenAvailable(function(){a.slot.setTargeting("creativeId",$),a.slot.setTargeting("lineItemId",B)}),(L=c.adFuel.logger)!=null&&L.info("Dispatching GPTRenderComplete: ",D),D.divId?(C=document.getElementById(D.divId))!=null&&C.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:D,bubbles:!0})):document.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:D}))}catch(V){(M=c.adFuel.logger)!=null&&M.error("Error dispatching custom event: GPTRenderComplete",V)}}).addEventListener("slotOnload",function(a){var d,r=a.slot.getSlotElementId();(d=c.adFuel.perf)!=null&&d.addMark("[".concat(r,"] Slot Loaded")),(d=c.adFuel.logger)!=null&&d.info("slotOnLoad",a),document.dispatchEvent(new CustomEvent("GPTSlotLoaded",{detail:a}))}),(o=c.adFuel.logger)!=null&&o.info("Enabling 'Collapse Empty Divs'"),googletag.pubads().collapseEmptyDivs((o=c.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS)==null||o),(o=c.adFuel.logger)!=null&&o.info("Enabling 'Async Rendering'"),googletag.pubads().enableAsyncRendering(),(o=c.adFuel.logger)!=null&&o.info("Enabling 'Single Request'"),googletag.pubads().enableSingleRequest(),(0,u.getUrlParam)("enableInitialLoad")||((o=c.adFuel.logger)!=null&&o.info("Disabling 'Initial Load'"),googletag.pubads().disableInitialLoad());var o=((o=(o=window.WM)==null?void 0:o.UserConsent)==null?void 0:o.isInRegion("global"))===!1,s=(s=(s=window.WM)==null?void 0:s.UserConsent)==null?void 0:s.inUserConsentState(["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);o&&!s&&((o=c.adFuel.logger)!=null&&o.log("Restricting Data Processing..."),googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})),(s=c.adFuel.logger)!=null&&s.info("Enabling 'Services'"),(o=c.adFuel.perf)!=null&&o.addMark("Configuring GPT END"),(s=c.adFuel.perf)!=null&&s.addMeasure("Configuring GPT"),(o=c.adFuel.perf)!=null&&o.addMark("Enabling GPT Services"),googletag.enableServices(),l()}))})},g.prototype.enableLazyLoad=function(c){var l=this;this.executeWhenAvailable(function(){var o;(o=l.adFuel.perf)!=null&&o.addMark("Enabling GPT Lazy Load"),googletag.pubads().enableLazyLoad({fetchMarginPercent:c.fetch,renderMarginPercent:c.render,mobileScaling:c.scaling})})},g.prototype.setChildDirectedTreatmentTag=function(c){var l,o=this;this._setChildDirectedTreatment?(this.executeWhenAvailable(function(){var s;(s=o.adFuel.perf)!=null&&s.addMark("Setting Child-Directed Treatment"),googletag.pubads().setPrivacySettings({childDirectedTreatment:!0,underAgeOfConsent:!0})}),this._setChildDirectedTreatment=!1):(l=this.adFuel.logger)!=null&&l.info("setChidlDirectedTreatment has already been caleld.")},g.prototype.setLocation=function(c,l){var o=this;this.executeWhenAvailable(function(){var s;(s=o.adFuel.perf)!=null&&s.addMark("Setting Location"),googletag.pubads().setLocation(c,l)})},g.prototype.setSafeFrameConfig=function(c){var l=this;this.executeWhenAvailable(function(){var o;(o=l.adFuel.perf)!=null&&o.addMark("Setting SafeFrame Config"),googletag.pubads().setSafeFrameConfig(c)})},g.prototype.setSlotSafeFrameConfig=function(c,l){var o=this;c&&this.executeWhenAvailable(function(){var s;(s=o.adFuel.perf)!=null&&s.addMark("[".concat(c.getSlotElementId(),"] Setting Slot SafeFrame Config")),c.setSafeFrameConfig(l)})},e.GoogleApi=g},{"@turnercode/digital-ads-utilities/dist/getUrlParam":8}],34:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GptProcessData=void 0;var u=t("linq-collections");function g(){this.wrappedSlots=new u.List,this.url="",this.pageTargets={},this.slotTargets={},this.dispatched=!1}g.prototype.build=function(c,l,o,s,a,d){return s===void 0&&(s=""),a===void 0&&(a={}),d===void 0&&(d={}),this.timestamp=new Date().getTime(),this.registry=c,this.wrappedSlots=l,this.options=o,this.url=s,this.pageTargets=a,this.slotTargets=d,this.dispatched=!1,this},g.prototype.clone=function(){return new g().build(this.registry&&JSON.parse(JSON.stringify(this.registry)),new u.List(this.wrappedSlots.toArray()),this.options&&JSON.parse(JSON.stringify(this.options)),"".concat(this.url),JSON.parse(JSON.stringify(this.pageTargets)),JSON.parse(JSON.stringify(this.slotTargets)))},e.GptProcessData=g},{"linq-collections":23}],35:[function(t,y,e){"use strict";var u,g,c=this&&this.__extends||(u=function(s,a){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,r){d.__proto__=r}:function(d,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(d[n]=r[n])}))(s,a)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function d(){this.constructor=s}u(s,a),s.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.GptScriptLoader=void 0,t("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl")),t=t("../system/AController"),t=(g=t.AController,c(o,g),Object.defineProperty(o.prototype,"readyId",{get:function(){return"gptScript"},enumerable:!1,configurable:!0}),o.prototype.loadScript=function(){var s,a=this;return(s=this.perf)!=null&&s.addMark("GPT Script Load START"),(s=this.perf)!=null&&s.addMark("GPT Script Ready START"),(0,l.loadScriptFromUrl)("https://securepubads.g.doubleclick.net/tag/js/gpt.js","GPTScript",this._document).then(function(){var d;(d=a.logger)!=null&&d.info("GPT is loaded."),(d=a.perf)!=null&&d.addMark("GPT Script Load END"),(d=a.perf)!=null&&d.addMeasure("GPT Script Load"),(d=window.googletag)!=null&&d.cmd.push(function(){var r,n=((n=window.googletag)==null?void 0:n.getVersion())||"unknown";(r=a.logger)!=null&&r.info("GPT is ready. Version is ".concat(n)),(r=a.perf)!=null&&r.addMark("GPT Script Ready END"),(n=a.perf)!=null&&n.addMeasure("GPT Script Ready")})})},o);function o(s,a,d,r){r===void 0&&(r=document);var n=g.call(this,s)||this;return n.missionControl=s,n.logger=a,n.perf=d,n._document=r,n.missionControl.setReady(n),n}e.GptScriptLoader=t},{"../system/AController":31,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":12}],36:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MissionControl=void 0;var u=t("linq-collections");function g(c,l){this.adFuel=c,this.googleApi=l,this._ready=new u.Dictionary,this._optanonLoaded=!1,this._consentStatus=!0,this._iabRegion="global",this.processQueue=[]}g.prototype.register=function(c){this._ready.setOrUpdate(c.readyId,!1),(c=this.adFuel.logger)!=null&&c.info("Ready at Register",JSON.parse(JSON.stringify(this._ready))),(c=this.adFuel.perf)!=null&&c.addMark("Ready at Register")},Object.defineProperty(g.prototype,"firstProcessor",{get:function(){return this._firstProcessor},set:function(c){this._firstProcessor=c},enumerable:!1,configurable:!0}),g.prototype.setReady=function(c){var l,o=this;if(c){if((l=this.adFuel.logger)!=null&&l.log("Setting Processor Ready: ",c),!this._ready.containsKey(c.readyId))throw new Error("Key not found in ReadyEngine: ".concat(c.readyId));this._ready.setOrUpdate(c.readyId,!0),(l=this.adFuel.logger)!=null&&l.info("Ready",JSON.parse(JSON.stringify(this._ready)))}if(this.readyToLaunch()){if((c=this.adFuel.perf)!=null&&c.addMark("Ready To Launch"),!this._firstProcessor)throw new Error("All processes are ready, but FirstProcessor is not set.");(l=this.adFuel.perf)!=null&&l.addMark("First Processor - Processing"),this.googleApi.executeWhenAvailable(function(){o.runProcessChain(),o.adFuel.flushCmdQueue()})}},g.prototype.runProcessChain=function(){var c,l=this,o=this.processQueue.shift();(c=this.adFuel.logger)!=null&&c.log("[runProcessChain] ProcessData: ",o),o?((c=this.adFuel.logger)!=null&&c.info("[runProcessChain] Starting chain with this data",o),this.adFuel.moduleManager.callStart(o.wrappedSlots.where(function(s){return s.slotExistsOnPage}).toList()).then(function(){l.adFuel.moduleManager.callPreQueue(o.wrappedSlots.where(function(s){return s.slotExistsOnPage&&!s.isExcluded}).toList()).then(function(){var s;(s=l.adFuel.logger)!=null&&s.info("[runProcessChain] calling first processor..."),l._firstProcessor.process(o).then(function(){o.timestamp=new Date().getTime(),l.adFuel.processedData.setOrUpdate(o.timestamp,o),l.runProcessChain(),l.adFuel.flushCmdQueue()})})}).catch(function(s){var a;(a=l.adFuel.logger)!=null&&a.error("[runProcessChain] There was an error in processing the chain.  Mission Control has aborted liftoff.",s)})):(c=this.adFuel.logger)!=null&&c.info("[runProcessChain] No data to process.")},g.prototype.getSlotIfAlreadyProcessed=function(c){var l=(l=this.adFuel.processedData.firstOrDefault(function(o){return o.value.wrappedSlots.any(function(s){return s.slotId===c.slotId&&s.isBuilt})}))==null?void 0:l.value.wrappedSlots.firstOrDefault(function(o){return o.slotId===c.slotId&&o.isBuilt});return c=l!=null?l:c},g.prototype.isReady=function(c){return this._ready.get(c.readyId)},g.prototype.readyToLaunch=function(){var c,l=this._ready.all(function(o){return o.value===!0});return(c=this.adFuel.logger)!=null&&c.info("Ready to launch ".concat(l),this._ready),l},e.MissionControl=g},{"linq-collections":23}],37:[function(t,y,e){"use strict";var u,g,c=this&&this.__extends||(u=function(a,d){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,n){r.__proto__=n}:function(r,n){for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(r[f]=n[f])}))(a,d)},function(a,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function r(){this.constructor=a}u(a,d),a.prototype=d===null?Object.create(d):(r.prototype=d.prototype,new r)}),l=(Object.defineProperty(e,"__esModule",{value:!0}),e.ModuleManager=e.ModuleWrapper=void 0,t("@turnercode/digital-ads-utilities")),t=t("../system/AController"),o=function(a,d,r,n){d===void 0&&(d=void 0),r===void 0&&(r=!1),n===void 0&&(n=!1),this.moduleName=a,this.unWrappedModule=d,this.isLoaded=r,this.isReady=n},t=(e.ModuleWrapper=o,g=t.AController,c(s,g),Object.defineProperty(s.prototype,"readyId",{get:function(){return"modules"},enumerable:!1,configurable:!0}),s.prototype.executeWhenWindowLoads=function(){var a;(a=this.adFuel.perf)!=null&&a.addMark("Executing Window Processes START"),(a=this.adFuel.perf)!=null&&a.addMark("Executing Window Processes END"),(a=this.adFuel.perf)!=null&&a.addMeasure("Executing Window Processes")},s.prototype.executeWhenDOMLoads=function(){var a;(a=this.adFuel.perf)!=null&&a.addMark("Executing DOM Processes START"),this.adFuel.adFuelOptions.ACTIVE_MODULES?((a=this.adFuel.logger)!=null&&a.log("Are all expected modules loaded? ",{expected:this.adFuel.adFuelOptions.ACTIVE_MODULES,loaded:this.areAllExpectedModulesLoaded}),this.areAllExpectedModulesLoaded?((a=this.adFuel.perf)!=null&&a.addMark("Executing DOM Processes END"),(a=this.adFuel.perf)!=null&&a.addMeasure("Executing DOM Processes")):(a=this.adFuel.logger)!=null&&a.warn("Failed to load all expected modules:",this.adFuel.adFuelOptions.ACTIVE_MODULES)):((a=this.adFuel.logger)!=null&&a.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (A) === === === ~~ ~~ ~~"),this.adFuel.missionControl.setReady(this))},s.prototype.registerModule=function(a){var d,r;this.adFuel.registeredModules.containsKey(a.MODULE_LOG_TAG)?(r=this.adFuel.registeredModules.get(a.MODULE_LOG_TAG)).unWrappedModule=a:((d=this.adFuel.perf)!=null&&d.addMark("Creating ModuleWrapper [".concat(a.MODULE_NAME,"]")),r=new o(a.MODULE_LOG_TAG,a)),(d=this.adFuel.logger)!=null&&d.log("Setting Registered Module: ",{module:a,wrappedModule:r}),this.adFuel.registeredModules.setOrUpdate(a.MODULE_LOG_TAG,r),(d=this.adFuel.logger)!=null&&d.log("Expected Loaded and All Ready?: ",{expected:this.areAllExpectedModulesLoaded,ready:this.areAllModulesReady}),this.areAllExpectedModulesLoaded&&this.areAllModulesReady&&((a=this.adFuel.logger)!=null&&a.info("All modules are loaded and ready, so setting ModuleManager ready."),(r=this.adFuel.perf)!=null&&r.addMark("All Modules Ready"),(d=this.adFuel.logger)!=null&&d.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (B) === === === ~~ ~~ ~~"),this.missionControl.setReady(this))},Object.defineProperty(s.prototype,"areAllExpectedModulesLoaded",{get:function(){for(var a,d,r=0,n=(d=this.adFuel.adFuelOptions.ACTIVE_MODULES)!=null?d:[];r<n.length;r++){var f=n[r];if((a=this.adFuel.logger)!=null&&a.log("moduleLogTag: ",f),!this.adFuel.registeredModules.containsKey(f))return!1}return(d=this.adFuel.logger)!=null&&d.log("notNot: ",!!this.adFuel.adFuelOptions.ACTIVE_MODULES),!!this.adFuel.adFuelOptions.ACTIVE_MODULES},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"areAllModulesReady",{get:function(){return this.adFuel.registeredModules.count()<1||this.adFuel.registeredModules.all(function(a){return a.value.isReady})},enumerable:!1,configurable:!0}),s.prototype.callStart=function(){var a=this;return new Promise(function(d){a.adFuel.registeredModules.where(function(r){return r.value.isReady}).forEach(function(r){var n,f=(f=r.value)==null?void 0:f.unWrappedModule;if(f!=null&&f.start)try{(n=a.adFuel.perf)!=null&&n.addMark("Calling Module Start Process [".concat(r.value.moduleName,"]")),f.start()}catch(h){(n=a.adFuel.logger)!=null&&n.error("Problem calling start for ".concat(f.MODULE_NAME),h)}}),d()})},s.prototype.callPreQueue=function(a){var d=this;return new Promise(function(r){var n,f=a,h=[];d.adFuel.registeredModules.where(function(m){return m.value.isReady}).forEach(function(m){var i,v=m.value.unWrappedModule;v!=null&&v.preQueue&&((i=d.adFuel.perf)!=null&&i.addMark("Calling Module preQueue Process [".concat(m.value.moduleName,"]")),h.push((0,l.promiseWithTimeout)(1500,v.preQueue(f.toArray()).catch(function(_){var p;(p=d.adFuel.logger)!=null&&p.error("MODULE-MANAGER - Problem calling preQueue ".concat(v.MODULE_NAME),_)}),"".concat(v.MODULE_NAME," PreQueue timed out."))))}),(n=d.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PreQueue Callback Promises: ",h),r(Promise.allSettled(h).then(function(m){var i;(i=d.adFuel.logger)!=null&&i.log("MODULE-MANAGER - PreQueue Callback Promises Results: ",m)}).catch(function(m){var i;(i=d.adFuel.logger)!=null&&i.error("MODULE-MANAGER - Error waiting for all promises to resolve:",m)}))})},s.prototype.callPostQueue=function(a){var d=this;return new Promise(function(r){var n,f=a,h=[];d.adFuel.registeredModules.where(function(m){return m.value.isReady}).forEach(function(m){var i,v=m.value.unWrappedModule;v!=null&&v.postQueue&&((i=d.adFuel.perf)!=null&&i.addMark("Calling Module postQueue Process [".concat(m.value.moduleName,"]")),h.push((0,l.promiseWithTimeout)(1500,v.postQueue(f.toArray()).catch(function(_){var p;(p=d.adFuel.logger)!=null&&p.error("Problem calling postQueue ".concat(v.MODULE_NAME),_)}),"".concat(v.MODULE_NAME," PostQueue timed out."))))}),(n=d.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PostQueue Callback Promises: ",h),r(Promise.allSettled(h).then(function(m){var i;(i=d.adFuel.logger)!=null&&i.log("MODULE-MANAGER - PostQueue Callback Promises Results: ",m)}).catch(function(m){var i;(i=d.adFuel.logger)!=null&&i.error("MODULE-MANAGER - Error waiting for all promises to resolve:",m)}))})},s.prototype.callPreDispatch=function(a){var d=this;return new Promise(function(r){var n,f=a,h=[];d.adFuel.registeredModules.where(function(m){return m.value.isReady}).forEach(function(m){var i,v=m.value.unWrappedModule;v!=null&&v.preDispatch&&((i=d.adFuel.perf)!=null&&i.addMark("Calling Module preDispatch Process [".concat(m.value.moduleName,"]")),h.push((0,l.promiseWithTimeout)(1500,v.preDispatch(f.toArray()).catch(function(_){var p;(p=d.adFuel.logger)!=null&&p.error("Problem calling preDispatch ".concat(v.MODULE_NAME),_)}),"".concat(v.MODULE_NAME," PreDispatch timed out."))))}),(n=d.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PreDispatch Callback Promises: ",h),r(Promise.allSettled(h).then(function(m){var i;(i=d.adFuel.logger)!=null&&i.log("MODULE-MANAGER - PreDispatch Callback Promises Results: ",m)}).catch(function(m){var i;(i=d.adFuel.logger)!=null&&i.error("MODULE-MANAGER - Error waiting for all promises to resolve:",m)}))})},s.prototype.callPostDispatch=function(a){var d=this;return new Promise(function(r){var n,f=a,h=[];d.adFuel.registeredModules.where(function(m){return m.value.isReady}).forEach(function(m){var i,v=m.value.unWrappedModule;v!=null&&v.postDispatch&&((i=d.adFuel.perf)!=null&&i.addMark("Calling Module postDispatch Process [".concat(m.value.moduleName,"]")),h.push((0,l.promiseWithTimeout)(1500,v.postDispatch(f.toArray()).catch(function(_){var p;(p=d.adFuel.logger)!=null&&p.error("Problem calling postDispatch ".concat(v.MODULE_NAME),_)}),"".concat(v.MODULE_NAME," PostDispatch timed out."))))}),(n=d.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PostDispatch Callback Promises: ",h),r(Promise.allSettled(h).then(function(m){var i;(i=d.adFuel.logger)!=null&&i.log("MODULE-MANAGER - PostDispatch Callback Promises Results: ",m)}).catch(function(m){var i;(i=d.adFuel.logger)!=null&&i.error("MODULE-MANAGER - Error waiting for all promises to resolve:",m)}))})},s.prototype.callPreRefresh=function(a){var d=this;return new Promise(function(r){var n,f=a,h=[];d.adFuel.registeredModules.where(function(m){return m.value.isReady}).forEach(function(m){var i,v=m.value.unWrappedModule;v!=null&&v.preRefresh&&((i=d.adFuel.perf)!=null&&i.addMark("Calling Module preRefresh Process [".concat(m.value.moduleName,"]")),h.push((0,l.promiseWithTimeout)(1500,v.preRefresh(f.toArray()).catch(function(_){var p;(p=d.adFuel.logger)!=null&&p.error("Problem calling preRefresh ".concat(v.MODULE_NAME),_)}),"".concat(v.MODULE_NAME," PreRefresh timed out."))))}),(n=d.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PreRefresh Callback Promises: ",h),r(Promise.allSettled(h).then(function(m){var i;(i=d.adFuel.logger)!=null&&i.log("MODULE-MANAGER - PreRefreesh Callback Promises Results: ",m)}).catch(function(m){var i;(i=d.adFuel.logger)!=null&&i.error("MODULE-MANAGER - Error waiting for all promises to resolve:",m)}))})},s.prototype.callPostRefresh=function(a){var d=this;return new Promise(function(r){var n,f=a,h=[];d.adFuel.registeredModules.where(function(m){return m.value.isReady}).forEach(function(m){var i,v=m.value.unWrappedModule;v!=null&&v.postRefresh&&((i=d.adFuel.perf)!=null&&i.addMark("Calling Module postRefresh Process [".concat(m.value.moduleName,"]")),h.push((0,l.promiseWithTimeout)(1500,v.postRefresh(f.toArray()).catch(function(_){var p;(p=d.adFuel.logger)!=null&&p.error("Problem calling postRefresh ".concat(v.MODULE_NAME),_)}),"".concat(v.MODULE_NAME," PostRefresh timed out."))))}),(n=d.adFuel.logger)!=null&&n.log("MODULE-MANAGER - PostRefresh Callback Promises: ",h),r(Promise.allSettled(h).then(function(m){var i;(i=d.adFuel.logger)!=null&&i.log("MODULE-MANAGER - PostRefresh Callback Promises Results: ",m)}).catch(function(m){var i;(i=d.adFuel.logger)!=null&&i.error("MODULE-MANAGER - Error waiting for all promises to resolve:",m)}))})},s.prototype.callDestroySlot=function(a){var d=this;return new Promise(function(r){var n,f=a,h=[];d.adFuel.registeredModules.where(function(m){return m.value.isReady}).forEach(function(m){var i,v=m.value.unWrappedModule;v!=null&&v.destroySlots&&((i=d.adFuel.perf)!=null&&i.addMark("Calling Module destroySlots Process [".concat(m.value.moduleName,"]")),h.push((0,l.promiseWithTimeout)(1500,v.destroySlots(f.toArray()).catch(function(_){var p;(p=d.adFuel.logger)!=null&&p.error("Problem calling destroySlots ".concat(v.MODULE_NAME),_)}),"".concat(v.MODULE_NAME," DestroySlot timed out."))))}),(n=d.adFuel.logger)!=null&&n.log("MODULE-MANAGER - DestroySlot Callback Promises: ",h),r(Promise.allSettled(h).then(function(m){var i;(i=d.adFuel.logger)!=null&&i.log("MODULE-MANAGER - DestroySlot Callback Promises Results: ",m)}).catch(function(m){var i;(i=d.adFuel.logger)!=null&&i.error("MODULE-MANAGER - Error waiting for all promises to resolve:",m)}))})},s);function s(a){var d=g.call(this,a.missionControl)||this;return d.adFuel=a,d._windowLoaded=!1,d._domContentLoaded=!1,window.addEventListener("DOMContentLoaded",function(){var r;d._domContentLoaded||((r=d.adFuel.perf)!=null&&r.addMark("DOMContentLoaded"),d.executeWhenDOMLoads(),d._domContentLoaded=!0)}),window.addEventListener("load",function(){var r;d._windowLoaded||((r=d.adFuel.perf)!=null&&r.addMark("window.load"),d.executeWhenWindowLoads(),d._windowLoaded=!0)}),d}e.ModuleManager=t},{"../system/AController":31,"@turnercode/digital-ads-utilities":11}],38:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Monetization=void 0;var u=t("@turnercode/digital-ads-utilities/dist/Logger"),g=t("@turnercode/digital-ads-utilities/dist/getViewport");function c(l){var o,s=this,a=(this.wrappedSlot=l,this.invalidMappings=["_ns_","_nfs_"],this.invalidSegments=[],this.invalidAdUnits=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"],this.monetizedSizes=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],this.concertSizes=["1030x590","620x366","325x508","325x204"],this.isMonetized=!0,this.isSuppressed=!1,this.isOutstream=!1,this.isConcert=!1,this.viewportSizes=[],this.filteredSizes=[],this._logger=new u.Logger("AdFuel T$","Monetization","mon","color: #85BB65; padding: 2px"),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$"),this._logger.log("$$$$$$$$$$  Monetization for Slot: ",l.slotId),this.posValue=l.posMap,(0,g.getViewport)()),d=this.isSuppressed=!1;this.isConcert=!1,this.isOutstream=0<=l.slotId.indexOf("_out_"),l.slotId==="page"&&(this.isMonetized=!1),this.hasInvalidMapping()&&(this.isMonetized=!1),this.hasInvalidUnitSegment()&&(this.isMonetized=!1),this.hasInvalidAdUnit()&&(this.isMonetized=!1),l.responsive&&0<l.responsive.length&&(d=!0,this._logger.log("$$$$$$$$$$ Client Viewport : ",a),o=l.responsive.filter(function(r){return s._logger.log("$$$$$$$$$$ Slot Viewport : ",r),r=r.unwrapped[0][0],s._logger.log("$$$$$$$$$$ Client Min: ",r),parseInt(r,10)<a.width})[0].sizes,this.viewportSizes=o.sizes.map(function(r){return r.unwrapped}),this.isSuppressed=o.suppressed,this._logger.log("$$$$$$$$$$ Viewport Sizes: ",this.viewportSizes)),this._logger.log("$$$$$$$$$$ Is Responsive/Monetized/Suppressed/Outstream: ",{isResponsive:d,isMonetized:this.isMonetized,isSuppressed:this.isSuppressed,isOutstream:this.isOutstream}),this.isOutstream?(this.isMonetized=!0,d?this.viewportSizes.forEach(function(r){s.filteredSizes.push({unwrapped:r,width:parseInt(r[0],10),height:parseInt(r[1],10)})}):l.sizes.forEach(function(r){s.filteredSizes.push(r)})):this.isMonetized&&!this.isSuppressed&&this.monetizedSizes.forEach(function(r){d?s.viewportSizes.forEach(function(n){0<s.concertSizes.indexOf(n.join("x"))&&(s._logger.log("$$$$$$$$$$ Is size a Concert size?",{size:n.join("x"),index:s.concertSizes.indexOf(n.join("x"))}),s.isConcert=!0),r===n.join("x")&&s.filteredSizes.push({unwrapped:n,width:parseInt(n[0],10),height:parseInt(n[1],10)})}):l.sizes.forEach(function(n){0<s.concertSizes.indexOf(n.unwrapped.join("x"))&&(s._logger.log("$$$$$$$$$$ Is size a Concert size?",{size:n.unwrapped.join("x"),index:s.concertSizes.indexOf(n.unwrapped.join("x"))}),s.isConcert=!0),r===n.unwrapped.join("x")&&s.filteredSizes.push(n)})}),this.filteredSizes.length!==0||this.isOutstream||(this.isMonetized=!1),this._logger.log("$$$$$$$$$$ Is Concert: ",this.isConcert),this.isConcert&&(this.isMonetized=!0,this.concertSizes.forEach(function(r){var r=r.split("x"),n=[0,0],r=(r.forEach(function(f,h){n[h]=parseInt(f,10)}),{unwrapped:r,width:n[0],height:n[1]});s._logger.log("$$$$$$$$$$ Pushing Concert Size to Filtered Sizes:",r),s.filteredSizes.push(r)})),this._logger.log("$$$$$$$$$$ Filtered Sizes: ",this.filteredSizes),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$")}c.prototype.hasInvalidMapping=function(){var l=this,o=!1;return this.invalidMappings.forEach(function(s){(l.wrappedSlot.slotId.includes(s)||l.posValue.includes(s))&&(o=!0)}),o},c.prototype.hasInvalidUnitSegment=function(){var l=this,o=!1;return this.invalidSegments.forEach(function(s){l.wrappedSlot.slotId.includes(s)&&(o=!0)}),o},c.prototype.hasInvalidAdUnit=function(){return this.invalidAdUnits.includes(this.wrappedSlot.adUnitMap)},e.Monetization=c},{"@turnercode/digital-ads-utilities/dist/Logger":3,"@turnercode/digital-ads-utilities/dist/getViewport":9}],39:[function(t,y,e){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(o){for(var s,a=1,d=arguments.length;a<d;a++)for(var r in s=arguments[a])Object.prototype.hasOwnProperty.call(s,r)&&(o[r]=s[r]);return o}).apply(this,arguments)},g=(Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsParser=void 0,t("./SlotWrapper")),c=t("linq-collections");function l(o){this.adFuel=o}l.prototype.processOptions=function(o){(a=this.adFuel.perf)!=null&&a.addMark("Processing Options"),(a=this.adFuel.logger)!=null&&a.log("----slots before processOptions",o.wrappedSlots.select(function(r){return r.toLogging()}).toArray());var s,a=o.options,d=(this.processPageAdUnit(o),a!=null&&a.usePageAdUnit?((s=this.adFuel.logger)!=null&&s.log("Using page ad unit for ad unit mapping."),this.processAdUnitMapping(this.adFuel.pageAdUnit,o)):a!=null&&a.adUnitMap&&this.processAdUnitMapping(a.adUnitMap,o),a!=null&&a.slotMap&&this.processSlotMapping(a.slotMap,o),a!=null&&a.exclude&&this.processExclusions(a.exclude,o),a!=null&&a.slots&&this.processIncludes(a.slots,o),a!=null&&a.posMap&&this.processPosMapping(a.posMap,o),[]);return a!=null&&a.sync?o.wrappedSlots.forEach(function(r){return d.push(r.slotId)}):a!=null&&a.syncSlots&&(Array.isArray(a.syncSlots)||(this.adFuel.adFuelOptions.syncSlots=[a.syncSlots]),d.push.apply(d,a.syncSlots)),o.wrappedSlots.where(function(r){return d.includes(r.slotId)}).forEach(function(r){return r.sync=!0}),(s=this.adFuel.logger)!=null&&s.log("----slots after processOptions",o.wrappedSlots.toArray()),o},l.prototype.processAdUnitMapping=function(o,s){var a,d,r=this;(a=this.adFuel.perf)!=null&&a.addMark("Processing AdUnit Mapping [".concat(JSON.stringify(o),"]")),(a=this.adFuel.logger)!=null&&a.log("Processing AdUnit Mapping ".concat(JSON.stringify(o))),d=typeof o=="string"?JSON.parse(JSON.stringify({all:o})):JSON.parse(JSON.stringify(o)),(a=this.adFuel.logger)!=null&&a.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= UnitMapClone: ",d),s.wrappedSlots.forEach(function(n){var f;(f=r.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Checking if slot should be mapped: ",{slot:n,id:n.slotId,unitMapClone:d}),d.all!==void 0?((f=r.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Global: ",d.all),n.adUnitMap=d.all):d[n.slotId]!==void 0&&((f=r.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Specific: ",d[n.slotId]),n.adUnitMap=d[n.slotId])})},l.prototype.processPageAdUnit=function(o){var s;this.adFuel.pageAdUnit===""&&1<o.wrappedSlots.toArray().length&&(o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id===""?(s=this.adFuel.logger)!=null&&s.error("Could not determine page ad unit.",o.wrappedSlots):((s=this.adFuel.logger)!=null&&s.info("Setting pageAdUnit to:",o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id),this.adFuel.pageAdUnit=o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id))},l.prototype.processSlotMapping=function(o,s){(a=this.adFuel.logger)!=null&&a.log("[OptionsParser] Processing Slot Mapping",{slotMap:o,data:s});for(var a,d,r=this,n=0,f=Object.keys(o);n<f.length;n++)(function(h){var m=(d=s.wrappedSlots.firstOrDefault(function(i){return i.slotId===h}))==null?void 0:d.unWrappedSlot;m?s.wrappedSlots.firstOrDefault(function(i){return i.slotId===o[h]})?(d=r.adFuel.logger)!=null&&d.warn("Mapped ".concat(o[h]," slot already exists!")):document.getElementById(o[h])?((d=r.adFuel.logger)!=null&&d.log("[OptionsParser] Creating slot ".concat(h," mapped to ").concat(o[h])),s.wrappedSlots.push(new g.SlotWrapper(u(u({},m),{rktr_slot_id:o[h]})))):(d=r.adFuel.logger)!=null&&d.warn("".concat(o[h]," has no matching element on the page and won't be added to allWrappedSlots.'")):(d=r.adFuel.logger)!=null&&d.warn("Could not find source slot data for ".concat(h," in the registry or allWrappedSlots in processSlotMap."))})(f[n])},l.prototype.processPosMapping=function(o,s){var a,d,r=this;if((a=this.adFuel.perf)!=null&&a.addMark("Processing POS Mapping ".concat(JSON.stringify(o),"]")),(a=this.adFuel.logger)!=null&&a.log("[OptionsParser] Processing POS Mapping",o),typeof o=="string")s.wrappedSlots.forEach(function(h){var m;(m=r.adFuel.logger)!=null&&m.log("[OptionsParser] Setting pos to global:",o),h.posMap=o});else{var n,f=this;for(n in o)(function(h){var m=s.wrappedSlots.firstOrDefault(function(i){return i.slotId===h});if((d=f.adFuel.logger)!=null&&d.log("[OptionsParser] Validating specific pos:",{source:m,key:h}),!m)return(d=f.adFuel.logger)!=null&&d.warn("Cant' find slot ".concat(h," to use as a source in POS Mapping."));m&&((d=f.adFuel.logger)!=null&&d.log("[OptionsParser] Setting pos to specific:",{source:m,key:h}),m.posMap=o[h])})(n)}},l.prototype.processExclusions=function(o,s){var a;(a=this.adFuel.perf)!=null&&a.addMark("Processing Exclusions ".concat(JSON.stringify(o),"]")),Array.isArray(o)||(o=[o]),(a=this.adFuel.logger)!=null&&a.log("#################### Should process exclusions?",0<o.length),o.length<1||((a=this.adFuel.logger)!=null&&a.log("#################### Processing exclusions:",o),(a=this.adFuel.logger)!=null&&a.log("#################### Pre Exclusions: ",s.wrappedSlots),a=s.wrappedSlots.toArray().map(function(d){return o.includes(d.slotId)&&(d.isExcluded=!0),d}),s.wrappedSlots=new c.List(a),(s=this.adFuel.logger)!=null&&s.log("#################### Post Exclusions: ",a))},l.prototype.processIncludes=function(o,s){var a;(a=this.adFuel.perf)!=null&&a.addMark("Processing Slots (inclusions) ".concat(JSON.stringify(o))),Array.isArray(o)||(o=[o]),(a=this.adFuel.logger)!=null&&a.log("#################### Should process inclusions?",0<o.length),o.length<1||((a=this.adFuel.logger)!=null&&a.log("#################### Processing inclusions:",o),(a=this.adFuel.logger)!=null&&a.log("#################### Pre Inclusions: ",s.wrappedSlots),a=s.wrappedSlots.where(function(d){return o.includes(d.slotId)}).toArray().map(function(d){return d.isExcluded=!1,d}),s.wrappedSlots=new c.List(a),(s=this.adFuel.logger)!=null&&s.log("#################### Post Inclusions: ",a))},e.OptionsParser=l},{"./SlotWrapper":43,"linq-collections":23}],40:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayLoader=void 0;var u=t("@turnercode/digital-ads-utilities/dist/localization");function g(c){this.adFuel=c,this._overlaysHidden=!0}Object.defineProperty(g.prototype,"overlaysHidden",{get:function(){return this._overlaysHidden},enumerable:!1,configurable:!0}),g.prototype._togglePageOverlay=function(){var c,l,o,s;(c=this.adFuel.logger)!=null&&c.log("===== OVERLAY LOADER ===== Toggling Page Overlay...",this.overlaysHidden),this.overlaysHidden&&((c=document.createElement("style")).innerHTML=`
        html::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }
        html body::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }
      `,(l=document.createElement("div")).className="pos_overlay",l.id="page_overlay",l.style.position="fixed",l.style.bottom="0",l.style.left="10",l.style.textAlign="left",l.style.padding="5px",l.style.marginBottom="25px",l.style.fontFamily="Verdana",l.style.fontSize="12px",l.style.fontWeight="normal",l.style.lineHeight="12px",l.style.background="rgba(0,50,100,0.7)",l.style.color="#ffffff",l.style.zIndex="2147483000",l.style.overflow="hidden",l.style.overflowY="auto",l.style.overflowX="auto",l.style.width="500px",l.style.height="30vh",(o=document.createElement("ul")).style.listStyleType="none",o.style.margin="0px",o.style.marginTop="5px",o.style.marginBottom="5px",o.style.padding="5px",o.innerHTML=o.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; align: right; text-align: right; display: inline-block;"><a style="cursor: copy; color: white;" onClick="copyPageInfo()">[COPY]</a></div>',s=this.adFuel,["afv","uc","mv","reg"].forEach(function(a){var d,r=document.createElement("li"),n=(r.style.margin="5px",r.style.padding="0px",s.version()),f=s.registeredModules.getKeys(),h=s.fetchedRegistries.keys(),m=((d=s.logger)!=null&&d.log("Version: ",n),(d=s.logger)!=null&&d.log("Modules: ",f),(d=s.logger)!=null&&d.log("Registries: ",h),((d=(d=window.WM)==null?void 0:d.UserConsent)==null?void 0:d.getRegion())||"global"),i=m==="global"?"N/A":JSON.stringify((d=(d=window.WM)==null?void 0:d.UserConsent)==null?void 0:d.getConsentState(),null,2);switch((d=s.logger)!=null&&d.log("Consent Region: -".concat(m,"-")),(d=s.logger)!=null&&d.log("Consent Status: ",i),r.style.direction="ltr",a){case"afv":r.innerHTML='<b style="font-size: 1.25em;">AdFuel v'.concat(n,"</b>");break;case"mv":r.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Modules:</b>',r.innerHTML=r.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',f.forEach(function(v){var _,v=s.registeredModules.get(v);r.innerHTML=r.innerHTML+'<li style="margin: 0px; margin-left: 5px;">'.concat((_=v.unWrappedModule)==null?void 0:_.MODULE_NAME," v").concat((_=v.unWrappedModule)==null?void 0:_.MODULE_VERSION,"</li>")}),r.innerHTML=r.innerHTML+"</ul>";break;case"reg":r.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Registries:</b>',r.innerHTML=r.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',Array.from(h).forEach(function(v){var _=s.fetchedRegistries.get(v),p=null;_&&(p=_[0]),r.innerHTML=r.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Name:</b> '.concat(p==null?void 0:p.rktr_id,"</li>"),r.innerHTML=r.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Website:</b> <a style="color: yellow;" href="'.concat(v,'" target="_blank">').concat(v,"</a></li>"),r.innerHTML=r.innerHTML+'<li style="margin: 0px; margin-left: 5px; padding-bottom: 5px; border-bottom: solid 1px white;"><b>Last Updated:</b> '.concat(p==null?void 0:p.rktr_deployed_date,"<br /></li>")}),r.innerHTML=r.innerHTML+"</ul>";break;case"uc":r.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>User Consent:</b>',r.innerHTML=r.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',r.innerHTML=r.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Region:</b> '.concat(m.toUpperCase(),"</li>"),r.innerHTML=r.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Status:</b> '.concat(i?"Granted":"Denied","</li>"),r.innerHTML=r.innerHTML+"</ul>"}o.appendChild(r)}),l.appendChild(o),window.copyPageInfo=function(){var a=(a=document.getElementById("page_overlay"))==null?void 0:a.innerText.replace("[COPY]","");return console.log("Overlay Text: ",a),navigator.clipboard.writeText(a||""),a},this.showTemporalData(l),document.head.appendChild(c),document.body.appendChild(l))},g.prototype._toggleOverlays=function(){var c,l,o=this;if(this._overlaysHidden){(s=this.adFuel.logger)!=null&&s.log("===== OVERLAY LOADER ===== Showing Overlays..."),this._togglePageOverlay();var s=document.querySelectorAll(".adfuel-rendered");(c=this.adFuel.logger)!=null&&c.log("===== OVERLAY LOADER ===== Ad Slots:",s),d=s.length,s.forEach(function(n){var f=n.id,h=document.getElementById(f)||document.createElement("div"),m=(h.style.position="relative",(i=o.adFuel)==null?void 0:i.processedData),i=m.getKeys(),v={},_=(i.forEach(function(b){var E=m.get(b);(b=o.adFuel.logger)!=null&&b.log("===== OVERLAY LOADER ===== Registry:",E),E.wrappedSlots.forEach(function(A){A.unWrappedSlot.rktr_slot_id===f&&A.isBuilt&&A.gSlot&&((v=A).parentRegistry=E.url)})}),(i=o.adFuel.logger)!=null&&i.log("===== OVERLAY LOADER ===== data: ",{processedData:m,adElement:n,adFuel:Object.keys(o.adFuel),activeSlot:v}),f.substring(f.indexOf("_")+1)),i=document.createElement("div"),p=(i.className="pos_overlay",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.right="0",i.style.bottom="0",i.style.textAlign="left",i.style.padding="5px",i.style.fontFamily="Verdana",i.style.fontSize="12px",i.style.fontWeight="normal",i.style.lineHeight="12px",i.style.background="rgba(0,100,0,0.7)",i.style.color="#ffffff",i.style.zIndex="2147483000",i.style.resize="both",i.style.overflow="hidden",i.style.overflowY="auto",i.style.overflowX="auto",i.style.width=h.style.width+"px",i.style.height=h.style.height+"px",i.id="overlay_"+f,document.createElement("ul"));p.style.listStyleType="none",p.style.margin="0px",p.style.marginTop="5px",p.style.marginBottom="5px",p.style.padding="5px",p.innerHTML=p.innerHTML+`<div style="position: absolute; top: 5px; right: 5px; display: inline-block; align: right; text-align: right"><a style="cursor: copy; color: white;" onClick="copySlotInfo('`.concat(f,`')">[COPY]</a></div>`),["Slot","Details","Response","Programmatic","Bids","Targeting"].forEach(function(b){function E(T){return'<ul style="list-style-type: none; margin: 0px; margin-left: '.concat(T,'px; padding-top: 2px; padding-bottom: 2px;">')}function A(T){return'<li style="direction: ltr; margin-left: '.concat(T,'px; padding: 0px;">')}switch(p.innerHTML=p.innerHTML+A(5),b){case"Slot":p.innerHTML=p.innerHTML+'<b style="font-size: 1.25em;">Slot: '.concat(f,"</b>");break;case"Details":p.innerHTML=p.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Details:</b>',p.innerHTML=p.innerHTML+E(10),p.innerHTML=p.innerHTML+A(10)+"<b>POS:</b> "+_+"</li>",p.innerHTML=p.innerHTML+A(10)+"<b>AdUnit:</b> "+((v==null?void 0:v.adUnitMap)||(v==null?void 0:v.unWrappedSlot.rktr_ad_id))+"</li>",p.innerHTML=p.innerHTML+A(10)+"<b>Registry:</b> "+(v==null?void 0:v.parentRegistry)+"</li>",p.innerHTML=p.innerHTML+A(10)+"<b>Monetized:</b> "+(v&&v.monetization?v.monetization.isMonetized:"false")+"</li>",p.innerHTML=p.innerHTML+"</ul>";break;case"Response":p.innerHTML=p.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Response:</b>',p.innerHTML=p.innerHTML+E(10);var L,C=v.responseData;if(C)for(var M in C)M!=="renderedSize"&&(L=C[M])!==null&&(p.innerHTML=p.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>'.concat(M,":</b> ").concat(JSON.stringify(L),"</li>"));p.innerHTML=p.innerHTML+A(10)+"<b>Rendered Size:</b> ".concat(typeof v.responseData.renderedSize!="string"?v.responseData.renderedSize.join("x"):v.responseData.renderedSize,"</li>"),p.innerHTML=p.innerHTML+"</ul>";break;case"Programmatic":p.innerHTML=p.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Programmatic:</b>',p.innerHTML=p.innerHTML+E(10),Object.keys(v.programmatic).forEach(function(T){var U;switch(p.innerHTML=p.innerHTML+A(10),T){case"a9":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== A9: ",v.programmatic.a9),p.innerHTML=p.innerHTML+"<b>A9:</b> ",p.innerHTML=p.innerHTML+E(15),p.innerHTML=p.innerHTML+A(15)+"<b>SlotName:</b> "+v.programmatic.a9.slotName+"</li>",p.innerHTML=p.innerHTML+"</ul>";break;case"ias":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== IAS: ",v.programmatic.ias),p.innerHTML=p.innerHTML+"<b>IAS:</b> ",p.innerHTML=p.innerHTML+E(15),p.innerHTML=p.innerHTML+A(15)+"<b>adUnitPath:</b> "+v.programmatic.ias.adUnitPath+"</li>",p.innerHTML=p.innerHTML+"</ul>";break;case"krux":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== Krux: ",v.programmatic.krux),p.innerHTML=p.innerHTML+"<b>Krux:</b> ",p.innerHTML=p.innerHTML+E(15),p.innerHTML=p.innerHTML+A(15)+"<b>controlTag:</b> "+((0,u.isIntl)()?v.programmatic.krux.intl_controltag:v.programmatic.krux.dom_controltag)+"</li>",p.innerHTML=p.innerHTML+"</ul>";break;case"prebid":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== Prebid: ",v.programmatic.prebid),p.innerHTML=p.innerHTML+"<b>Prebid:</b> ",p.innerHTML=p.innerHTML+E(15),Object.keys(v.programmatic.prebid).forEach(function(j){j!=="bids"&&(p.innerHTML=p.innerHTML+A(15)+"<b>".concat(j.toUpperCase(),":</b><br />"),p.innerHTML=p.innerHTML+E(20),Object.keys(v.programmatic.prebid[j]).forEach(function(W){var D=W!=="keywords"?v.programmatic.prebid[j][W]:JSON.stringify(v.programmatic.prebid[j][W]);p.innerHTML=p.innerHTML+A(20)+"<b>".concat(W,":</b> ").concat(D,"</li>")}),p.innerHTML=p.innerHTML+"</ul>",p.innerHTML=p.innerHTML+"</li>")}),p.innerHTML=p.innerHTML+"</ul>"}p.innerHTML=p.innerHTML+"</li>"}),p.innerHTML=p.innerHTML+"</ul>";break;case"Targeting":p.innerHTML=p.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Targeting:</b>',p.innerHTML=p.innerHTML+E(10),Object.keys(v.requestedSlotTargets).forEach(function(T){0<v.requestedSlotTargets[T].length?p.innerHTML=p.innerHTML+A(10)+"<b>".concat(T,":</b> ").concat(JSON.stringify(v.requestedSlotTargets[T].join(", ")),"</li>"):(T=o.adFuel.logger)!=null&&T.log("===== OVERLAY LOADER ===== No Slot Targets [".concat(v.slotId,"]"))}),p.innerHTML=p.innerHTML+"</ul>"}p.innerHTML=p.innerHTML+"</li>"}),window.copySlotInfo=function(b){return b=(b=document.getElementById("overlay_"+b))==null?void 0:b.innerText.replace("[COPY]",""),console.log("Overlay Text: ",b),navigator.clipboard.writeText(b||""),b},i.appendChild(p),h.appendChild(i)}),this._overlaysHidden=!1}else{(c=this.adFuel.logger)!=null&&c.log("===== OVERLAY LOADER ===== Removing Overlays...");for(var a=document.querySelectorAll(".pos_overlay"),d=a.length,r=0;r<d;r++)(l=a[r].parentNode)!=null&&l.removeChild(a[r]);this._overlaysHidden=!0}},g.prototype.startConsoleTool=function(){var c,l=this;try{document.addEventListener("keydown",function(o){o.isComposing||o.keyCode===229||o.code==="229"||o.code==="KeyZ"&&o.ctrlKey&&o.shiftKey&&l._toggleOverlays()})}catch(o){(c=this.adFuel.logger)!=null&&c.log("Error Starting Console Tool: ",o)}},g.prototype.getTemporalData=function(){var c=[];return performance.getEntries().forEach(function(l,o){o===0?["connectEnd","connectStart","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","domInteractive","domainLookupStart","domainLookupEnd","fetchStart","loadEventEnd","loadEventStart","requestStart","responseStart","responseEnd"].forEach(function(s){l[s]!==1&&c.push({name:s,startTime:l[s],duration:0,entryType:"navigation"})}):(0<=l.name.indexOf("ADFUEL")||0<=["gpt-tag-load","gpt-first-ad-request","gpt-first-ad-render"].indexOf(l.name))&&c.push(l)}),c.sort(function(l,o){return l.startTime>o.startTime?1:l.startTime<o.startTime?-1:0}),c},g.prototype.showTemporalData=function(c){var l=document.createElement("div"),o=(l.style.textAlign="left",l.innerHTML="<b>Performance Data:</b>",this.getTemporalData()),s=["name","entryType","startTime","duration"],a=document.createElement("table"),d=(a.border="1",a.style.width="100%",document.createElement("thead")),r=document.createElement("tr"),n=(d.appendChild(r),s.forEach(function(f){var h=document.createElement("td");h.innerHTML=f.toUpperCase(),h.style.padding="5px",h.style.paddingLeft="5px",h.style.paddingRight="5px",h.style.fontSize="1em",h.style.fontWeight="bolder",h.style.textAlign="center",r.appendChild(h)}),document.createElement("tbody"));o.forEach(function(f){var h=document.createElement("tr");h.style.padding="15px",s.forEach(function(m){var i=document.createElement("td");switch(m){case"name":i.innerHTML=f[m].replace("[ADFUEL TS] ","");break;case"startTime":case"duration":i.innerHTML=parseFloat(f[m]).toFixed(4);break;default:i.innerHTML=f[m]}i.style.padding="2px",i.style.paddingLeft="5px",i.style.paddingRight="5px",i.style.fontSize=".8em",i.style.fontWeight="normal",h.appendChild(i)}),n.appendChild(h)}),a.appendChild(d),a.appendChild(n),l.appendChild(a),c.appendChild(l)},e.OverlayLoader=g},{"@turnercode/digital-ads-utilities/dist/localization":13}],41:[function(t,y,e){"use strict";var u,g,c=this&&this.__extends||(u=function(m,i){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(v,_){v.__proto__=_}:function(v,_){for(var p in _)Object.prototype.hasOwnProperty.call(_,p)&&(v[p]=_[p])}))(m,i)},function(m,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function v(){this.constructor=m}u(m,i),m.prototype=i===null?Object.create(i):(v.prototype=i.prototype,new v)}),l=this&&this.__awaiter||function(m,i,v,_){return new(v=v||Promise)(function(p,b){function E(C){try{L(_.next(C))}catch(M){b(M)}}function A(C){try{L(_.throw(C))}catch(M){b(M)}}function L(C){var M;C.done?p(C.value):((M=C.value)instanceof v?M:new v(function(T){T(M)})).then(E,A)}L((_=_.apply(m,i||[])).next())})},o=this&&this.__generator||function(m,i){var v,_,p,b={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},E={next:A(0),throw:A(1),return:A(2)};return typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function A(L){return function(C){var M=[L,C];if(v)throw new TypeError("Generator is already executing.");for(;b=E&&M[E=0]?0:b;)try{if(v=1,_&&(p=2&M[0]?_.return:M[0]?_.throw||((p=_.return)&&p.call(_),0):_.next)&&!(p=p.call(_,M[1])).done)return p;switch(_=0,(M=p?[2&M[0],p.value]:M)[0]){case 0:case 1:p=M;break;case 4:return b.label++,{value:M[1],done:!1};case 5:b.label++,_=M[1],M=[0];continue;case 7:M=b.ops.pop(),b.trys.pop();continue;default:if(!(p=0<(p=b.trys).length&&p[p.length-1])&&(M[0]===6||M[0]===2)){b=0;continue}if(M[0]===3&&(!p||M[1]>p[0]&&M[1]<p[3]))b.label=M[1];else if(M[0]===6&&b.label<p[1])b.label=p[1],p=M;else{if(!(p&&b.label<p[2])){p[2]&&b.ops.pop(),b.trys.pop();continue}b.label=p[2],b.ops.push(M)}}M=i.call(m,b)}catch(T){M=[6,T],_=0}finally{v=p=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}}},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.RegistryLoader=void 0,t("./AController")),a=t("@turnercode/digital-ads-utilities"),d=t("linq-collections"),r=t("../system"),n=t("."),f=t("./OptionsParser"),t=(g=s.AController,c(h,g),Object.defineProperty(h.prototype,"readyId",{get:function(){return"registry"},enumerable:!1,configurable:!0}),h.prototype.loadRegistryFromUrl=function(m,i){var v;return l(this,void 0,void 0,function(){var _,p=this;return o(this,function(b){return(v=this.adFuel.logger)!=null&&v.info("Loading registry JSON from ".concat(m)),typeof m!="string"?(v=this.adFuel.logger)!=null&&v.log("loadRegistryFromUrl was given a Url value that wasn't a string.",console.trace()):(m.slice(2+(m.lastIndexOf(".")-1>>>0))==="js"&&((v=this.adFuel.logger)!=null&&v.warn("The 'min.js' and '.js' registry file formats are deprecated. Please change your code to use the '.json' registry file."),(_=m.split(".")).pop(),m="".concat(_.filter(function(E){return E.toLowerCase()!=="min"}).join("."),".json"),(v=this.adFuel.logger)!=null)&&v.info("Converting input to use '.json' registry file. Converted to: ".concat(m,". ")),m=(0,a.normalizeUrl)(m),(v=this.adFuel.logger)!=null&&v.log("Looking for Registry JSON: ",m),this.fetchedRegistries.has(m)?((v=this.adFuel.logger)!=null&&v.log("Fetching Registry object from Cache"),_=this.fetchedRegistries.get(m),(v=this.adFuel.logger)!=null&&v.log("===== [RegistryLoader/loadRegistryFromUrl] Registry: ",_),this.loadRegistryFromJson(JSON.parse(JSON.stringify(_)),i,m)):((v=this.adFuel.logger)!=null&&v.log("Fetching Registry JSON from CDN"),(v=this.adFuel.perf)!=null&&v.addMark("Loading Registry JSON START"),fetch(m).then(function(E){return E.json()}).then(function(E){return p.fetchedRegistries.set(m,JSON.parse(JSON.stringify(E.registry))),E.registry}).then(function(E){var A;(A=p.adFuel.perf)!=null&&A.addMark("Loading Registry JSON END"),(A=p.adFuel.perf)!=null&&A.addMeasure("Loading Registry JSON"),p.loadRegistryFromJson(E,i,m)}).catch(function(E){var A;throw(A=p.adFuel.logger)!=null&&A.error("Error loading ".concat(m),E),Error(E)}))),[2]})})},h.prototype.loadRegistryFromJson=function(m,i,v){(E=this.adFuel.perf)!=null&&E.addMark("Processing Registry [".concat(m[0].rktr_id,"]")),v=v||"".concat(m[0].rktr_id),(E=this.adFuel.logger)!=null&&E.log("===== [RegistryLoader/loadRegistryFromJson] Registry: ",{registry:m,jsonUrl:v});var _,p=new d.List,b=m[0];b.slots=[],(E=this.adFuel.logger)!=null&&E.log("===== [RegistryLoader/loadRegistryFromJson] Options: ",i);for(var E,A=1;A<m.length;A++)b.slots.push(JSON.parse(JSON.stringify(m[A]))),i.slots&&i.slots.length!==0?0<=i.slots.indexOf(JSON.parse(JSON.stringify(m[A])).rktr_slot_id)&&((_=this.adFuel.logger)!=null&&_.log("===== [RegistryLoader/loadRegistryFromJson] Selective Slot: ",m[A]),p.push(new r.SlotWrapper(JSON.parse(JSON.stringify(m[A]))))):((_=this.adFuel.logger)!=null&&_.log("===== [RegistryLoader/loadRegistryFromJson] All Slots: ",m[A]),p.push(new r.SlotWrapper(JSON.parse(JSON.stringify(m[A])))));E=new n.GptProcessData().build(b,p,i,v),(v=this.adFuel.logger)!=null&&v.log("data variable in loadRegistryfromJson",E),this.loadRegistryFromObject(E)},h.prototype.loadRegistryFromObject=function(m){var i;m=new f.OptionsParser(this.adFuel).processOptions(m),(i=this.adFuel.logger)!=null&&i.info("GptProcessDataObject for processing",m),this.adFuel.missionControl.processQueue.push(m),this.missionControl.setReady(this)},h);function h(m){var i=g.call(this,m.missionControl)||this;return i.adFuel=m,i.fetchedRegistries=new Map,i}e.RegistryLoader=t},{".":45,"../system":45,"./AController":31,"./OptionsParser":39,"@turnercode/digital-ads-utilities":11,"linq-collections":23}],42:[function(t,y,e){"use strict";function u(g){this.unwrapped=g}Object.defineProperty(e,"__esModule",{value:!0}),e.SizeWrapper=void 0,Object.defineProperty(u.prototype,"width",{get:function(){return+this.unwrapped[0]},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"height",{get:function(){return+this.unwrapped[1]},enumerable:!1,configurable:!0}),e.SizeWrapper=u},{}],43:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlotWrapper=void 0;var u=t("./Monetization"),g=t("./SizeWrapper"),c=t("./ViewportWrapper");function l(o){this.unWrappedSlot=o,this._sync=!1,this._isExcluded=!1,this._hasBeenDisplayed=!1,this._gslot=void 0,this._monetization={isMonetized:!1,filteredSizes:[],isSuppressed:!1},this._adUnitMap="",this._parentRegistry="",this._responsive=[],this._sizes=[],this._requestedSlotTargets={},this._posMap="",this.programmatic={},this.responseData={advertiserId:void 0,campaignId:void 0,creativeId:void 0,isEmpty:!0,lineItemId:void 0,renderedSize:"",sourceAgnosticCreativeId:void 0,sourceAgnosticLineItemId:void 0},this._adUnitMap=o.rktr_ad_id,this._posMap="";for(var s=0,a=this.targeting;s<a.length;s++){var d=a[s];if(d[0]==="pos"){this._posMap=d[1][0];break}}this.unWrappedSlot.responsive=this.formatResponsiveMapping(o);for(var r=0,n=this.unWrappedSlot.responsive;r<n.length;r++){var f=n[r];this._responsive.push(new c.ViewportWrapper(f))}for(var h=0,m=this.unWrappedSlot.sizes;h<m.length;h++){var i=m[h];this._sizes.push(new g.SizeWrapper(i))}this._monetization=new u.Monetization(this),this._parentRegistry=""}l.prototype.formatResponsiveMapping=function(o){return o.responsive.map(function(s){return s.map(function(a){return a[0]==="suppress"?[]:a.map(function(d){return Array.isArray(d)?d.map(function(r){return typeof r!="string"||r==="fluid"?r:parseInt(r,10)}):typeof d=="string"?parseInt(d,10):d})})})},Object.defineProperty(l.prototype,"slotId",{get:function(){return this.unWrappedSlot.rktr_slot_id},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"sync",{get:function(){return this._sync},set:function(o){this._sync=o},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isOutOfPage",{get:function(){return 1<=this.unWrappedSlot.rktr_slot_id.indexOf("_oop")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isBuilt",{get:function(){return!!this._gslot},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isExcluded",{get:function(){return this._isExcluded},set:function(o){this._isExcluded=o},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"hasBeenDisplayed",{get:function(){return this._hasBeenDisplayed},set:function(o){this._hasBeenDisplayed=o},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"slotExistsOnPage",{get:function(){return!!document.getElementById(this.slotId)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"gSlot",{get:function(){return this._gslot},set:function(o){this._gslot=o},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"monetization",{get:function(){return this._monetization},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parentRegistry",{get:function(){return this._parentRegistry},set:function(o){this._parentRegistry=o},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"adUnitMap",{get:function(){return this._adUnitMap},set:function(o){this._adUnitMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"posMap",{get:function(){return this._posMap||""},set:function(o){this._posMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"targeting",{get:function(){return this.unWrappedSlot.targeting},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"responsive",{get:function(){return this._responsive},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"sizes",{get:function(){return this._sizes},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isSinglton",{get:function(){return this.unWrappedSlot.rktr_slot_id.indexOf("ad_mod")===0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"requestedSlotTargets",{get:function(){return this._requestedSlotTargets},set:function(o){this._requestedSlotTargets=o},enumerable:!1,configurable:!0}),l.prototype.toLogging=function(){return{slotId:this.slotId,isExcluded:this.isExcluded,isBuilt:this.isBuilt,hasBeenDisplayed:this.hasBeenDisplayed,slotExistsOnPage:this.slotExistsOnPage,isOOP:this.isOutOfPage}},e.SlotWrapper=l},{"./Monetization":38,"./SizeWrapper":42,"./ViewportWrapper":44}],44:[function(t,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportWrapper=void 0;var u=t("./SizeWrapper"),t=(Object.defineProperty(g.prototype,"viewport",{get:function(){return new u.SizeWrapper(this.unwrapped[0])},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"sizes",{get:function(){for(var c={sizes:[],suppressed:!1},l=0,o=this.unwrapped[1];l<o.length;l++){var s=o[l];Array.isArray(s)?c.sizes.push(new u.SizeWrapper(s)):c.suppressed=!0}return c},enumerable:!1,configurable:!0}),g);function g(c){this.unwrapped=c}e.ViewportWrapper=t},{"./SizeWrapper":42}],45:[function(t,y,e){"use strict";var u=this&&this.__createBinding||(Object.create?function(c,l,o,s){s===void 0&&(s=o);var a=Object.getOwnPropertyDescriptor(l,o);a&&("get"in a?l.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return l[o]}}),Object.defineProperty(c,s,a)}:function(c,l,o,s){c[s=s===void 0?o:s]=l[o]}),g=this&&this.__exportStar||function(c,l){for(var o in c)o==="default"||Object.prototype.hasOwnProperty.call(l,o)||u(l,c,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.processors=void 0,e.processors=t("../processors/index"),g(t("./MissionControl"),e),g(t("./SlotWrapper"),e),g(t("./ViewportWrapper"),e),g(t("./SizeWrapper"),e),g(t("./GoogleApi"),e),g(t("./GptProcessData"),e),g(t("./RegistryLoader"),e),g(t("./ModuleManager"),e),g(t("./GptScriptLoader"),e),g(t("./OverlayLoader"),e),g(t("./BaseAdFuelOptions"),e)},{"../processors/index":30,"./BaseAdFuelOptions":32,"./GoogleApi":33,"./GptProcessData":34,"./GptScriptLoader":35,"./MissionControl":36,"./ModuleManager":37,"./OverlayLoader":40,"./RegistryLoader":41,"./SizeWrapper":42,"./SlotWrapper":43,"./ViewportWrapper":44}],46:[function(t,y,e){y.exports={family:"Platinum Peacemaker ",major:3,minor:0,revision:49}},{}]},{},[25])(25)})});var Ue=ps();function Os(){Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableCep")&&hs(),Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableInViewRefresh")&&ms(),Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableMalvertisingDetection")&&_s(),Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableBlockThrough")&&bs(),Ss()}(function(){window.AdFuelOptions?Os():window.addEventListener("adfuel.loaded",Os)})();})();
//# sourceMappingURL=cnn-edition-adfuel-body.map
